import{useStores as e,useApi as t,useCollection as n,defineInterface as r}from"@directus/extensions-sdk";import{computed as i,unref as o,ref as s,watch as a,readonly as l,defineComponent as c,toRefs as u,inject as f,resolveComponent as d,openBlock as h,createBlock as p,withCtx as m,createTextVNode as g,createElementVNode as y,createElementBlock as _,toDisplayString as v,createSlots as b,createVNode as w,pushScopeId as x,popScopeId as E}from"vue";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function $(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M={exports:{}};M.exports=function(){var e=function(e,t){var n=Array.prototype.concat,r=Array.prototype.slice,i=Object.prototype.toString;function o(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}var s=Array.isArray||function(e){return"[object Array]"===i.call(e)};function a(e){return"[object Function]"===i.call(e)}function l(e){return"number"==typeof e&&e-e==0}function c(e){return n.apply([],e)}function u(){return new u._init(arguments)}function f(){return 0}function d(){return 1}function h(e,t){return e===t?1:0}u.fn=u.prototype,u._init=function(e){if(s(e[0]))if(s(e[0][0])){a(e[1])&&(e[0]=u.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=a(e[1])?u.map(e[0],e[1]):e[0],this.length=1;else if(l(e[0]))this[0]=u.seq.apply(null,e),this.length=1;else{if(e[0]instanceof u)return u(e[0].toArray());this[0]=[],this.length=1}return this},u._init.prototype=u.prototype,u._init.constructor=u,u.utils={calcRdx:o,isArray:s,isFunction:a,isNumber:l,toVector:c},u._random_fn=e.random,u.setRandom=function(e){if("function"!=typeof e)throw new TypeError("fn is not a function");u._random_fn=e},u.extend=function(e){var t,n;if(1===arguments.length){for(n in e)u[n]=e[n];return this}for(t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},u.rows=function(e){return e.length||1},u.cols=function(e){return e[0].length||1},u.dimensions=function(e){return{rows:u.rows(e),cols:u.cols(e)}},u.row=function(e,t){return s(t)?t.map((function(t){return u.row(e,t)})):e[t]},u.rowa=function(e,t){return u.row(e,t)},u.col=function(e,t){if(s(t)){var n=u.arange(e.length).map((function(){return new Array(t.length)}));return t.forEach((function(t,r){u.arange(e.length).forEach((function(i){n[i][r]=e[i][t]}))})),n}for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=[e[i][t]];return r},u.cola=function(e,t){return u.col(e,t).map((function(e){return e[0]}))},u.diag=function(e){for(var t=u.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},u.antidiag=function(e){for(var t=u.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},u.transpose=function(e){var t,n,r,i,o,a=[];for(s(e[0])||(e=[e]),n=e.length,r=e[0].length,o=0;o<r;o++){for(t=new Array(n),i=0;i<n;i++)t[i]=e[i][o];a.push(t)}return 1===a.length?a[0]:a},u.map=function(e,t,n){var r,i,o,a,l;for(s(e[0])||(e=[e]),i=e.length,o=e[0].length,a=n?e:new Array(i),r=0;r<i;r++)for(a[r]||(a[r]=new Array(o)),l=0;l<o;l++)a[r][l]=t(e[r][l],r,l);return 1===a.length?a[0]:a},u.cumreduce=function(e,t,n){var r,i,o,a,l;for(s(e[0])||(e=[e]),i=e.length,o=e[0].length,a=n?e:new Array(i),r=0;r<i;r++)for(a[r]||(a[r]=new Array(o)),o>0&&(a[r][0]=e[r][0]),l=1;l<o;l++)a[r][l]=t(a[r][l-1],e[r][l]);return 1===a.length?a[0]:a},u.alter=function(e,t){return u.map(e,t,!0)},u.create=function(e,t,n){var r,i,o=new Array(e);for(a(t)&&(n=t,t=e),r=0;r<e;r++)for(o[r]=new Array(t),i=0;i<t;i++)o[r][i]=n(r,i);return o},u.zeros=function(e,t){return l(t)||(t=e),u.create(e,t,f)},u.ones=function(e,t){return l(t)||(t=e),u.create(e,t,d)},u.rand=function(e,t){return l(t)||(t=e),u.create(e,t,u._random_fn)},u.identity=function(e,t){return l(t)||(t=e),u.create(e,t,h)},u.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},u.clear=function(e){return u.alter(e,f)},u.seq=function(e,t,n,r){a(r)||(r=!1);var i,s=[],l=o(e,t),c=(t*l-e*l)/((n-1)*l),u=e;for(i=0;u<=t&&i<n;u=(e*l+c*l*++i)/l)s.push(r?r(u,i):u);return s},u.arange=function(e,n,r){var i,o=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)o.push(i);else for(i=e;i>n;i+=r)o.push(i);return o},u.slice=function(){function e(e,n,r,i){var o,s=[],a=e.length;if(n===t&&r===t&&i===t)return u.copy(e);if(i=i||1,(n=(n=n||0)>=0?n:a+n)===(r=(r=r||e.length)>=0?r:a+r)||0===i)return[];if(n<r&&i<0)return[];if(n>r&&i>0)return[];if(i>0)for(o=n;o<r;o+=i)s.push(e[o]);else for(o=n;o>r;o+=i)s.push(e[o]);return s}function n(t,n){var r,i;return l((n=n||{}).row)?l(n.col)?t[n.row][n.col]:e(u.rowa(t,n.row),(r=n.col||{}).start,r.end,r.step):l(n.col)?e(u.cola(t,n.col),(i=n.row||{}).start,i.end,i.step):(i=n.row||{},r=n.col||{},e(t,i.start,i.end,i.step).map((function(t){return e(t,r.start,r.end,r.step)})))}return n}(),u.sliceAssign=function(n,r,i){var o,s;if(l(r.row)){if(l(r.col))return n[r.row][r.col]=i;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,o=u.arange(r.col.start,e.min(n.length,r.col.end),r.col.step);var a=r.row;return o.forEach((function(e,t){n[a][e]=i[t]})),n}if(l(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,s=u.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step);var c=r.col;return s.forEach((function(e,t){n[e][c]=i[t]})),n}return i[0].length===t&&(i=[i]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,s=u.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),o=u.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step),s.forEach((function(e,t){o.forEach((function(r,o){n[e][r]=i[t][o]}))})),n},u.diagonal=function(e){var t=u.zeros(e.length,e.length);return e.forEach((function(e,n){t[n][n]=e})),t},u.copy=function(e){return e.map((function(e){return l(e)?e:e.map((function(e){return e}))}))};var p=u.prototype;return p.length=0,p.push=Array.prototype.push,p.sort=Array.prototype.sort,p.splice=Array.prototype.splice,p.slice=Array.prototype.slice,p.toArray=function(){return this.length>1?r.call(this):r.call(this)[0]},p.map=function(e,t){return u(u.map(this,e,t))},p.cumreduce=function(e,t){return u(u.cumreduce(this,e,t))},p.alter=function(e){return u.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){p[e]=function(t){var n,r=this;return t?(setTimeout((function(){t.call(r,p[e].call(r))})),this):(n=u[e](this),s(n)?u(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){p[e]=function(t,n){var r=this;return n?(setTimeout((function(){n.call(r,p[e].call(r,t))})),this):u(u[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){p[e]=function(){return u(u[e].apply(null,arguments))}}(e[t])}("create zeros ones rand identity".split(" ")),u}(Math);return function(e,t){var n=e.utils.isFunction;function r(e,t){return e-t}function i(e,n,r){return t.max(n,t.min(e,r))}e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),i=0,o=t.length;--o>=0;)i+=(n=t[o]-r)*n;return i},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){var r=n.map(t.log),i=e.mean(r);return t.exp(i)},e.median=function(e){var t=e.length,n=e.slice().sort(r);return 1&t?n[t/2|0]:(n[t/2-1]+n[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,(function(e,t){return e+t}))},e.cumprod=function(t){return e.cumreduce(t,(function(e,t){return e*t}))},e.diff=function(e){var t,n=[],r=e.length;for(t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){var t,n=[],i={};for(t=0;t<e.length;t++)i[l=e[t]]?i[l]++:(i[l]=1,n.push(l));var o=n.sort(r),s={},a=1;for(t=0;t<o.length;t++){var l,c=i[l=o[t]],u=(a+(a+c-1))/2;s[l]=u,a+=c}return e.map((function(e){return s[e]}))},e.mode=function(e){var t,n=e.length,i=e.slice().sort(r),o=1,s=0,a=0,l=[];for(t=0;t<n;t++)i[t]===i[t+1]?o++:(o>s?(l=[i[t]],s=o,a=0):o===s&&(l.push(i[t]),a++),o=1);return 0===a?l[0]:l},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){var n=t.reduce((function(t,n){return t+e.sumsqerr(n)}),0),r=t.reduce((function(e,t){return e+t.length}),0);return n/(r-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,i=new Array(r),o=0;o<r;o++)i[o]=t[o]-n;return i},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),i=[],o=n.length-1;o>=0;o--)i.push(t.abs(n[o]-r));return e.mean(i)},e.meddev=function(n){for(var r=e.median(n),i=[],o=n.length-1;o>=0;o--)i.push(t.abs(n[o]-r));return e.median(i)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var n=e.length,i=e.slice().sort(r);return[i[t.round(n/4)-1],i[t.round(n/2)-1],i[t.round(3*n/4)-1]]},e.quantiles=function(e,n,o,s){var a,l,c,u,f,d=e.slice().sort(r),h=[n.length],p=e.length;for(void 0===o&&(o=3/8),void 0===s&&(s=3/8),a=0;a<n.length;a++)c=p*(l=n[a])+(o+l*(1-o-s)),u=t.floor(i(c,1,p-1)),f=i(c-u,0,1),h[a]=(1-f)*d[u-1]+f*d[u];return h},e.percentile=function(e,t,n){var i=e.slice().sort(r),o=t*(i.length+(n?1:-1))+(n?0:1),s=parseInt(o),a=o-s;return s+1<i.length?i[s-1]+a*(i[s]-i[s-1]):i[s-1]},e.percentileOfScore=function(e,t,n){var r,i,o=0,s=e.length,a=!1;for("strict"===n&&(a=!0),i=0;i<s;i++)r=e[i],(a&&r<t||!a&&r<=t)&&o++;return o/s},e.histogram=function(n,r){r=r||4;var i,o=e.min(n),s=(e.max(n)-o)/r,a=n.length,l=[];for(i=0;i<r;i++)l[i]=0;for(i=0;i<a;i++)l[t.min(t.floor((n[i]-o)/s),r-1)]+=1;return l},e.covariance=function(t,n){var r,i=e.mean(t),o=e.mean(n),s=t.length,a=new Array(s);for(r=0;r<s;r++)a[r]=(t[r]-i)*(n[r]-o);return e.sum(a)/(s-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var i=e.mean(n),o=e.stdev(n),s=n.length,a=0,l=0;l<s;l++)a+=t.pow((n[l]-i)/o,r);return a/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var o=e.prototype;!function(t){for(var r=0;r<t.length;r++)!function(t){o[t]=function(r,i){var s=[],a=0,l=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(l,o[t].call(l,r))})),this;if(this.length>1){for(l=!0===r?this:this.transpose();a<l.length;a++)s[a]=e[t](l[a]);return s}return e[t](this[0],r)}}(t[r])}("cumsum cumprod".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){o[t]=function(r,i){var s=[],a=0,l=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(l,o[t].call(l,r))})),this;if(this.length>1){for("sumrow"!==t&&(l=!0===r?this:this.transpose());a<l.length;a++)s[a]=e[t](l[a]);return!0===r?e[t](e.utils.toVector(s)):s}return e[t](this[0],r)}}(t[r])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){o[t]=function(){var r,i=[],s=0,a=this,l=Array.prototype.slice.call(arguments);if(n(l[l.length-1])){r=l[l.length-1];var c=l.slice(0,l.length-1);return setTimeout((function(){r.call(a,o[t].apply(a,c))})),this}r=void 0;var u=function(n){return e[t].apply(a,[n].concat(l))};if(this.length>1){for(a=a.transpose();s<a.length;s++)i[s]=u(a[s]);return i}return u(this[0])}}(t[r])}("quantiles percentileOfScore".split(" "))}(e,Math),function(e,t){e.gammaln=function(e){var n,r,i,o=0,s=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=1.000000000190015;for(i=(r=n=e)+5.5,i-=(n+.5)*t.log(i);o<6;o++)a+=s[o]/++r;return t.log(2.5066282746310007*a/n)-i},e.loggam=function(e){var n,r,i,o,s,a,l,c=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(n=e,l=0,1==e||2==e)return 0;for(e<=7&&(n=e+(l=t.floor(7-e))),r=1/(n*n),i=2*t.PI,s=c[9],a=8;a>=0;a--)s*=r,s+=c[a];if(o=s/n+.5*t.log(i)+(n-.5)*t.log(n)-n,e<=7)for(a=1;a<=l;a++)o-=t.log(n-1),n-=1;return o},e.gammafn=function(e){var n,r,i,o,s=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],a=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,c=0,u=0,f=0,d=e;if(e>171.6243769536076)return 1/0;if(d<=0){if(!(o=d%1+36e-17))return 1/0;l=(1&d?-1:1)*t.PI/t.sin(t.PI*o),d=1-d}for(i=d,r=d<1?d++:(d-=c=(0|d)-1)-1,n=0;n<8;++n)f=(f+s[n])*r,u=u*r+a[n];if(o=f/u+1,i<d)o/=i;else if(i>d)for(n=0;n<c;++n)o*=d,d++;return l&&(o=l/o),o},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var i,o=e.gammaln(n),s=n,a=1/n,l=a,c=r+1-n,u=1/1e-30,f=1/c,d=f,h=1,p=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;h<=p;h++)a+=l*=r/++s;return a*t.exp(-r+n*t.log(r)-o)}for(;h<=p;h++)d*=(f=1/(f=(i=-h*(h-n))*f+(c+=2)))*(u=c+i/u);return 1-d*t.exp(-r+n*t.log(r)-o)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var i,o,s,a,l=1e-30,c=1,u=n+r,f=n+1,d=n-1,h=1,p=1-u*e/f;for(t.abs(p)<l&&(p=l),a=p=1/p;c<=100&&(p=1+(o=c*(r-c)*e/((d+(i=2*c))*(n+i)))*p,t.abs(p)<l&&(p=l),h=1+o/h,t.abs(h)<l&&(h=l),a*=(p=1/p)*h,p=1+(o=-(n+c)*(u+c)*e/((n+i)*(f+i)))*p,t.abs(p)<l&&(p=l),h=1+o/h,t.abs(h)<l&&(h=l),a*=s=(p=1/p)*h,!(t.abs(s-1)<3e-7));c++);return a},e.gammapinv=function(n,r){var i,o,s,a,l,c,u=0,f=r-1,d=1e-8,h=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(l=t.log(f),c=t.exp(f*(l-1)-h),a=n<.5?n:1-n,i=(2.30753+.27061*(o=t.sqrt(-2*t.log(a))))/(1+o*(.99229+.04481*o))-o,n<.5&&(i=-i),i=t.max(.001,r*t.pow(1-1/(9*r)-i/(3*t.sqrt(r)),3))):i=n<(o=1-r*(.253+.12*r))?t.pow(n/o,1/r):1-t.log(1-(n-o)/(1-o));u<12;u++){if(i<=0)return 0;if((i-=o=(s=(e.lowRegGamma(r,i)-n)/(o=r>1?c*t.exp(-(i-f)+f*(t.log(i)-l)):t.exp(-i+f*t.log(i)-h)))/(1-.5*t.min(1,s*((r-1)/i-1))))<=0&&(i=.5*(i+o)),t.abs(o)<d*i)break}return i},e.erf=function(e){var n,r,i,o,s=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],a=s.length-1,l=!1,c=0,u=0;for(e<0&&(e=-e,l=!0),r=4*(n=2/(2+e))-2;a>0;a--)i=c,c=r*c-u+s[a],u=i;return o=n*t.exp(-e*e+.5*(s[0]+r*c)-u),l?o-1:1-o},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,i,o,s,a=0;if(n>=2)return-100;if(n<=0)return 100;for(s=n<1?n:2-n,r=-.70711*((2.30753+.27061*(o=t.sqrt(-2*t.log(s/2))))/(1+o*(.99229+.04481*o))-o);a<2;a++)r+=(i=e.erfc(r)-s)/(1.1283791670955126*t.exp(-r*r)-r*i);return n<1?r:-r},e.ibetainv=function(n,r,i){var o,s,a,l,c,u,f,d,h,p,m=1e-8,g=r-1,y=i-1,_=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&i>=1?(a=n<.5?n:1-n,u=(2.30753+.27061*(l=t.sqrt(-2*t.log(a))))/(1+l*(.99229+.04481*l))-l,n<.5&&(u=-u),f=(u*u-3)/6,d=2/(1/(2*r-1)+1/(2*i-1)),h=u*t.sqrt(f+d)/d-(1/(2*i-1)-1/(2*r-1))*(f+5/6-2/(3*d)),u=r/(r+i*t.exp(2*h))):(o=t.log(r/(r+i)),s=t.log(i/(r+i)),u=n<(l=t.exp(r*o)/r)/(h=l+(c=t.exp(i*s)/i))?t.pow(r*h*n,1/r):1-t.pow(i*h*(1-n),1/i)),p=-e.gammaln(r)-e.gammaln(i)+e.gammaln(r+i);_<10;_++){if(0===u||1===u)return u;if((u-=l=(c=(e.ibeta(u,r,i)-n)/(l=t.exp(g*t.log(u)+y*t.log(1-u)+p)))/(1-.5*t.min(1,c*(g/u-y/(1-u)))))<=0&&(u=.5*(u+l)),u>=1&&(u=.5*(u+l+1)),t.abs(l)<m*u&&_>0)break}return u},e.ibeta=function(n,r,i){var o=0===n||1===n?0:t.exp(e.gammaln(r+i)-e.gammaln(r)-e.gammaln(i)+r*t.log(n)+i*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+i+2)?o*e.betacf(n,r,i)/r:1-o*e.betacf(1-n,i,r)/i)},e.randn=function(n,r){var i,o,s,a,l;if(r||(r=n),n)return e.create(n,r,(function(){return e.randn()}));do{i=e._random_fn(),o=1.7156*(e._random_fn()-.5),l=(s=i-.449871)*s+(a=t.abs(o)+.386595)*(.196*a-.25472*s)}while(l>.27597&&(l>.27846||o*o>-4*t.log(i)*i*i));return o/i},e.randg=function(n,r,i){var o,s,a,l,c,u,f=n;if(i||(i=r),n||(n=1),r)return(u=e.zeros(r,i)).alter((function(){return e.randg(n)})),u;n<1&&(n+=1),o=n-1/3,s=1/t.sqrt(9*o);do{do{l=1+s*(c=e.randn())}while(l<=0);l*=l*l,a=e._random_fn()}while(a>1-.331*t.pow(c,4)&&t.log(a)>.5*c*c+o*(1-l+t.log(l)));if(n==f)return o*l;do{a=e._random_fn()}while(0===a);return t.pow(a,1/f)*o*l},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,(function(n){return e[t](n)})))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(e,Math),function(e,t){function n(e,n,r,i){for(var o,s=0,a=1,l=1,c=1,u=0,f=0;t.abs((l-f)/l)>i;)f=l,a=c+(o=-(n+u)*(n+r+u)*e/(n+2*u)/(n+2*u+1))*a,l=(s=l+o*s)+(o=(u+=1)*(r-u)*e/(n+2*u-1)/(n+2*u))*l,s/=c=a+o*c,a/=c,l/=c,c=1;return l/n}function r(e){return e/t.abs(e)}function i(n,r,i){var o=12,s=6,a=-30,l=-50,c=60,u=8,f=3,d=2,h=3,p=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],m=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],g=.5*n;if(g>=u)return 1;var y,_=2*e.normal.cdf(g,0,1,1,0)-1;_=_>=t.exp(l/i)?t.pow(_,i):0;for(var v=g,b=(u-g)/(y=n>f?d:h),w=v+b,x=0,E=i-1,$=1;$<=y;$++){for(var M=0,A=.5*(w+v),S=.5*(w-v),R=1;R<=o;R++){var I,N=A+S*(s<R?p[(I=o-R+1)-1]:-p[(I=R)-1]),O=N*N;if(O>c)break;var k=2*e.normal.cdf(N,0,1,1,0)*.5-2*e.normal.cdf(N,n,1,1,0)*.5;k>=t.exp(a/E)&&(M+=k=m[I-1]*t.exp(-.5*O)*t.pow(k,E))}x+=M*=2*S*i/t.sqrt(2*t.PI),v=w,w+=b}return(_+=x)<=t.exp(a/r)?0:(_=t.pow(_,r))>=1?1:_}function o(e,n,r){var i=.322232421088,o=.099348462606,s=-1,a=.588581570495,l=-.342242088547,c=.531103462366,u=-.204231210125,f=.10353775285,d=-453642210148e-16,h=.0038560700634,p=.8832,m=.2368,g=1.214,y=1.208,_=1.4142,v=120,b=.5-.5*e,w=t.sqrt(t.log(1/(b*b))),x=w+((((w*d+u)*w+l)*w+s)*w+i)/((((w*h+f)*w+c)*w+a)*w+o);r<v&&(x+=(x*x*x+x)/r/4);var E=p-m*x;return r<v&&(E+=-g/r+y*x/r),x*(E*t.log(n-1)+_)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function e(t,n,r){return this instanceof e?(this._a=t,this._b=n,this._c=r,this):new e(t,n,r)},e.fn[t]=function(n,r,i){var o=e[t](n,r,i);return o.data=this,o},e[t].prototype.sample=function(n){var r=this._a,i=this._b,o=this._c;return n?e.alter(n,(function(){return e[t].sample(r,i,o)})):e[t].sample(r,i,o)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var i=this._a,o=this._b,s=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,(function(r){return e[t][n](r,i,o,s)})):e[t][n](r,i,o,s)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,i){return n>1||n<0?0:1==r&&1==i?1:r<512&&i<512?t.pow(n,r-1)*t.pow(1-n,i-1)/e.betafn(r,i):t.exp((r-1)*t.log(n)+(i-1)*t.log(1-n)-e.betaln(r,i))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,i){var o;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,i/2)*t.pow(r/i,r/2)*t.pow(n,r/2-1)*t.pow(1+r/i*n,-(r+i)/2):(o=r*n/(i+n*r),r*(i/(i+n*r))/2*e.binomial.pdf((r-2)/2,(r+i-2)/2,o))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e){return e},mode:function(e){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(){return 0},sample:function(n){return-1/n*t.log(e._random_fn())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,i){return n<0?0:0===n&&1===r?1/i:t.exp((r-1)*t.log(n)-n/i-e.gammaln(r)-r*t.log(i))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,i){return n<=0?0:t.exp(-(r+1)*t.log(n)-i/n-e.gammaln(r)+r*t.log(i))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,i){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*i*i))},inv:function(n,r,i){return t.exp(-1.4142135623730951*i*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,i){var o=1e-14;return t.abs(i)<o?e.studentt.pdf(n,r):t.abs(n)<o?t.exp(e.gammaln((r+1)/2)-i*i/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,i)-e.noncentralt.cdf(n,r,i))},cdf:function(n,r,i){var o=1e-14,s=200;if(t.abs(i)<o)return e.studentt.cdf(n,r);var a=!1;n<0&&(a=!0,i=-i);for(var l=e.normal.cdf(-i,0,1),c=o+1,u=c,f=n*n/(n*n+r),d=0,h=t.exp(-i*i/2),p=t.exp(-i*i/2-.5*t.log(2)-e.gammaln(1.5))*i;d<s||u>o||c>o;)u=c,d>0&&(h*=i*i/(2*d),p*=i*i/(2*(d+.5))),l+=.5*(c=h*e.beta.cdf(f,d+.5,r/2)+p*e.beta.cdf(f,d+1,r/2)),d++;return a?1-l:l}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,i){return.5*(1+e.erf((n-r)/t.sqrt(2*i*i)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var i=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),i,i)},inv:function(n,r){var i=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return i=t.sqrt(r*(1-i)/i),n>.5?i:-i},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(n,r){return n*t.pow(-t.log(e._random_fn()),1/r)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,n){return t/2+n/2+(n/2-t/2)*(2*e._random_fn()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,i){return 0===i||1===i?r*i===n?1:0:e.combination(r,n)*t.pow(i,n)*t.pow(1-i,r-n)},cdf:function(r,i,o){var s,a=1e-10;if(r<0)return 0;if(r>=i)return 1;if(o<0||o>1||i<=0)return NaN;var l=o,c=(r=t.floor(r))+1,u=i-r,f=c+u,d=t.exp(e.gammaln(f)-e.gammaln(u)-e.gammaln(c)+c*t.log(l)+u*t.log(1-l));return s=l<(c+1)/(f+2)?d*n(l,c,u,a):1-d*n(1-l,u,c,a),t.round(1/a*(1-s))/(1/a)}}),e.extend(e.negbin,{pdf:function(n,r,i){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-i,n)*t.pow(i,r))},cdf:function(t,n,r){var i=0,o=0;if(t<0)return 0;for(;o<=t;o++)i+=e.negbin.pdf(o,n,r);return i}}),e.extend(e.hypgeom,{pdf:function(n,r,i,o){if(n!=n|0)return!1;if(n<0||n<i-(r-o))return 0;if(n>o||n>i)return 0;if(2*i>r)return 2*o>r?e.hypgeom.pdf(r-i-o+n,r,r-i,r-o):e.hypgeom.pdf(o-n,r,r-i,o);if(2*o>r)return e.hypgeom.pdf(i-n,r,i,r-o);if(i<o)return e.hypgeom.pdf(n,r,o,i);for(var s=1,a=0,l=0;l<n;l++){for(;s>1&&a<o;)s*=1-i/(r-a),a++;s*=(o-l)*(i-l)/((l+1)*(r-i-o+l+1))}for(;a<o;a++)s*=1-i/(r-a);return t.min(1,t.max(0,s))},cdf:function(n,r,i,o){if(n<0||n<i-(r-o))return 0;if(n>=o||n>=i)return 1;if(2*i>r)return 2*o>r?e.hypgeom.cdf(r-i-o+n,r,r-i,r-o):1-e.hypgeom.cdf(o-n-1,r,r-i,o);if(2*o>r)return 1-e.hypgeom.cdf(i-n-1,r,i,r-o);if(i<o)return e.hypgeom.cdf(n,r,o,i);for(var s=1,a=1,l=0,c=0;c<n;c++){for(;s>1&&l<o;){var u=1-i/(r-l);a*=u,s*=u,l++}s+=a*=(o-c)*(i-c)/((c+1)*(r-i-o+c+1))}for(;l<o;l++)s*=1-i/(r-l);return t.min(1,t.max(0,s))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],i=0;if(t<0)return 0;for(;i<=t;i++)r.push(e.poisson.pdf(i,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sampleSmall:function(n){var r=1,i=0,o=t.exp(-n);do{i++,r*=e._random_fn()}while(r>o);return i-1},sampleLarge:function(n){var r,i,o,s,a,l,c,u,f,d,h=n;for(s=t.sqrt(h),a=t.log(h),l=.02483*(c=.931+2.53*s)-.059,u=1.1239+1.1328/(c-3.4),f=.9277-3.6224/(c-2);;){if(i=t.random()-.5,o=t.random(),d=.5-t.abs(i),r=t.floor((2*l/d+c)*i+h+.43),d>=.07&&o<=f)return r;if(!(r<0||d<.013&&o>d)&&t.log(o)+t.log(u)-t.log(l/(d*d)+c)<=r*a-h-e.loggam(r+1))return r}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=n?0:e>=r?1:e<=i?t.pow(e-n,2)/((r-n)*(i-n)):1-t.pow(r-e,2)/((r-n)*(r-i))},inv:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=(i-n)/(r-n)?n+(r-n)*t.sqrt(e*((i-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(i-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(n,r,i){var o=e._random_fn();return o<(i-n)/(r-n)?n+t.sqrt(o*(r-n)*(i-n)):r-t.sqrt((1-o)*(r-n)*(r-i))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},variance:function(e,t){return 2*t*t},sample:function(n,i){var o=e._random_fn()-.5;return n-i*r(o)*t.log(1-2*t.abs(o))}}),e.extend(e.tukey,{cdf:function(n,r,o){var s=1,a=r,l=16,c=8,u=-30,f=1e-14,d=100,h=800,p=5e3,m=25e3,g=1,y=.5,_=.25,v=.125,b=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],w=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(o<2||s<1||a<2)return NaN;if(!Number.isFinite(n))return 1;if(o>m)return i(n,s,a);var x,E=.5*o,$=E*t.log(o)-o*t.log(2)-e.gammaln(E),M=E-1,A=.25*o;x=o<=d?g:o<=h?y:o<=p?_:v,$+=t.log(x);for(var S=0,R=1;R<=50;R++){for(var I=0,N=(2*R-1)*x,O=1;O<=l;O++){var k,j;c<O?(k=O-c-1,j=$+M*t.log(N+b[k]*x)-(b[k]*x+N)*A):(k=O-1,j=$+M*t.log(N-b[k]*x)+(b[k]*x-N)*A),j>=u&&(I+=i(c<O?n*t.sqrt(.5*(b[k]*x+N)):n*t.sqrt(.5*(-b[k]*x+N)),s,a)*w[k]*t.exp(j))}if(R*x>=1&&I<=f)break;S+=I}if(I>f)throw new Error("tukey.cdf failed to converge");return S>1&&(S=1),S},inv:function(n,r,i){var s=1e-4,a=50;if(i<2||r<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var l,c=o(n,r,i),u=e.tukey.cdf(c,r,i)-n;l=u>0?t.max(0,c-1):c+1;for(var f,d=e.tukey.cdf(l,r,i)-n,h=1;h<a;h++)if(f=l-d*(l-c)/(d-u),u=d,c=l,f<0&&(f=0,d=-n),d=e.tukey.cdf(f,r,i)-n,l=f,t.abs(l-c)<s)return f;throw new Error("tukey.inv failed to converge")}})}(e,Math),function(e,t){var n=Array.prototype.push,r=e.utils.isArray;function i(t){return r(t)||t instanceof e}e.extend({add:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e+n[t][r]}))):e.map(t,(function(e){return e+n}))},subtract:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e-n[t][r]||0}))):e.map(t,(function(e){return e-n}))},divide:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.multiply(t,e.inv(n))):e.map(t,(function(e){return e/n}))},multiply:function(t,n){var r,o,s,a,l,c,u,f;if(void 0===t.length&&void 0===n.length)return t*n;if(l=t.length,c=t[0].length,u=e.zeros(l,s=i(n)?n[0].length:c),f=0,i(n)){for(;f<s;f++)for(r=0;r<l;r++){for(a=0,o=0;o<c;o++)a+=t[r][o]*n[o][f];u[r][f]=a}return 1===l&&1===f?u[0][0]:u}return e.map(t,(function(e){return e*n}))},outer:function(t,n){return e.multiply(t.map((function(e){return[e]})),[n])},dot:function(t,n){i(t[0])||(t=[t]),i(n[0])||(n=[n]);for(var r,o,s=1===t[0].length&&1!==t.length?e.transpose(t):t,a=1===n[0].length&&1!==n.length?e.transpose(n):n,l=[],c=0,u=s.length,f=s[0].length;c<u;c++){for(l[c]=[],r=0,o=0;o<f;o++)r+=s[c][o]*a[c][o];l[c]=r}return 1===l.length?l[0]:l},pow:function(n,r){return e.map(n,(function(e){return t.pow(e,r)}))},exp:function(n){return e.map(n,(function(e){return t.exp(e)}))},log:function(n){return e.map(n,(function(e){return t.log(e)}))},abs:function(n){return e.map(n,(function(e){return t.abs(e)}))},norm:function(e,n){var r=0,o=0;for(isNaN(n)&&(n=2),i(e[0])&&(e=e[0]);o<e.length;o++)r+=t.pow(t.abs(e[o]),n);return t.pow(r,1/n)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){var r,i=[];for(r=0;r<e.length;r++)i.push(e[r].slice());for(r=0;r<i.length;r++)n.apply(i[r],t[r]);return i},inv:function(t){for(var n,r=t.length,i=t[0].length,o=e.identity(r,i),s=e.gauss_jordan(t,o),a=[],l=0;l<r;l++)for(a[l]=[],n=i;n<s[0].length;n++)a[l][n-i]=s[l][n];return a},det:function e(t){if(2===t.length)return t[0][0]*t[1][1]-t[0][1]*t[1][0];for(var n=0,r=0;r<t.length;r++){for(var i=[],o=1;o<t.length;o++){i[o-1]=[];for(var s=0;s<t.length;s++)s<r?i[o-1][s]=t[o][s]:s>r&&(i[o-1][s-1]=t[o][s])}var a=r%2?-1:1;n+=e(i)*t[0][r]*a}return n},gauss_elimination:function(n,r){var i,o,s,a,l=0,c=0,u=n.length,f=n[0].length,d=1,h=0,p=[];for(i=(n=e.aug(n,r))[0].length,l=0;l<u;l++){for(o=n[l][l],c=l,a=l+1;a<f;a++)o<t.abs(n[a][l])&&(o=n[a][l],c=a);if(c!=l)for(a=0;a<i;a++)s=n[l][a],n[l][a]=n[c][a],n[c][a]=s;for(c=l+1;c<u;c++)for(d=n[c][l]/n[l][l],a=l;a<i;a++)n[c][a]=n[c][a]-d*n[l][a]}for(l=u-1;l>=0;l--){for(h=0,c=l+1;c<=u-1;c++)h+=p[c]*n[l][c];p[l]=(n[l][i-1]-h)/n[l][l]}return p},gauss_jordan:function(n,r){var i,o,s,a=e.aug(n,r),l=a.length,c=a[0].length,u=0;for(o=0;o<l;o++){var f=o;for(s=o+1;s<l;s++)t.abs(a[s][o])>t.abs(a[f][o])&&(f=s);var d=a[o];for(a[o]=a[f],a[f]=d,s=o+1;s<l;s++)for(u=a[s][o]/a[o][o],i=o;i<c;i++)a[s][i]-=a[o][i]*u}for(o=l-1;o>=0;o--){for(u=a[o][o],s=0;s<o;s++)for(i=c-1;i>o-1;i--)a[s][i]-=a[o][i]*a[s][o]/u;for(a[o][o]/=u,i=l;i<c;i++)a[o][i]/=u}return a},triaUpSolve:function(t,n){var r,i=t[0].length,o=e.zeros(1,i)[0],s=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),s=!0),e.arange(i-1,-1,-1).forEach((function(s){r=e.arange(s+1,i).map((function(e){return o[e]*t[s][e]})),o[s]=(n[s]-e.sum(r))/t[s][s]})),s?o.map((function(e){return[e]})):o},triaLowSolve:function(t,n){var r,i=t[0].length,o=e.zeros(1,i)[0],s=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),s=!0),e.arange(i).forEach((function(i){r=e.arange(i).map((function(e){return t[i][e]*o[e]})),o[i]=(n[i]-e.sum(r))/t[i][i]})),s?o.map((function(e){return[e]})):o},lu:function(t){var n,r=t.length,i=e.identity(r),o=e.zeros(t.length,t[0].length);return e.arange(r).forEach((function(e){o[0][e]=t[0][e]})),e.arange(1,r).forEach((function(s){e.arange(s).forEach((function(r){n=e.arange(r).map((function(e){return i[s][e]*o[e][r]})),i[s][r]=(t[s][r]-e.sum(n))/o[r][r]})),e.arange(s,r).forEach((function(r){n=e.arange(s).map((function(e){return i[s][e]*o[e][r]})),o[s][r]=t[n.length][r]-e.sum(n)}))})),[i,o]},cholesky:function(n){var r,i=n.length,o=e.zeros(n.length,n[0].length);return e.arange(i).forEach((function(s){r=e.arange(s).map((function(e){return t.pow(o[s][e],2)})),o[s][s]=t.sqrt(n[s][s]-e.sum(r)),e.arange(s+1,i).forEach((function(t){r=e.arange(s).map((function(e){return o[s][e]*o[t][e]})),o[t][s]=(n[s][t]-e.sum(r))/o[s][s]}))})),o},gauss_jacobi:function(n,r,i,o){for(var s,a,l,c,u=0,f=0,d=n.length,h=[],p=[],m=[];u<d;u++)for(h[u]=[],p[u]=[],m[u]=[],f=0;f<d;f++)u>f?(h[u][f]=n[u][f],p[u][f]=m[u][f]=0):u<f?(p[u][f]=n[u][f],h[u][f]=m[u][f]=0):(m[u][f]=n[u][f],h[u][f]=p[u][f]=0);for(l=e.multiply(e.multiply(e.inv(m),e.add(h,p)),-1),a=e.multiply(e.inv(m),r),s=i,c=e.add(e.multiply(l,i),a),u=2;t.abs(e.norm(e.subtract(c,s)))>o;)s=c,c=e.add(e.multiply(l,s),a),u++;return c},gauss_seidel:function(n,r,i,o){for(var s,a,l,c,u,f=0,d=n.length,h=[],p=[],m=[];f<d;f++)for(h[f]=[],p[f]=[],m[f]=[],s=0;s<d;s++)f>s?(h[f][s]=n[f][s],p[f][s]=m[f][s]=0):f<s?(p[f][s]=n[f][s],h[f][s]=m[f][s]=0):(m[f][s]=n[f][s],h[f][s]=p[f][s]=0);for(c=e.multiply(e.multiply(e.inv(e.add(m,h)),p),-1),l=e.multiply(e.inv(e.add(m,h)),r),a=i,u=e.add(e.multiply(c,i),l),f=2;t.abs(e.norm(e.subtract(u,a)))>o;)a=u,u=e.add(e.multiply(c,a),l),f+=1;return u},SOR:function(n,r,i,o,s){for(var a,l,c,u,f,d=0,h=n.length,p=[],m=[],g=[];d<h;d++)for(p[d]=[],m[d]=[],g[d]=[],a=0;a<h;a++)d>a?(p[d][a]=n[d][a],m[d][a]=g[d][a]=0):d<a?(m[d][a]=n[d][a],p[d][a]=g[d][a]=0):(g[d][a]=n[d][a],p[d][a]=m[d][a]=0);for(u=e.multiply(e.inv(e.add(g,e.multiply(p,s))),e.subtract(e.multiply(g,1-s),e.multiply(m,s))),c=e.multiply(e.multiply(e.inv(e.add(g,e.multiply(p,s))),r),s),l=i,f=e.add(e.multiply(u,i),c),d=2;t.abs(e.norm(e.subtract(f,l)))>o;)l=f,f=e.add(e.multiply(u,l),c),d++;return f},householder:function(n){for(var r,i,o,s,a=n.length,l=n[0].length,c=0,u=[],f=[];c<a-1;c++){for(r=0,s=c+1;s<l;s++)r+=n[s][c]*n[s][c];for(r=(n[c+1][c]>0?-1:1)*t.sqrt(r),i=t.sqrt((r*r-n[c+1][c]*r)/2),(u=e.zeros(a,1))[c+1][0]=(n[c+1][c]-r)/(2*i),o=c+2;o<a;o++)u[o][0]=n[o][c]/(2*i);f=e.subtract(e.identity(a,l),e.multiply(e.multiply(u,e.transpose(u)),2)),n=e.multiply(f,e.multiply(n,f))}return n},QR:function(){var n=e.sum,r=e.arange;function i(i){var o,s,a,l=i.length,c=i[0].length,u=e.zeros(c,c);for(i=e.copy(i),s=0;s<c;s++){for(u[s][s]=t.sqrt(n(r(l).map((function(e){return i[e][s]*i[e][s]})))),o=0;o<l;o++)i[o][s]=i[o][s]/u[s][s];for(a=s+1;a<c;a++)for(u[s][a]=n(r(l).map((function(e){return i[e][s]*i[e][a]}))),o=0;o<l;o++)i[o][a]=i[o][a]-i[o][s]*u[s][a]}return[i,u]}return i}(),lstsq:function(){function t(t){var n=(t=e.copy(t)).length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach((function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach((function(i){var o=e.multiply(t[i][n],-1),s=e.slice(t,{row:i}),a=e.multiply(e.slice(t,{row:n}),o);e.sliceAssign(t,{row:i},e.add(s,a));var l=e.slice(r,{row:i}),c=e.multiply(e.slice(r,{row:n}),o);e.sliceAssign(r,{row:i},e.add(l,c))}))})),r}function n(n,r){var i=!1;void 0===r[0].length&&(r=r.map((function(e){return[e]})),i=!0);var o=e.QR(n),s=o[0],a=o[1],l=n[0].length,c=e.slice(s,{col:{end:l}}),u=t(e.slice(a,{row:{end:l}})),f=e.transpose(c);void 0===f[0].length&&(f=[f]);var d=e.multiply(e.multiply(u,f),r);return void 0===d.length&&(d=[[d]]),i?d.map((function(e){return e[0]})):d}return n}(),jacobi:function(n){for(var r,i,o,s,a,l,c,u=1,f=n.length,d=e.identity(f,f),h=[];1===u;){for(a=n[0][1],o=0,s=1,r=0;r<f;r++)for(i=0;i<f;i++)r!=i&&a<t.abs(n[r][i])&&(a=t.abs(n[r][i]),o=r,s=i);for(l=n[o][o]===n[s][s]?n[o][s]>0?t.PI/4:-t.PI/4:t.atan(2*n[o][s]/(n[o][o]-n[s][s]))/2,(c=e.identity(f,f))[o][o]=t.cos(l),c[o][s]=-t.sin(l),c[s][o]=t.sin(l),c[s][s]=t.cos(l),d=e.multiply(d,c),n=e.multiply(e.multiply(e.inv(c),n),c),u=0,r=1;r<f;r++)for(i=1;i<f;i++)r!=i&&t.abs(n[r][i])>.001&&(u=1)}for(r=0;r<f;r++)h.push(n[r][r]);return[d,h]},rungekutta:function(e,t,n,r,i,o){var s,a,l;if(2===o)for(;r<=n;)i+=((s=t*e(r,i))+(a=t*e(r+t,i+s)))/2,r+=t;if(4===o)for(;r<=n;)i+=((s=t*e(r,i))+2*(a=t*e(r+t/2,i+s/2))+2*(l=t*e(r+t/2,i+a/2))+t*e(r+t,i+l))/6,r+=t;return i},romberg:function(e,n,r,i){for(var o,s,a,l,c,u=0,f=(r-n)/2,d=[],h=[],p=[];u<i/2;){for(c=e(n),a=n,l=0;a<=r;a+=f,l++)d[l]=a;for(o=d.length,a=1;a<o-1;a++)c+=(a%2!=0?4:2)*e(d[a]);c=f/3*(c+e(r)),p[u]=c,f/=2,u++}for(s=p.length,o=1;1!==s;){for(a=0;a<s-1;a++)h[a]=(t.pow(4,o)*p[a+1]-p[a])/(t.pow(4,o)-1);s=h.length,p=h,h=[],o++}return p},richardson:function(e,n,r,i){function o(e,t){for(var n,r=0,i=e.length;r<i;r++)e[r]===t&&(n=r);return n}for(var s,a,l,c,u,f=t.abs(r-e[o(e,r)+1]),d=0,h=[],p=[];i>=f;)s=o(e,r+i),a=o(e,r),h[d]=(n[s]-2*n[a]+n[2*a-s])/(i*i),i/=2,d++;for(c=h.length,l=1;1!=c;){for(u=0;u<c-1;u++)p[u]=(t.pow(4,l)*h[u+1]-h[u])/(t.pow(4,l)-1);c=p.length,h=p,p=[],l++}return h},simpson:function(e,t,n,r){for(var i,o=(n-t)/r,s=e(t),a=[],l=t,c=0,u=1;l<=n;l+=o,c++)a[c]=l;for(i=a.length;u<i-1;u++)s+=(u%2!=0?4:2)*e(a[u]);return o/3*(s+e(n))},hermite:function(e,t,n,r){for(var i,o=e.length,s=0,a=0,l=[],c=[],u=[],f=[];a<o;a++){for(l[a]=1,i=0;i<o;i++)a!=i&&(l[a]*=(r-e[i])/(e[a]-e[i]));for(c[a]=0,i=0;i<o;i++)a!=i&&(c[a]+=1/(e[a]-e[i]));u[a]=(1-2*(r-e[a])*c[a])*(l[a]*l[a]),f[a]=(r-e[a])*(l[a]*l[a]),s+=u[a]*t[a]+f[a]*n[a]}return s},lagrange:function(e,t,n){for(var r,i,o=0,s=0,a=e.length;s<a;s++){for(i=t[s],r=0;r<a;r++)s!=r&&(i*=(n-e[r])/(e[s]-e[r]));o+=i}return o},cubic_spline:function(t,n,r){for(var i,o=t.length,s=0,a=[],l=[],c=[],u=[],f=[],d=[],h=[];s<o-1;s++)f[s]=t[s+1]-t[s];for(c[0]=0,s=1;s<o-1;s++)c[s]=3/f[s]*(n[s+1]-n[s])-3/f[s-1]*(n[s]-n[s-1]);for(s=1;s<o-1;s++)a[s]=[],l[s]=[],a[s][s-1]=f[s-1],a[s][s]=2*(f[s-1]+f[s]),a[s][s+1]=f[s],l[s][0]=c[s];for(u=e.multiply(e.inv(a),l),i=0;i<o-1;i++)d[i]=(n[i+1]-n[i])/f[i]-f[i]*(u[i+1][0]+2*u[i][0])/3,h[i]=(u[i+1][0]-u[i][0])/(3*f[i]);for(i=0;i<o&&!(t[i]>r);i++);return n[i-=1]+(r-t[i])*d[i]+e.sq(r-t[i])*u[i]+(r-t[i])*e.sq(r-t[i])*h[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){var n,r,i=t.length,o=t[0].length,s=0,a=[],l=[],c=[],u=[],f=[],d=[],h=[],p=[],m=[],g=[];for(s=0;s<i;s++)a[s]=e.sum(t[s])/o;for(s=0;s<o;s++)for(h[s]=[],n=0;n<i;n++)h[s][n]=t[n][s]-a[n];for(h=e.transpose(h),s=0;s<i;s++)for(p[s]=[],n=0;n<i;n++)p[s][n]=e.dot([h[s]],[h[n]])/(o-1);for(m=(c=e.jacobi(p))[0],l=c[1],g=e.transpose(m),s=0;s<l.length;s++)for(n=s;n<l.length;n++)l[s]<l[n]&&(r=l[s],l[s]=l[n],l[n]=r,u=g[s],g[s]=g[n],g[n]=u);for(d=e.transpose(h),s=0;s<i;s++)for(f[s]=[],n=0;n<d.length;n++)f[s][n]=e.dot([g[s]],[d[n]]);return[t,l,g,f]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var i=this;return r?(setTimeout((function(){r.call(i,e.fn[t].call(i,n))}),15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(e,Math),function(e,t){var n=[].slice,r=e.utils.isNumber,i=e.utils.isArray;function o(e,n,r,i){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var o=(e*n+r*i)/(n+i);return(e-r)/t.sqrt(o*(1-o)*(1/n+1/i))}e.extend({zscore:function(){var t=n.call(arguments);return r(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var r,o=n.call(arguments);return i(o[1])?(r=e.zscore(o[0],o[1],o[3]),1===o[2]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):o.length>2?(r=e.zscore(o[0],o[1],o[2]),1===o[3]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):(r=o[0],1===o[1]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,i){var o=t.abs(this.zscore(n,i));return 1===r?e.normal.cdf(-o,0,1):2*e.normal.cdf(-o,0,1)}}),e.extend({tscore:function(){var r=n.call(arguments);return 4===r.length?(r[0]-r[1])/(r[2]/t.sqrt(r[3])):(r[0]-e.mean(r[1]))/(e.stdev(r[1],!0)/t.sqrt(r[1].length))},ttest:function(){var i,o=n.call(arguments);return 5===o.length?(i=t.abs(e.tscore(o[0],o[1],o[2],o[3])),1===o[4]?e.studentt.cdf(-i,o[3]-1):2*e.studentt.cdf(-i,o[3]-1)):r(o[1])?(i=t.abs(o[0]),1==o[2]?e.studentt.cdf(-i,o[1]-1):2*e.studentt.cdf(-i,o[1]-1)):(i=t.abs(e.tscore(o[0],o[1])),1==o[2]?e.studentt.cdf(-i,o[1].length-1):2*e.studentt.cdf(-i,o[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var r,i,o,s,a,l,c,u,f=n.call(arguments);if(1===f.length){for(a=new Array(f[0].length),c=0;c<f[0].length;c++)a[c]=f[0][c];f=a}for(i=new Array,c=0;c<f.length;c++)i=i.concat(f[c]);for(o=e.mean(i),r=0,c=0;c<f.length;c++)r+=f[c].length*t.pow(e.mean(f[c])-o,2);for(r/=f.length-1,l=0,c=0;c<f.length;c++)for(s=e.mean(f[c]),u=0;u<f[c].length;u++)l+=t.pow(f[c][u]-s,2);return r/(l/=i.length-f.length)},anovaftest:function(){var t,i,o,s,a=n.call(arguments);if(r(a[0]))return 1-e.centralF.cdf(a[0],a[1],a[2]);var l=e.anovafscore(a);for(t=a.length-1,o=0,s=0;s<a.length;s++)o+=a[s].length;return i=o-t-1,1-e.centralF.cdf(l,t,i)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t,n=0;for(t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var i,o,s,a,l,c=n.call(arguments);return r(c[0])?(i=c[0],o=c[1],s=c[2],a=c[3],l=c[4]):(i=e.mean(c[0]),o=e.mean(c[1]),s=c[0].length,a=c[1].length,l=c[2]),t.abs(i-o)/(l*t.sqrt((1/s+1/a)/2))},qtest:function(){var t,r=n.call(arguments);3===r.length?(t=r[0],r=r.slice(1)):7===r.length?(t=e.qscore(r[0],r[1],r[2],r[3],r[4]),r=r.slice(5)):(t=e.qscore(r[0],r[1],r[2]),r=r.slice(3));var i=r[0],o=r[1];return 1-e.tukey.cdf(t,o,i-o)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map((function(t){return e.mean(t)})),i=t.reduce((function(e,t){return e+t.length}),0),o=[],s=0;s<t.length;++s)for(var a=s+1;a<t.length;++a){var l=e.qtest(r[s],r[a],t[s].length,t[a].length,n,i,t.length);o.push([[s,a],l])}return o}}),e.extend({normalci:function(){var r,i=n.call(arguments),o=new Array(2);return r=4===i.length?t.abs(e.normal.inv(i[1]/2,0,1)*i[2]/t.sqrt(i[3])):t.abs(e.normal.inv(i[1]/2,0,1)*e.stdev(i[2])/t.sqrt(i[2].length)),o[0]=i[0]-r,o[1]=i[0]+r,o},tci:function(){var r,i=n.call(arguments),o=new Array(2);return r=4===i.length?t.abs(e.studentt.inv(i[1]/2,i[3]-1)*i[2]/t.sqrt(i[3])):t.abs(e.studentt.inv(i[1]/2,i[2].length-1)*e.stdev(i[2],!0)/t.sqrt(i[2].length)),o[0]=i[0]-r,o[1]=i[0]+r,o},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,n,r,i){var s=o(t,n,r,i);return e.ztest(s,1)},twoSidedDifferenceOfProportions:function(t,n,r,i){var s=o(t,n,r,i);return e.ztest(s,2)}})}(e,Math),e.models=function(){function t(t){var r=t[0].length,i=e.arange(r).map((function(i){var o=e.arange(r).filter((function(e){return e!==i}));return n(e.col(t,i).map((function(e){return e[0]})),e.col(t,o))}));return i}function n(t,n){var r=t.length,i=n[0].length-1,o=r-i-1,s=e.lstsq(n,t),a=e.multiply(n,s.map((function(e){return[e]}))).map((function(e){return e[0]})),l=e.subtract(t,a),c=e.mean(t),u=e.sum(a.map((function(e){return Math.pow(e-c,2)}))),f=e.sum(t.map((function(e,t){return Math.pow(e-a[t],2)}))),d=u+f;return{exog:n,endog:t,nobs:r,df_model:i,df_resid:o,coef:s,predict:a,resid:l,ybar:c,SST:d,SSE:u,SSR:f,R2:u/d}}function r(n){var r=t(n.exog),i=Math.sqrt(n.SSR/n.df_resid),o=r.map((function(e){var t=e.SST,n=e.R2;return i/Math.sqrt(t*(1-n))})),s=n.coef.map((function(e,t){return(e-0)/o[t]})),a=s.map((function(t){var r=e.studentt.cdf(t,n.df_resid);return 2*(r>.5?1-r:r)})),l=e.studentt.inv(.975,n.df_resid),c=n.coef.map((function(e,t){var n=l*o[t];return[e-n,e+n]}));return{se:o,t:s,p:a,sigmaHat:i,interval95:c}}function i(t){var n=t.R2/t.df_model/((1-t.R2)/t.df_resid),r=function(t,n,r){return e.beta.cdf(t/(r/n+t),n/2,r/2)};return{F_statistic:n,pvalue:1-r(n,t.df_model,t.df_resid)}}function o(e,t){var o=n(e,t),s=r(o),a=i(o),l=1-(1-o.R2)*((o.nobs-1)/o.df_resid);return o.t=s,o.f=a,o.adjust_R2=l,o}return{ols:o}}(),e.extend({buildxmatrix:function(){for(var t=new Array(arguments.length),n=0;n<arguments.length;n++){var r=[1];t[n]=r.concat(arguments[n])}return e(t)},builddxmatrix:function(){for(var t=new Array(arguments[0].length),n=0;n<arguments[0].length;n++){var r=[1];t[n]=r.concat(arguments[0][n])}return e(t)},buildjxmatrix:function(t){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return e.builddxmatrix(n)},buildymatrix:function(t){return e(t).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(t,n){var r,i,o,s,a;if(t.cols()==n.rows()){if(n.rows()>1){for(s=[],r=0;r<t.rows();r++)for(s[r]=[],i=0;i<n.cols();i++){for(a=0,o=0;o<t.cols();o++)a+=t.toArray()[r][o]*n.toArray()[o][i];s[r][i]=a}return e(s)}for(s=[],r=0;r<t.rows();r++)for(s[r]=[],i=0;i<n.cols();i++){for(a=0,o=0;o<t.cols();o++)a+=t.toArray()[r][o]*n.toArray()[i];s[r][i]=a}return e(s)}},regress:function(t,n){var r=e.xtranspxinv(t),i=t.transpose(),o=e.matrixmult(e(r),i);return e.matrixmult(o,n)},regresst:function(t,n,r){var i=e.regress(t,n),o={anova:{}},s=e.jMatYBar(t,i);o.yBar=s;var a=n.mean();o.anova.residuals=e.residuals(n,s),o.anova.ssr=e.ssr(s,a),o.anova.msr=o.anova.ssr/(t[0].length-1),o.anova.sse=e.sse(n,s),o.anova.mse=o.anova.sse/(n.length-(t[0].length-1)-1),o.anova.sst=e.sst(n,a),o.anova.mst=o.anova.sst/(n.length-1),o.anova.r2=1-o.anova.sse/o.anova.sst,o.anova.r2<0&&(o.anova.r2=0),o.anova.fratio=o.anova.msr/o.anova.mse,o.anova.pvalue=e.anovaftest(o.anova.fratio,t[0].length-1,n.length-(t[0].length-1)-1),o.anova.rmse=Math.sqrt(o.anova.mse),o.anova.r2adj=1-o.anova.mse/o.anova.mst,o.anova.r2adj<0&&(o.anova.r2adj=0),o.stats=new Array(t[0].length);for(var l,c,u,f=e.xtranspxinv(t),d=0;d<i.length;d++)l=Math.sqrt(o.anova.mse*Math.abs(f[d][d])),c=Math.abs(i[d]/l),u=e.ttest(c,n.length-t[0].length-1,r),o.stats[d]=[i[d],l,c,u];return o.regress=i,o},xtranspx:function(t){return e.matrixmult(t.transpose(),t)},xtranspxinv:function(t){var n=e.matrixmult(t.transpose(),t);return e.inv(n)},jMatYBar:function(t,n){var r=e.matrixmult(t,n);return new e(r)},residuals:function(t,n){return e.matrixsubtract(t,n)},ssr:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},sse:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},sst:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},matrixsubtract:function(t,n){for(var r=new Array(t.length),i=0;i<t.length;i++){r[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)r[i][o]=t[i][o]-n[i][o]}return e(r)}}),e.jStat=e,e}();var A,S=$(M.exports),R={};A=function(e){e.version="1.0.2";var t=Math;function n(e,t){for(var n=0,r=0;n<e.length;++n)r=t*r+e[n];return r}function r(e,t,n,r,i){if(0===t)return n;if(1===t)return r;for(var o=2/e,s=r,a=1;a<t;++a)s=r*a*o+i*n,n=r,r=s;return s}function i(e,t,n,i,o){return function(n,s){if(i){if(0===n)return 1==i?-1/0:1/0;if(n<0)return NaN}return 0===s?e(n):1===s?t(n):s<0?NaN:r(n,s|=0,e(n),t(n),o)}}var o,s,a,l,c,u,f,d,h,p,m,g,y,_=function(){var e=.636619772,i=[57568490574,-13362590354,651619640.7,-11214424.18,77392.33017,-184.9052456].reverse(),o=[57568490411,1029532985,9494680.718,59272.64853,267.8532712,1].reverse(),s=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),a=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34935152e-8].reverse();function l(r){var l=0,c=0,u=0,f=r*r;if(r<8)l=(c=n(i,f))/(u=n(o,f));else{var d=r-.785398164;c=n(s,f=64/f),u=n(a,f),l=t.sqrt(e/r)*(t.cos(d)*c-t.sin(d)*u*8/r)}return l}var c=[72362614232,-7895059235,242396853.1,-2972611.439,15704.4826,-30.16036606].reverse(),u=[144725228442,2300535178,18583304.74,99447.43394,376.9991397,1].reverse(),f=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),d=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse();function h(r){var i=0,o=0,s=0,a=r*r,l=t.abs(r)-2.356194491;return Math.abs(r)<8?i=(o=r*n(c,a))/(s=n(u,a)):(o=n(f,a=64/a),s=n(d,a),i=t.sqrt(e/t.abs(r))*(t.cos(l)*o-t.sin(l)*s*8/t.abs(r)),r<0&&(i=-i)),i}return function e(n,i){if(i=Math.round(i),!isFinite(n))return isNaN(n)?n:0;if(i<0)return(i%2?-1:1)*e(n,-i);if(n<0)return(i%2?-1:1)*e(-n,i);if(0===i)return l(n);if(1===i)return h(n);if(0===n)return 0;var o=0;if(n>i)o=r(n,i,l(n),h(n),-1);else{for(var s=!1,a=0,c=0,u=1,f=0,d=2/n,p=2*t.floor((i+t.floor(t.sqrt(40*i)))/2);p>0;p--)f=p*d*u-a,a=u,u=f,t.abs(u)>1e10&&(u*=1e-10,a*=1e-10,o*=1e-10,c*=1e-10),s&&(c+=u),s=!s,p==i&&(o=a);o/=c=2*c-u}return o}}(),v=(o=.636619772,s=[-2957821389,7062834065,-512359803.6,10879881.29,-86327.92757,228.4622733].reverse(),a=[40076544269,745249964.8,7189466.438,47447.2647,226.1030244,1].reverse(),l=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),c=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34945152e-8].reverse(),u=[-4900604943e3,127527439e4,-51534381390,734926455.1,-4237922.726,8511.937935].reverse(),f=[249958057e5,424441966400,3733650367,22459040.02,102042.605,354.9632885,1].reverse(),d=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),h=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse(),i((function(e){var r=0,i=0,u=0,f=e*e,d=e-.785398164;return e<8?r=(i=n(s,f))/(u=n(a,f))+o*_(e,0)*t.log(e):(i=n(l,f=64/f),u=n(c,f),r=t.sqrt(o/e)*(t.sin(d)*i+t.cos(d)*u*8/e)),r}),(function(e){var r=0,i=0,s=0,a=e*e,l=e-2.356194491;return e<8?r=(i=e*n(u,a))/(s=n(f,a))+o*(_(e,1)*t.log(e)-1/e):(i=n(d,a=64/a),s=n(h,a),r=t.sqrt(o/e)*(t.sin(l)*i+t.cos(l)*s*8/e)),r}),0,1,-1)),b=(p=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),m=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse(),g=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),y=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse(),function e(r,i){if(0===(i=Math.round(i)))return function(e){return e<=3.75?n(p,e*e/14.0625):t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(m,3.75/t.abs(e))}(r);if(1===i)return function(e){return e<3.75?e*n(g,e*e/14.0625):(e<0?-1:1)*t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(y,3.75/t.abs(e))}(r);if(i<0)return NaN;if(0===t.abs(r))return 0;if(r==1/0)return 1/0;var o,s=0,a=2/t.abs(r),l=0,c=1,u=0;for(o=2*t.round((i+t.round(t.sqrt(40*i)))/2);o>0;o--)u=o*a*c+l,l=c,c=u,t.abs(c)>1e10&&(c*=1e-10,l*=1e-10,s*=1e-10),o==i&&(s=l);return s*=e(r,0)/c,r<0&&i%2?-s:s}),w=function(){var e=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),r=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse(),o=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),s=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();return i((function(i){return i<=2?-t.log(i/2)*b(i,0)+n(e,i*i/4):t.exp(-i)/t.sqrt(i)*n(r,2/i)}),(function(e){return e<=2?t.log(e/2)*b(e,1)+1/e*n(o,e*e/4):t.exp(-e)/t.sqrt(e)*n(s,2/e)}),0,2,1)}();e.besselj=_,e.bessely=v,e.besseli=b,e.besselk=w},"undefined"==typeof DO_NOT_EXPORT_BESSEL?A(R):A({});var I=$(R);const N=new Error("#NULL!"),O=new Error("#DIV/0!"),k=new Error("#VALUE!"),j=new Error("#REF!"),C=new Error("#NAME?"),T=new Error("#NUM!"),D=new Error("#N/A"),P=new Error("#ERROR!"),L=new Error("#GETTING_DATA");var F=Object.freeze({__proto__:null,data:L,div0:O,error:P,na:D,name:C,nil:N,num:T,ref:j,value:k});const q=[">",">=","<","<=","=","<>"],U="operator",z="literal",V=[U,z],B=U,G=z;function H(e,t){if(-1===V.indexOf(t))throw new Error("Unsupported token type: "+t);return{value:e,type:t}}function Y(e){let t="";const n=[];for(let r=0;r<e.length;r++){const i=e[r];0===r&&q.indexOf(i)>=0?n.push(H(i,B)):t+=i}return t.length>0&&n.push(H(function(e){return"string"!=typeof e||/^\d+(\.\d+)?$/.test(e)&&(e=-1===e.indexOf(".")?parseInt(e,10):parseFloat(e)),e}(t),G)),n.length>0&&n[0].type!==B&&n.unshift(H("=",B)),n}function W(e){return Y(function(e){const t=e.length,n=[];let r=0,i="",o="";for(;r<t;){const t=e.charAt(r);switch(t){case">":case"<":case"=":o+=t,i.length>0&&(n.push(i),i="");break;default:o.length>0&&(n.push(o),o=""),i+=t}r++}return i.length>0&&n.push(i),o.length>0&&n.push(o),n}(e))}const X=function(e){const t=[];let n;for(let r=0;r<e.length;r++){const i=e[r];switch(i.type){case B:n=i.value;break;case G:t.push(i.value)}}return function(e,t){let n=!1;switch(t){case">":n=e[0]>e[1];break;case">=":n=e[0]>=e[1];break;case"<":n=e[0]<e[1];break;case"<=":n=e[0]<=e[1];break;case"=":n=e[0]==e[1];break;case"<>":n=e[0]!=e[1]}return n}(t,n)};function K(e){const t=[];return Z(e,(e=>{t.push(e)})),t}function Z(e,t){let n=-1;const r=e.length;for(;++n<r&&!1!==t(e[n],n,e););return e}function Q(e){let t,n=e.length;for(;n--;)if(t=e[n],"number"!=typeof t)if(!0!==t)if(!1!==t){if("string"==typeof t){const r=he(t);e[n]=r instanceof Error?0:r}}else e[n]=0;else e[n]=1;return e}function J(e,t){if(!e)return k;e.every((e=>Array.isArray(e)))&&0!==e.length||(e=[[...e]]),e.map(((t,n)=>{t.map(((t,r)=>{t||(e[n][r]=0)}))}));const n=e.reduce(((t,n,r)=>n.length>e[t].length?r:t),0),r=e[n].length;return e.map((e=>[...e,...Array(r-e.length).fill(t||0)]))}function ee(){let e;if(1===arguments.length){const t=arguments[0];e=function(e){return null!=e&&"number"==typeof e.length&&"string"!=typeof e}(t)?K.apply(null,arguments):[t]}else e=Array.from(arguments);for(;!ne(e);)e=te(e);return e}function te(e){return e&&e.reduce?e.reduce(((e,t)=>{const n=Array.isArray(e),r=Array.isArray(t);return n&&r?e.concat(t):n?(e.push(t),e):r?[e].concat(t):[e,t]})):[e]}function ne(e){if(!e)return!1;for(let t=0;t<e.length;++t)if(Array.isArray(e[t]))return!1;return!0}function re(e,t){return t=t||1,e&&"function"==typeof e.slice?e.slice(t):e}function ie(e){return e?e[0].map(((t,n)=>e.map((e=>e[n])))):k}function oe(e,t){let n=null;return Z(e,((e,r)=>{if(e[0]===t)return n=r,!1})),null==n?k:n}function se(){for(let e=0;e<arguments.length;e++)if(arguments[e]instanceof Error)return arguments[e]}function ae(){let e=arguments.length;for(;e--;)if(arguments[e]instanceof Error)return!0;return!1}function le(e){const t=1e14;return Math.round(e*t)/t}function ce(){return ee.apply(null,arguments).filter((e=>"number"==typeof e))}function ue(e){if("boolean"==typeof e)return e;if(e instanceof Error)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){const t=e.toUpperCase();if("TRUE"===t)return!0;if("FALSE"===t)return!1}return e instanceof Date&&!isNaN(e)||k}function fe(e){if(!isNaN(e)){if(e instanceof Date)return new Date(e);const t=parseFloat(e);return t<0||t>=2958466?T:function(e){e<60&&(e+=1);const t=Math.floor(e-25569),n=new Date(86400*t*1e3),r=e-Math.floor(e)+1e-7;let i=Math.floor(86400*r);const o=i%60;i-=o;const s=Math.floor(i/3600),a=Math.floor(i/60)%60;let l=n.getUTCDate(),c=n.getUTCMonth();return e>=60&&e<61&&(l=29,c=1),new Date(n.getUTCFullYear(),c,l,s,a,o)}(t)}return"string"!=typeof e||(e=/(\d{4})-(\d\d?)-(\d\d?)$/.test(e)?new Date(e+"T00:00:00.000"):new Date(e),isNaN(e))?k:e}function de(e){let t,n=e.length;for(;n--;){if(t=fe(e[n]),t===k)return t;e[n]=t}return e}function he(e){return e instanceof Error?e:null==e?0:("boolean"==typeof e&&(e=+e),isNaN(e)||""===e?k:parseFloat(e))}function pe(e){let t,n;if(!e||0===(t=e.length))return k;for(;t--;){if(e[t]instanceof Error)return e[t];if(n=he(e[t]),n instanceof Error)return n;e[t]=n}return e}function me(e){return e instanceof Error?e:null==e?"":e.toString()}function ge(){let e=arguments.length;for(;e--;)if("string"==typeof arguments[e])return!0;return!1}function ye(){const e=K(arguments),t=pe(ee(e.shift()));if(t instanceof Error)return t;const n=e,r=n.length/2;for(let e=0;e<r;e++)n[2*e]=ee(n[2*e]);let i=[];for(let e=0;e<t.length;e++){let o=!1;for(let t=0;t<r;t++){const r=n[2*t][e],i=n[2*t+1];let s=!1;if(void 0===i||"*"===i)s=!0;else{const e=W(i+""),t=[H(r,G)].concat(e);s=X(t)}if(!s){o=!1;break}o=!0}o&&i.push(t[e])}return i}function _e(e){return null!=e}const ve={};function be(e){return[k,j,O,T,C,N].indexOf(e)>=0||"number"==typeof e&&(isNaN(e)||!isFinite(e))}function we(e){return be(e)||e===D}function xe(e){return!0===e||!1===e}function Ee(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function $e(e){return"string"==typeof e}function Me(){const e=[];for(let t=0;t<arguments.length;++t){let n=!1;const r=arguments[t];for(let t=0;t<e.length&&(n=e[t]===r,!n);++t);n||e.push(r)}return e}function Ae(e,t,n,r){if(!t||!n)return D;r=!(0===r||!1===r);let i=D,o=!1;const s="number"==typeof e,a="string"==typeof e?e.toLowerCase():e;for(let l=0;l<t.length;l++){const c=t[l],u="string"==typeof c[0]?c[0].toLowerCase():c[0];if(u===a){i=n<c.length+1?c[n-1]:j;break}!o&&(s&&r&&u<=e||r&&"string"==typeof u&&u.localeCompare(e)<0)&&(i=n<c.length+1?c[n-1]:j),s&&u>e&&(o=!0)}return i}ve.TYPE=e=>{switch(e){case N:return 1;case O:return 2;case k:return 3;case j:return 4;case C:return 5;case T:return 6;case D:return 7;case L:return 8}return D};function Se(){const e=ee(arguments).filter(_e);if(0===e.length)return O;const t=se.apply(void 0,e);if(t)return t;const n=ce(e),r=n.length;let i,o=0,s=0;for(let e=0;e<r;e++)o+=n[e],s+=1;return i=o/s,isNaN(i)&&(i=T),i}function Re(){const e=ee(arguments).filter(_e);if(0===e.length)return O;const t=se.apply(void 0,e);if(t)return t;const n=e,r=n.length;let i,o=0,s=0;for(let e=0;e<r;e++){const t=n[e];"number"==typeof t&&(o+=t),!0===t&&o++,null!==t&&s++}return i=o/s,isNaN(i)&&(i=T),i}const Ie={DIST:function(e,t,n,r,i,o){return arguments.length<4?k:(i=void 0===i?0:i,o=void 0===o?1:o,ae(e=he(e),t=he(t),n=he(n),i=he(i),o=he(o))?k:(e=(e-i)/(o-i),r?S.beta.cdf(e,t,n):S.beta.pdf(e,t,n)))},INV:(e,t,n,r,i)=>(r=void 0===r?0:r,i=void 0===i?1:i,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i))?k:S.beta.inv(e,t,n)*(i-r)+r)},Ne={DIST:(e,t,n,r)=>ae(e=he(e),t=he(t),n=he(n),r=he(r))?k:r?S.binomial.cdf(e,t,n):S.binomial.pdf(e,t,n)};Ne.DIST.RANGE=(e,t,n,r)=>{if(r=void 0===r?n:r,ae(e=he(e),t=he(t),n=he(n),r=he(r)))return k;let i=0;for(let o=n;o<=r;o++)i+=pt(e,o)*Math.pow(t,o)*Math.pow(1-t,e-o);return i},Ne.INV=(e,t,n)=>{if(ae(e=he(e),t=he(t),n=he(n)))return k;let r=0;for(;r<=e;){if(S.binomial.cdf(r,e,t)>=n)return r;r++}};const Oe={DIST:(e,t,n)=>ae(e=he(e),t=he(t))?k:n?S.chisquare.cdf(e,t):S.chisquare.pdf(e,t)};Oe.DIST.RT=(e,t)=>!e|!t?D:e<1||t>Math.pow(10,10)?T:"number"!=typeof e||"number"!=typeof t?k:1-S.chisquare.cdf(e,t),Oe.INV=(e,t)=>ae(e=he(e),t=he(t))?k:S.chisquare.inv(e,t),Oe.INV.RT=(e,t)=>!e|!t?D:e<0||e>1||t<1||t>Math.pow(10,10)?T:"number"!=typeof e||"number"!=typeof t?k:S.chisquare.inv(1-e,t),Oe.TEST=function(e,t){if(2!==arguments.length)return D;if(!(e instanceof Array&&t instanceof Array))return k;if(e.length!==t.length)return k;if(e[0]&&t[0]&&e[0].length!==t[0].length)return k;const n=e.length;let r,i,o;for(i=0;i<n;i++)e[i]instanceof Array||(r=e[i],e[i]=[],e[i].push(r)),t[i]instanceof Array||(r=t[i],t[i]=[],t[i].push(r));const s=e[0].length,a=1===s?n-1:(n-1)*(s-1);let l=0;const c=Math.PI;for(i=0;i<n;i++)for(o=0;o<s;o++)l+=Math.pow(e[i][o]-t[i][o],2)/t[i][o];return Math.round(1e6*function(e,t){let n=Math.exp(-.5*e);t%2==1&&(n*=Math.sqrt(2*e/c));let r=t;for(;r>=2;)n=n*e/r,r-=2;let i=n,o=t;for(;i>1e-10*n;)o+=2,i=i*e/o,n+=i;return 1-n}(l,a))/1e6};const ke={};function je(){return ce(ee(arguments)).length}function Ce(){const e=ee(arguments);return e.length-Te(e)}function Te(){const e=ee(arguments);let t,n=0;for(let r=0;r<e.length;r++)t=e[r],null!=t&&""!==t||n++;return n}ke.NORM=(e,t,n)=>ae(e=he(e),t=he(t),n=he(n))?k:S.normalci(1,e,t,n)[1]-1,ke.T=(e,t,n)=>ae(e=he(e),t=he(t),n=he(n))?k:S.tci(1,e,t,n)[1]-1;const De={};De.P=(e,t)=>{if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;const n=S.mean(e),r=S.mean(t);let i=0;const o=e.length;for(let s=0;s<o;s++)i+=(e[s]-n)*(t[s]-r);return i/o},De.S=(e,t)=>ae(e=pe(ee(e)),t=pe(ee(t)))?k:S.covariance(e,t);const Pe={DIST:(e,t,n)=>ae(e=he(e),t=he(t))?k:n?S.exponential.cdf(e,t):S.exponential.pdf(e,t)},Le={};function Fe(e,t,n){if(ae(e=he(e),t=pe(ee(t)),n=pe(ee(n))))return k;const r=S.mean(n),i=S.mean(t),o=n.length;let s=0,a=0;for(let e=0;e<o;e++)s+=(n[e]-r)*(t[e]-i),a+=Math.pow(n[e]-r,2);const l=s/a;return i-l*r+l*e}function qe(e){return(e=he(e))instanceof Error?e:0===e||parseInt(e,10)===e&&e<0?T:S.gammafn(e)}function Ue(e){return(e=he(e))instanceof Error?e:S.gammaln(e)}Le.DIST=(e,t,n,r)=>ae(e=he(e),t=he(t),n=he(n))?k:r?S.centralF.cdf(e,t,n):S.centralF.pdf(e,t,n),Le.DIST.RT=function(e,t,n){return 3!==arguments.length?D:e<0||t<1||n<1?T:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?k:1-S.centralF.cdf(e,t,n)},Le.INV=(e,t,n)=>ae(e=he(e),t=he(t),n=he(n))?k:e<=0||e>1?T:S.centralF.inv(e,t,n),Le.INV.RT=function(e,t,n){return 3!==arguments.length?D:e<0||e>1||t<1||t>Math.pow(10,10)||n<1||n>Math.pow(10,10)?T:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?k:S.centralF.inv(1-e,t,n)},Le.TEST=(e,t)=>{if(!e||!t)return D;if(!(e instanceof Array&&t instanceof Array))return D;if(e.length<2||t.length<2)return O;const n=(e,t)=>{let n=0;for(let r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},r=xt(e)/e.length,i=xt(t)/t.length;return n(e,r)/(e.length-1)/(n(t,i)/(t.length-1))},qe.DIST=function(e,t,n,r){return 4!==arguments.length?D:e<0||t<=0||n<=0||"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?k:r?S.gamma.cdf(e,t,n,!0):S.gamma.pdf(e,t,n,!1)},qe.INV=function(e,t,n){return 3!==arguments.length?D:e<0||e>1||t<=0||n<=0?T:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?k:S.gamma.inv(e,t,n)},Ue.PRECISE=function(e){return 1!==arguments.length?D:e<=0?T:"number"!=typeof e?k:S.gammaln(e)};const ze={};function Ve(e,t){const n=se.apply(void 0,e);return n||(ae(t)?t:(e=ce(ee(e)),(t=he(t))<0||e.length<t?k:e.sort(((e,t)=>t-e))[t-1]))}function Be(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;const n=S.mean(e),r=S.mean(t),i=t.length;let o=0,s=0;for(let a=0;a<i;a++)o+=(t[a]-r)*(e[a]-n),s+=Math.pow(t[a]-r,2);const a=o/s;return[a,n-a*r]}ze.DIST=(e,t,n,r,i)=>{if(ae(e=he(e),t=he(t),n=he(n),r=he(r)))return k;function o(e,t,n,r){return pt(n,e)*pt(r-n,t-e)/pt(r,t)}return i?function(e,t,n,r){let i=0;for(let s=0;s<=e;s++)i+=o(s,t,n,r);return i}(e,t,n,r):o(e,t,n,r)};const Ge={};function He(){const e=ee(arguments),t=se.apply(void 0,e);if(t)return t;const n=ce(e);return 0===n.length?0:Math.max.apply(Math,n)}function Ye(){const e=ee(arguments),t=se.apply(void 0,e);if(t)return t;const n=Q(e);let r=S.median(n);return isNaN(r)&&(r=T),r}function We(){const e=ee(arguments),t=se.apply(void 0,e);if(t)return t;const n=ce(e);return 0===n.length?0:Math.min.apply(Math,n)}Ge.DIST=(e,t,n,r)=>ae(e=he(e),t=he(t),n=he(n))?k:r?S.lognormal.cdf(e,t,n):S.lognormal.pdf(e,t,n),Ge.INV=(e,t,n)=>ae(e=he(e),t=he(t),n=he(n))?k:S.lognormal.inv(e,t,n);const Xe={MULT:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=e.length,n={};let r,i=[],o=0;for(let s=0;s<t;s++)r=e[s],n[r]=n[r]?n[r]+1:1,n[r]>o&&(o=n[r],i=[]),n[r]===o&&(i[i.length]=r);return i},SNGL:function(){const e=pe(ee(arguments));return e instanceof Error?e:Xe.MULT(e).sort(((e,t)=>e-t))[0]}},Ke={DIST:(e,t,n,r)=>ae(e=he(e),t=he(t),n=he(n))?k:r?S.negbin.cdf(e,t,n):S.negbin.pdf(e,t,n)},Ze={};function Qe(e,t){if(ae(t=pe(ee(t)),e=pe(ee(e))))return k;const n=S.mean(e),r=S.mean(t),i=e.length;let o=0,s=0,a=0;for(let l=0;l<i;l++)o+=(e[l]-n)*(t[l]-r),s+=Math.pow(e[l]-n,2),a+=Math.pow(t[l]-r,2);return o/Math.sqrt(s*a)}Ze.DIST=(e,t,n,r)=>ae(e=he(e),t=he(t),n=he(n))?k:n<=0?T:r?S.normal.cdf(e,t,n):S.normal.pdf(e,t,n),Ze.INV=(e,t,n)=>ae(e=he(e),t=he(t),n=he(n))?k:S.normal.inv(e,t,n),Ze.S={},Ze.S.DIST=(e,t)=>(e=he(e))instanceof Error?k:t?S.normal.cdf(e,0,1):S.normal.pdf(e,0,1),Ze.S.INV=e=>(e=he(e))instanceof Error?k:S.normal.inv(e,0,1);const Je={EXC:(e,t)=>{if(ae(e=pe(ee(e)),t=he(t)))return k;e=e.sort(((e,t)=>e-t));const n=e.length;if(t<1/(n+1)||t>1-1/(n+1))return T;const r=t*(n+1)-1,i=Math.floor(r);return le(r===i?e[r]:e[i]+(r-i)*(e[i+1]-e[i]))},INC:(e,t)=>{if(ae(e=pe(ee(e)),t=he(t)))return k;e=e.sort(((e,t)=>e-t));const n=t*(e.length-1),r=Math.floor(n);return le(n===r?e[n]:e[r]+(n-r)*(e[r+1]-e[r]))}},et={};et.EXC=(e,t,n)=>{if(n=void 0===n?3:n,ae(e=pe(ee(e)),t=he(t),n=he(n)))return k;e=e.sort(((e,t)=>e-t));const r=Me.apply(null,e),i=e.length,o=r.length,s=Math.pow(10,n);let a=0,l=!1,c=0;for(;!l&&c<o;)t===r[c]?(a=(e.indexOf(r[c])+1)/(i+1),l=!0):t>=r[c]&&(t<r[c+1]||c===o-1)&&(a=(e.indexOf(r[c])+1+(t-r[c])/(r[c+1]-r[c]))/(i+1),l=!0),c++;return Math.floor(a*s)/s},et.INC=(e,t,n)=>{if(n=void 0===n?3:n,ae(e=pe(ee(e)),t=he(t),n=he(n)))return k;e=e.sort(((e,t)=>e-t));const r=Me.apply(null,e),i=e.length,o=r.length,s=Math.pow(10,n);let a=0,l=!1,c=0;for(;!l&&c<o;)t===r[c]?(a=e.indexOf(r[c])/(i-1),l=!0):t>=r[c]&&(t<r[c+1]||c===o-1)&&(a=(e.indexOf(r[c])+(t-r[c])/(r[c+1]-r[c]))/(i-1),l=!0),c++;return Math.floor(a*s)/s};const tt={};tt.DIST=(e,t,n)=>ae(e=he(e),t=he(t))?k:n?S.poisson.cdf(e,t):S.poisson.pdf(e,t);const nt={EXC:(e,t)=>{if(ae(e=pe(ee(e)),t=he(t)))return k;switch(t){case 1:return Je.EXC(e,.25);case 2:return Je.EXC(e,.5);case 3:return Je.EXC(e,.75);default:return T}},INC:(e,t)=>{if(ae(e=pe(ee(e)),t=he(t)))return k;switch(t){case 1:return Je.INC(e,.25);case 2:return Je.INC(e,.5);case 3:return Je.INC(e,.75);default:return T}}},rt={};function it(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=S.mean(e),n=e.length;let r=0;for(let i=0;i<n;i++)r+=Math.pow(e[i]-t,3);return n*r/((n-1)*(n-2)*Math.pow(S.stdev(e,!0),3))}function ot(e,t){return ae(e=pe(ee(e)),t=he(t))?e:e.sort(((e,t)=>e-t))[t-1]}rt.AVG=(e,t,n)=>{if(ae(e=he(e),t=pe(ee(t))))return k;const r=(n=n||!1)?(e,t)=>e-t:(e,t)=>t-e,i=(t=(t=ee(t)).sort(r)).length;let o=0;for(let n=0;n<i;n++)t[n]===e&&o++;return o>1?(2*t.indexOf(e)+o+1)/2:t.indexOf(e)+1},rt.EQ=(e,t,n)=>{if(ae(e=he(e),t=pe(ee(t))))return k;const r=(n=n||!1)?(e,t)=>e-t:(e,t)=>t-e;return(t=t.sort(r)).indexOf(e)+1},it.P=function(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=S.mean(e),n=e.length;let r=0,i=0;for(let o=0;o<n;o++)i+=Math.pow(e[o]-t,3),r+=Math.pow(e[o]-t,2);return i/=n,r/=n,i/Math.pow(r,1.5)};const st={};st.P=function(){const e=lt.P.apply(this,arguments);let t=Math.sqrt(e);return isNaN(t)&&(t=T),t},st.S=function(){const e=lt.S.apply(this,arguments);return Math.sqrt(e)};const at={};at.DIST=(e,t,n)=>1!==n&&2!==n?T:1===n?at.DIST.RT(e,t):at.DIST["2T"](e,t),at.DIST["2T"]=function(e,t){return 2!==arguments.length?D:e<0||t<1?T:"number"!=typeof e||"number"!=typeof t?k:2*(1-S.studentt.cdf(e,t))},at.DIST.RT=function(e,t){return 2!==arguments.length?D:e<0||t<1?T:"number"!=typeof e||"number"!=typeof t?k:1-S.studentt.cdf(e,t)},at.INV=(e,t)=>ae(e=he(e),t=he(t))?k:S.studentt.inv(e,t),at.INV["2T"]=(e,t)=>(e=he(e),t=he(t),e<=0||e>1||t<1?T:ae(e,t)?k:Math.abs(S.studentt.inv(e/2,t))),at.TEST=(e,t)=>{if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;const n=S.mean(e),r=S.mean(t);let i,o=0,s=0;for(i=0;i<e.length;i++)o+=Math.pow(e[i]-n,2);for(i=0;i<t.length;i++)s+=Math.pow(t[i]-r,2);o/=e.length-1,s/=t.length-1;const a=Math.abs(n-r)/Math.sqrt(o/e.length+s/t.length);return at.DIST["2T"](a,e.length+t.length-2)};const lt={};function ct(){const e=ee(arguments),t=e.length;let n=0,r=0;const i=Re(e);for(let o=0;o<t;o++){const t=e[o];n+="number"==typeof t?Math.pow(t-i,2):!0===t?Math.pow(1-i,2):Math.pow(0-i,2),null!==t&&r++}return n/(r-1)}function ut(){const e=ee(arguments),t=e.length;let n=0,r=0;const i=Re(e);let o;for(let o=0;o<t;o++){const t=e[o];n+="number"==typeof t?Math.pow(t-i,2):!0===t?Math.pow(1-i,2):Math.pow(0-i,2),null!==t&&r++}return o=n/r,isNaN(o)&&(o=T),o}lt.P=function(){const e=ce(ee(arguments)),t=e.length;let n=0;const r=Se(e);let i;for(let i=0;i<t;i++)n+=Math.pow(e[i]-r,2);return i=n/t,isNaN(i)&&(i=T),i},lt.S=function(){const e=ce(ee(arguments)),t=e.length;let n=0;const r=Se(e);for(let i=0;i<t;i++)n+=Math.pow(e[i]-r,2);return n/(t-1)};const ft={DIST:(e,t,n,r)=>ae(e=he(e),t=he(t),n=he(n))?k:r?1-Math.exp(-Math.pow(e/n,t)):Math.pow(e,t-1)*Math.exp(-Math.pow(e/n,t))*t/Math.pow(n,t)},dt={};function ht(e,t,n){const r=se(e=he(e),t=he(t),n=he(n));if(r)return r;if(0===t)return 0;t=Math.abs(t);const i=-Math.floor(Math.log(t)/Math.log(10));return e>=0?wt(Math.ceil(e/t)*t,i):0===n?-wt(Math.floor(Math.abs(e)/t)*t,i):-wt(Math.ceil(Math.abs(e)/t)*t,i)}function pt(e,t){const n=se(e=he(e),t=he(t));return n||(e<t?T:gt(e)/(gt(t)*gt(e-t)))}dt.TEST=(e,t,n)=>{if(ae(e=pe(ee(e)),t=he(t)))return k;n=n||st.S(e);const r=e.length;return 1-Ze.S.DIST((Se(e)-t)/(n/Math.sqrt(r)),!0)},ht.MATH=ht,ht.PRECISE=ht;const mt=[];function gt(e){if((e=he(e))instanceof Error)return e;const t=Math.floor(e);return 0===t||1===t?1:(mt[t]>0||(mt[t]=gt(t-1)*t),mt[t])}function yt(e,t){const n=se(e=he(e),t=he(t));if(n)return n;if(0===t)return 0;if(!(e>=0&&t>0||e<=0&&t<0))return T;t=Math.abs(t);const r=-Math.floor(Math.log(t)/Math.log(10));return e>=0?wt(Math.floor(e/t)*t,r):-wt(Math.ceil(Math.abs(e)/t),r)}yt.MATH=(e,t,n)=>{if(t instanceof Error)return t;t=void 0===t?0:t;const r=se(e=he(e),t=he(t),n=he(n));if(r)return r;if(0===t)return 0;t=t?Math.abs(t):1;const i=-Math.floor(Math.log(t)/Math.log(10));return e>=0?wt(Math.floor(e/t)*t,i):0===n||void 0===n?-wt(Math.ceil(Math.abs(e)/t)*t,i):-wt(Math.floor(Math.abs(e)/t)*t,i)},yt.PRECISE=yt.MATH;const _t={CEILING:ht};function vt(e,t){const n=se(e=he(e),t=he(t));if(n)return n;if(0===e&&0===t)return T;const r=Math.pow(e,t);return isNaN(r)?T:r}function bt(){const e=ee(arguments).filter((e=>null!=e));if(0===e.length)return 0;const t=pe(e);if(t instanceof Error)return t;let n=1;for(let e=0;e<t.length;e++)n*=t[e];return n}function wt(e,t){const n=se(e=he(e),t=he(t));return n||Number(Math.round(Number(e+"e"+t))+"e"+-1*t)}function xt(){let e=0;return Z(K(arguments),(t=>{if(e instanceof Error)return!1;if(t instanceof Error)e=t;else if("number"==typeof t)e+=t;else if("string"==typeof t){const n=parseFloat(t);!isNaN(n)&&(e+=n)}else if(Array.isArray(t)){const n=xt.apply(null,t);n instanceof Error?e=n:e+=n}})),e}var Et=Object.freeze({__proto__:null,ADD:function(e,t){if(2!==arguments.length)return D;const n=se(e=he(e),t=he(t));return n||e+t},DIVIDE:function(e,t){if(2!==arguments.length)return D;const n=se(e=he(e),t=he(t));return n||(0===t?O:e/t)},EQ:function(e,t){return 2!==arguments.length?D:e instanceof Error?e:t instanceof Error?t:(null===e&&(e=void 0),null===t&&(t=void 0),e===t)},GT:function(e,t){if(2!==arguments.length)return D;if(e instanceof Error)return e;if(t instanceof Error)return t;ge(e,t)?(e=me(e),t=me(t)):(e=he(e),t=he(t));const n=se(e,t);return n||e>t},GTE:function(e,t){if(2!==arguments.length)return D;ge(e,t)?(e=me(e),t=me(t)):(e=he(e),t=he(t));const n=se(e,t);return n||e>=t},LT:function(e,t){if(2!==arguments.length)return D;ge(e,t)?(e=me(e),t=me(t)):(e=he(e),t=he(t));const n=se(e,t);return n||e<t},LTE:function(e,t){if(2!==arguments.length)return D;ge(e,t)?(e=me(e),t=me(t)):(e=he(e),t=he(t));const n=se(e,t);return n||e<=t},MINUS:function(e,t){if(2!==arguments.length)return D;const n=se(e=he(e),t=he(t));return n||e-t},MULTIPLY:function(e,t){if(2!==arguments.length)return D;const n=se(e=he(e),t=he(t));return n||e*t},NE:function(e,t){return 2!==arguments.length?D:e instanceof Error?e:t instanceof Error?t:(null===e&&(e=void 0),null===t&&(t=void 0),e!==t)},POW:function(e,t){return 2!==arguments.length?D:vt(e,t)}});const $t=new Date(Date.UTC(1900,0,1)),Mt=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],At=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],St=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Rt(e,t,n){n=n.toUpperCase(),e=fe(e),t=fe(t);const r=e.getFullYear(),i=e.getMonth(),o=e.getDate(),s=t.getFullYear(),a=t.getMonth(),l=t.getDate();let c;switch(n){case"Y":c=Math.floor(Pt(e,t));break;case"D":c=Nt(t,e);break;case"M":c=a-i+12*(s-r),l<o&&c--;break;case"MD":o<=l?c=l-o:(0===a?(e.setFullYear(s-1),e.setMonth(12)):(e.setFullYear(s),e.setMonth(a-1)),c=Nt(t,e));break;case"YM":c=a-i+12*(s-r),l<o&&c--,c%=12;break;case"YD":a>i||a===i&&l<o?e.setFullYear(s):e.setFullYear(s-1),c=Nt(t,e)}return c}function It(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function Nt(e,t){return e=fe(e),t=fe(t),e instanceof Error?e:t instanceof Error?t:Lt(It(e))-Lt(It(t))}function Ot(e,t,n){if(n=ue(n||"false"),e=fe(e),t=fe(t),e instanceof Error)return e;if(t instanceof Error)return t;if(n instanceof Error)return n;const r=e.getMonth();let i,o,s=t.getMonth();if(n)i=31===e.getDate()?30:e.getDate(),o=31===t.getDate()?30:t.getDate();else{const n=new Date(e.getFullYear(),r+1,0).getDate(),a=new Date(t.getFullYear(),s+1,0).getDate();i=e.getDate()===n?30:e.getDate(),t.getDate()===a?i<30?(s++,o=1):o=30:o=t.getDate()}return 360*(t.getFullYear()-e.getFullYear())+30*(s-r)+(o-i)}function kt(e){if((e=fe(e))instanceof Error)return e;(e=It(e)).setDate(e.getDate()+4-(e.getDay()||7));const t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)}function jt(e,t,n){return jt.INTL(e,t,1,n)}function Ct(e,t,n){return Ct.INTL(e,t,1,n)}function Tt(e){return 1===new Date(e,1,29).getMonth()}function Dt(e,t){return Math.ceil((t-e)/1e3/60/60/24)}function Pt(e,t,n){if((e=fe(e))instanceof Error)return e;if((t=fe(t))instanceof Error)return t;n=n||0;let r=e.getDate();const i=e.getMonth()+1,o=e.getFullYear();let s=t.getDate();const a=t.getMonth()+1,l=t.getFullYear();switch(n){case 0:return 31===r&&31===s?(r=30,s=30):31===r?r=30:30===r&&31===s&&(s=30),(s+30*a+360*l-(r+30*i+360*o))/360;case 1:{const n=(e,t)=>{const n=e.getFullYear(),r=new Date(n,2,1);if(Tt(n)&&e<r&&t>=r)return!0;const i=t.getFullYear(),o=new Date(i,2,1);return Tt(i)&&t>=o&&e<o};let c=365;if(o===l||o+1===l&&(i>a||i===a&&r>=s))return(o===l&&Tt(o)||n(e,t)||1===a&&29===s)&&(c=366),Dt(e,t)/c;const u=l-o+1,f=(new Date(l+1,0,1)-new Date(o,0,1))/1e3/60/60/24/u;return Dt(e,t)/f}case 2:return Dt(e,t)/360;case 3:return Dt(e,t)/365;case 4:return(s+30*a+360*l-(r+30*i+360*o))/360}}function Lt(e){const t=e>-22038912e5?2:1;return Math.ceil((e-$t)/864e5)+t}function Ft(e){return 0===(e=he(e))?k:e instanceof Error?e:String.fromCharCode(e)}function qt(e){if(ae(e))return e;let t=(e=e||"").charCodeAt(0);return isNaN(t)&&(t=k),t}function Ut(){const e=ee(arguments),t=se.apply(void 0,e);if(t)return t;let n=0;for(;(n=e.indexOf(!0))>-1;)e[n]="TRUE";let r=0;for(;(r=e.indexOf(!1))>-1;)e[r]="FALSE";return e.join("")}jt.INTL=(e,t,n,r)=>{if((e=fe(e))instanceof Error)return e;if((t=fe(t))instanceof Error)return t;let i=!1;const o=[],s=[1,2,3,4,5,6,0],a=new RegExp("^[0|1]{7}$");if(void 0===n)n=St[1];else if("string"==typeof n&&a.test(n)){i=!0,n=n.split("");for(let e=0;e<n.length;e++)"1"===n[e]&&o.push(s[e])}else n=St[n];if(!(n instanceof Array))return k;void 0===r?r=[]:r instanceof Array||(r=[r]);for(let e=0;e<r.length;e++){const t=fe(r[e]);if(t instanceof Error)return t;r[e]=t}const l=Math.round((t-e)/864e5)+1;let c=l;const u=e;for(let e=0;e<l;e++){const e=(new Date).getTimezoneOffset()>0?u.getUTCDay():u.getDay();let t=i?o.includes(e):e===n[0]||e===n[1];for(let e=0;e<r.length;e++){const n=r[e];if(n.getDate()===u.getDate()&&n.getMonth()===u.getMonth()&&n.getFullYear()===u.getFullYear()){t=!0;break}}t&&c--,u.setDate(u.getDate()+1)}return c},Ct.INTL=(e,t,n,r)=>{if((e=fe(e))instanceof Error)return e;if((t=he(t))instanceof Error)return t;if(!((n=void 0===n?St[1]:St[n])instanceof Array))return k;void 0===r?r=[]:r instanceof Array||(r=[r]);for(let e=0;e<r.length;e++){const t=fe(r[e]);if(t instanceof Error)return t;r[e]=t}let i=0;const o=Math.sign(t);for(;i<t*o;){e.setDate(e.getDate()+o);const t=e.getDay();if(t!==n[0]&&t!==n[1]){for(let t=0;t<r.length;t++){const n=r[t];if(n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()){i--;break}}i++}}return e.getFullYear()<1900?k:e};const zt=Ut;function Vt(e,t=2,n=!1){if(e=he(e),isNaN(e))return k;if(t=he(t),isNaN(t))return k;if(t<0){const n=Math.pow(10,-t);e=Math.round(e/n)*n}else e=e.toFixed(t);if(n)e=e.toString().replace(/,/g,"");else{const t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+$)/g,","),e=t.join(".")}return e}function Bt(e,t){const n=se(e,t);return n||(e=me(e),(t=he(t))instanceof Error?t:new Array(t+1).join(e))}const Gt=Ft,Ht=qt;function Yt(e){return/^[01]{1,10}$/.test(e)}function Wt(e,t,n){if(ae(e=he(e),t=he(t)))return e;if("i"!==(n=void 0===n?"i":n)&&"j"!==n)return k;if(0===e&&0===t)return 0;if(0===e)return 1===t?n:t.toString()+n;if(0===t)return e.toString();{const r=t>0?"+":"";return e.toString()+r+(1===t?n:t.toString()+n)}}function Xt(e,t){return t=void 0===t?0:t,ae(e=he(e),t=he(t))?k:S.erf(e)}function Kt(e){return isNaN(e)?k:S.erfc(e)}function Zt(e){const t=rn(e),n=Qt(e);return ae(t,n)?k:Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}function Qt(e){if(void 0===e||!0===e||!1===e)return k;if(0===e||"0"===e)return 0;if(["i","j"].indexOf(e)>=0)return 1;let t=(e=(e+="").replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));const r=e.substring(e.length-1,e.length),i="i"===r||"j"===r;return t>=0||n>=0?i?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?T:Number(e.substring(t+1,e.length-1)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?T:-Number(e.substring(n+1,e.length-1)):T:i?isNaN(e.substring(0,e.length-1))?T:e.substring(0,e.length-1):isNaN(e)?T:0}function Jt(e){const t=rn(e),n=Qt(e);return ae(t,n)?k:0===t&&0===n?O:0===t&&n>0?Math.PI/2:0===t&&n<0?-Math.PI/2:0===n&&t>0?0:0===n&&t<0?-Math.PI:t>0?Math.atan(n/t):t<0&&n>=0?Math.atan(n/t)+Math.PI:Math.atan(n/t)-Math.PI}function en(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.cos(t)*(Math.exp(n)+Math.exp(-n))/2,-Math.sin(t)*(Math.exp(n)-Math.exp(-n))/2,r)}function tn(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.cos(n)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(n)*(Math.exp(t)-Math.exp(-t))/2,r)}function nn(e,t){const n=rn(e),r=Qt(e),i=rn(t),o=Qt(t);if(ae(n,r,i,o))return k;const s=e.substring(e.length-1),a=t.substring(t.length-1);let l="i";if(("j"===s||"j"===a)&&(l="j"),0===i&&0===o)return T;const c=i*i+o*o;return Wt((n*i+r*o)/c,(r*i-n*o)/c,l)}function rn(e){if(void 0===e||!0===e||!1===e)return k;if(0===e||"0"===e)return 0;if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e)>=0)return 0;let t=(e+="").indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));const r=e.substring(e.length-1,e.length),i="i"===r||"j"===r;return t>=0||n>=0?i?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?T:Number(e.substring(0,t)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?T:Number(e.substring(0,n)):T:i?isNaN(e.substring(0,e.length-1))?T:0:isNaN(e)?T:e}function on(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.sin(t)*(Math.exp(n)+Math.exp(-n))/2,Math.cos(t)*(Math.exp(n)-Math.exp(-n))/2,r)}function sn(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.cos(n)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(n)*(Math.exp(t)+Math.exp(-t))/2,r)}Xt.PRECISE=()=>{throw new Error("ERF.PRECISE is not implemented")},Kt.PRECISE=()=>{throw new Error("ERFC.PRECISE is not implemented")};const an=Ie.DIST,ln=Ie.INV,cn=Ne.DIST,un=ht.MATH,fn=ht.PRECISE,dn=Oe.DIST,hn=Oe.DIST.RT,pn=Oe.INV,mn=Oe.INV.RT,gn=Oe.TEST,yn=De.P,_n=De.P,vn=De.S,bn=Ne.INV,wn=Kt.PRECISE,xn=Xt.PRECISE,En=Pe.DIST,$n=Le.DIST,Mn=Le.DIST.RT,An=Le.INV,Sn=Le.INV.RT,Rn=yt.MATH,In=yt.PRECISE,Nn=Le.TEST,On=qe.DIST,kn=qe.INV,jn=Ue.PRECISE,Cn=ze.DIST,Tn=Ge.INV,Dn=Ge.DIST,Pn=Ge.INV,Ln=Xe.MULT,Fn=Xe.SNGL,qn=Ke.DIST,Un=jt.INTL,zn=Ze.DIST,Vn=Ze.INV,Bn=Ze.S.DIST,Gn=Ze.S.INV,Hn=Je.EXC,Yn=Je.INC,Wn=et.EXC,Xn=et.INC,Kn=tt.DIST,Zn=nt.EXC,Qn=nt.INC,Jn=rt.AVG,er=rt.EQ,tr=it.P,nr=st.P,rr=st.S,ir=at.DIST,or=at.DIST.RT,sr=at.INV,ar=at.TEST,lr=lt.P,cr=lt.S,ur=ft.DIST,fr=Ct.INTL,dr=dt.TEST;function hr(e){const t=[];return Z(e,(e=>{e&&t.push(e)})),t}function pr(e,t){const n={};for(let t=1;t<e[0].length;++t)n[t]=!0;let r=t[0].length;for(let e=1;e<t.length;++e)t[e].length>r&&(r=t[e].length);for(let i=1;i<e.length;++i)for(let o=1;o<e[i].length;++o){let s=!1,a=!1;for(let n=0;n<t.length;++n){const l=t[n];if(l.length<r)continue;const c=l[0];if(e[i][0]===c){a=!0;for(let t=1;t<l.length;++t)if(!s){if(void 0===l[t]||"*"===l[t])s=!0;else{const n=W(l[t]+""),r=[H(e[i][o],G)].concat(n);s=X(r)}}}}a&&(n[o]=n[o]&&s)}const i=[];for(let t=0;t<e[0].length;++t)n[t]&&i.push(t-1);return i}function mr(e){return e&&e.getTime&&!isNaN(e.getTime())}function gr(e){return e instanceof Date?e:new Date(e)}function yr(e){return e=he(e),-1===[1,2,4].indexOf(e)?T:e}function _r(e){return e=he(e),-1===[0,1,2,3,4].indexOf(e)?T:e}function vr(e,t,n,r,i){if(r=r||0,i=i||0,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i)))return k;let o;if(0===e)o=r+n*t;else{const s=Math.pow(1+e,t);o=1===i?r*s+n*(1+e)*(s-1)/e:r*s+n*(s-1)/e}return-o}function br(e,t,n,r,i,o){if(i=i||0,o=o||0,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i),o=he(o)))return k;const s=xr(e,n,r,i,o);return(1===t?1===o?0:-r:1===o?vr(e,t-2,s,r,1)-s:vr(e,t-1,s,r,0))*e}function wr(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=e[0];let n=0;for(let r=1;r<e.length;r++)n+=e[r]/Math.pow(1+t,r);return n}function xr(e,t,n,r,i){if(r=r||0,i=i||0,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i)))return k;let o;if(0===e)o=(n+r)/t;else{const s=Math.pow(1+e,t);o=1===i?(r*e/(s-1)+n*e/(1-1/s))/(1+e):r*e/(s-1)+n*e/(1-1/s)}return-o}const Er={errors:F,symbols:Et};var $r=Object.freeze({__proto__:null,ABS:function(e){return(e=he(e))instanceof Error?e:Math.abs(e)},ACCRINT:function(e,t,n,r,i,o,s){return e=gr(e),t=gr(t),n=gr(n),se(o=yr(o),s=_r(s))?T:mr(e)&&mr(t)&&mr(n)?r<=0||i<=0||n<=e?T:(i=i||0)*r*Pt(e,n,s=s||0):k},ACCRINTM:function(){throw new Error("ACCRINTM is not implemented")},ACOS:function(e){if((e=he(e))instanceof Error)return e;let t=Math.acos(e);return isNaN(t)&&(t=T),t},ACOSH:function(e){if((e=he(e))instanceof Error)return e;let t=Math.log(e+Math.sqrt(e*e-1));return isNaN(t)&&(t=T),t},ACOT:function(e){return(e=he(e))instanceof Error?e:Math.atan(1/e)},ACOTH:function(e){if((e=he(e))instanceof Error)return e;let t=.5*Math.log((e+1)/(e-1));return isNaN(t)&&(t=T),t},AGGREGATE:function(e,t,n,r){if(ae(e=he(e),he(e)))return k;switch(e){case 1:return Se(n);case 2:return je(n);case 3:return Ce(n);case 4:return He(n);case 5:return We(n);case 6:return bt(n);case 7:return st.S(n);case 8:return st.P(n);case 9:return xt(n);case 10:return lt.S(n);case 11:return lt.P(n);case 12:return Ye(n);case 13:return Xe.SNGL(n);case 14:return Ve(n,r);case 15:return ot(n,r);case 16:return Je.INC(n,r);case 17:return nt.INC(n,r);case 18:return Je.EXC(n,r);case 19:return nt.EXC(n,r)}},AMORDEGRC:function(){throw new Error("AMORDEGRC is not implemented")},AMORLINC:function(){throw new Error("AMORLINC is not implemented")},AND:function(){const e=ee(arguments);let t=k;for(let n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===k&&(t=!0),e[n]||(t=!1))}return t},ARABIC:function(e){if(null==e)return 0;if(e instanceof Error)return e;if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(e))return k;let t=0;return e.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(e=>{t+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[e]})),t},ASC:function(){throw new Error("ASC is not implemented")},ASIN:function(e){if((e=he(e))instanceof Error)return e;let t=Math.asin(e);return isNaN(t)&&(t=T),t},ASINH:function(e){return(e=he(e))instanceof Error?e:Math.log(e+Math.sqrt(e*e+1))},ATAN:function(e){return(e=he(e))instanceof Error?e:Math.atan(e)},ATAN2:function(e,t){const n=se(e=he(e),t=he(t));return n||Math.atan2(e,t)},ATANH:function(e){if((e=he(e))instanceof Error)return e;let t=Math.log((1+e)/(1-e))/2;return isNaN(t)&&(t=T),t},AVEDEV:function(){const e=ee(arguments).filter(_e);if(0===e.length)return T;const t=pe(e);return t instanceof Error?t:S.sum(S(t).subtract(S.mean(t)).abs()[0])/t.length},AVERAGE:Se,AVERAGEA:Re,AVERAGEIF:function(e,t,n){if(arguments.length<=1)return D;if(n=pe(ee(n=n||e).filter(_e)),e=ee(e),n instanceof Error)return n;let r=0,i=0;const o=void 0===t||"*"===t,s=o?null:W(t+"");for(let t=0;t<e.length;t++){const a=e[t];if(o)i+=n[t],r++;else{const e=[H(a,G)].concat(s);X(e)&&(i+=n[t],r++)}}return i/r},AVERAGEIFS:function(){const e=ye(...arguments),t=e.reduce(((e,t)=>e+t),0),n=t/e.length;return isNaN(n)?0:n},BAHTTEXT:function(){throw new Error("BAHTTEXT is not implemented")},BASE:function(e,t,n){const r=se(e=he(e),t=he(t),n=he(n));if(r)return r;if(0===t)return T;const i=e.toString(t);return new Array(Math.max(n+1-i.length,0)).join("0")+i},BESSELI:function(e,t){return ae(e=he(e),t=he(t))?k:I.besseli(e,t)},BESSELJ:function(e,t){return ae(e=he(e),t=he(t))?k:I.besselj(e,t)},BESSELK:function(e,t){return ae(e=he(e),t=he(t))?k:I.besselk(e,t)},BESSELY:function(e,t){return ae(e=he(e),t=he(t))?k:I.bessely(e,t)},BETA:Ie,BETADIST:an,BETAINV:ln,BIN2DEC:function(e){if(!Yt(e))return T;const t=parseInt(e,2),n=e.toString();return 10===n.length&&"1"===n.substring(0,1)?parseInt(n.substring(1),2)-512:t},BIN2HEX:function(e,t){if(!Yt(e))return T;const n=e.toString();if(10===n.length&&"1"===n.substring(0,1))return(0xfffffffe00+parseInt(n.substring(1),2)).toString(16);const r=parseInt(e,2).toString(16);return void 0===t?r:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=r.length?Bt("0",t-r.length)+r:T},BIN2OCT:function(e,t){if(!Yt(e))return T;const n=e.toString();if(10===n.length&&"1"===n.substring(0,1))return(1073741312+parseInt(n.substring(1),2)).toString(8);const r=parseInt(e,2).toString(8);return void 0===t?r:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=r.length?Bt("0",t-r.length)+r:T},BINOM:Ne,BINOMDIST:cn,BITAND:function(e,t){return ae(e=he(e),t=he(t))?k:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?T:e&t},BITLSHIFT:function(e,t){return ae(e=he(e),t=he(t))?k:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?T:t>=0?e<<t:e>>-t},BITOR:function(e,t){return ae(e=he(e),t=he(t))?k:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?T:e|t},BITRSHIFT:function(e,t){return ae(e=he(e),t=he(t))?k:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?T:t>=0?e>>t:e<<-t},BITXOR:function(e,t){return ae(e=he(e),t=he(t))?k:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?T:e^t},CEILING:ht,CEILINGMATH:un,CEILINGPRECISE:fn,CELL:function(){throw new Error("CELL is not implemented")},CHAR:Ft,CHIDIST:dn,CHIDISTRT:hn,CHIINV:pn,CHIINVRT:mn,CHISQ:Oe,CHITEST:gn,CHOOSE:function(){if(arguments.length<2)return D;const e=arguments[0];return e<1||e>254||arguments.length<e+1?k:arguments[e]},CLEAN:function(e){return ae(e)?e:(e=e||"").replace(/[\0-\x1F]/g,"")},CODE:qt,COLUMN:function(e,t){return 2!==arguments.length?D:t<0?T:e instanceof Array&&"number"==typeof t?0!==e.length?S.col(e,t):void 0:k},COLUMNS:function(e){return 1!==arguments.length?D:e instanceof Array?0===e.length?0:S.cols(e):k},COMBIN:pt,COMBINA:function(e,t){const n=se(e=he(e),t=he(t));return n||(e<t?T:0===e&&0===t?1:pt(e+t-1,e-1))},COMPLEX:Wt,CONCAT:zt,CONCATENATE:Ut,CONFIDENCE:ke,CONVERT:function(e,t,n){if((e=he(e))instanceof Error)return e;const r=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["ångström","Å",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic ångström","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m3",["m^3"],"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,4168181825.44058],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,7.58660370370369e-8],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","°",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519.538],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["œrsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","Ω",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdestärke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square ångström","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988.110336],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],i={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,0x1000000000000000,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},o={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]};let s,a=null,l=null,c=t,u=n,f=1,d=1;for(let e=0;e<r.length;e++)s=null===r[e][2]?[]:r[e][2],(r[e][1]===c||s.indexOf(c)>=0)&&(a=r[e]),(r[e][1]===u||s.indexOf(u)>=0)&&(l=r[e]);if(null===a){const e=i[t.substring(0,2)];let n=o[t.substring(0,1)];"da"===t.substring(0,2)&&(n=["dekao",10,"da"]),e?(f=e[2],c=t.substring(2)):n&&(f=n[1],c=t.substring(n[2].length));for(let e=0;e<r.length;e++)s=null===r[e][2]?[]:r[e][2],(r[e][1]===c||s.indexOf(c)>=0)&&(a=r[e])}if(null===l){const e=i[n.substring(0,2)];let t=o[n.substring(0,1)];"da"===n.substring(0,2)&&(t=["dekao",10,"da"]),e?(d=e[2],u=n.substring(2)):t&&(d=t[1],u=n.substring(t[2].length));for(let e=0;e<r.length;e++)s=null===r[e][2]?[]:r[e][2],(r[e][1]===u||s.indexOf(u)>=0)&&(l=r[e])}return null===a||null===l||a[3]!==l[3]?D:e*a[6]*f/(l[6]*d)},CORREL:function(e,t){return ae(e=pe(ee(e)),t=pe(ee(t)))?k:S.corrcoeff(e,t)},COS:function(e){return(e=he(e))instanceof Error?e:Math.cos(e)},COSH:function(e){return(e=he(e))instanceof Error?e:(Math.exp(e)+Math.exp(-e))/2},COT:function(e){return(e=he(e))instanceof Error?e:0===e?O:1/Math.tan(e)},COTH:function(e){if((e=he(e))instanceof Error)return e;if(0===e)return O;const t=Math.exp(2*e);return(t+1)/(t-1)},COUNT:je,COUNTA:Ce,COUNTBLANK:Te,COUNTIF:function(e,t){if(e=ee(e),void 0===t||"*"===t)return e.length;let n=0;const r=W(t+"");for(let t=0;t<e.length;t++){const i=[H(e[t],G)].concat(r);X(i)&&n++}return n},COUNTIFS:function(){const e=K(arguments),t=new Array(ee(e[0]).length);for(let e=0;e<t.length;e++)t[e]=!0;for(let n=0;n<e.length;n+=2){const r=ee(e[n]),i=e[n+1];if(!(void 0===i||"*"===i)){const e=W(i+"");for(let n=0;n<r.length;n++){const i=[H(r[n],G)].concat(e);t[n]=t[n]&&X(i)}}}let n=0;for(let e=0;e<t.length;e++)t[e]&&n++;return n},COUPDAYBS:function(){throw new Error("COUPDAYBS is not implemented")},COUPDAYS:function(e,t,n,r){if(r=_r(r),n=yr(n),se(e=fe(e),t=fe(t)))return k;if(se(n,r)||e>=t)return T;if(1===r){let r=function(e,t,n){let r=fe(t);for(r.setFullYear(e.getFullYear()),r<e&&r.setFullYear(r.getFullYear()+1);r>e;)r.setMonth(r.getMonth()+-12/n);return r}(e,t,n),i=fe(r);return i.setMonth(i.getMonth()+12/n),Rt(r,i,"D")}let i;switch(r){case 0:case 2:case 4:i=360;break;case 3:i=365;break;default:return T}return i/n},COUPDAYSNC:function(){throw new Error("COUPDAYSNC is not implemented")},COUPNCD:function(){throw new Error("COUPNCD is not implemented")},COUPNUM:function(){throw new Error("COUPNUM is not implemented")},COUPPCD:function(){throw new Error("COUPPCD is not implemented")},COVAR:yn,COVARIANCE:De,COVARIANCEP:_n,COVARIANCES:vn,CRITBINOM:bn,CSC:function(e){return(e=he(e))instanceof Error?e:0===e?O:1/Math.sin(e)},CSCH:function(e){return(e=he(e))instanceof Error?e:0===e?O:2/(Math.exp(e)-Math.exp(-e))},CUMIPMT:function(e,t,n,r,i,o){if(ae(e=he(e),t=he(t),n=he(n)))return k;if(e<=0||t<=0||n<=0)return T;if(r<1||i<1||r>i)return T;if(0!==o&&1!==o)return T;const s=xr(e,t,n,0,o);let a=0;1===r&&(0===o&&(a=-n),r++);for(let t=r;t<=i;t++)a+=1===o?vr(e,t-2,s,n,1)-s:vr(e,t-1,s,n,0);return a*=e,a},CUMPRINC:function(e,t,n,r,i,o){if(ae(e=he(e),t=he(t),n=he(n)))return k;if(e<=0||t<=0||n<=0)return T;if(r<1||i<1||r>i)return T;if(0!==o&&1!==o)return T;const s=xr(e,t,n,0,o);let a=0;1===r&&(a=0===o?s+n*e:s,r++);for(let t=r;t<=i;t++)a+=o>0?s-(vr(e,t-2,s,n,1)-s)*e:s-vr(e,t-1,s,n,0)*e;return a},DATE:function(e,t,n){let r;return ae(e=he(e),t=he(t),n=he(n))?r=k:(r=new Date(e,t-1,n),r.getFullYear()<0&&(r=T)),r},DATEDIF:Rt,DATEVALUE:function(e){if("string"!=typeof e)return k;const t=Date.parse(e);return isNaN(t)?k:new Date(e)},DAVERAGE:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);let o=0;return Z(r,(e=>{o+=i[e]})),0===r.length?O:o/r.length},DAY:function(e){const t=fe(e);return t instanceof Error?t:t.getDate()},DAYS:Nt,DAYS360:Ot,DB:function(e,t,n,r,i){if(i=void 0===i?12:i,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i)))return k;if(e<0||t<0||n<0||r<0)return T;if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(i))return T;if(r>n)return T;if(t>=e)return 0;const o=(1-Math.pow(t/e,1/n)).toFixed(3),s=e*o*i/12;let a=s,l=0;const c=r===n?n-1:r;for(let t=2;t<=c;t++)l=(e-a)*o,a+=l;return 1===r?s:r===n?(e-a)*o:l},DBCS:function(){throw new Error("DBCS is not implemented")},DCOUNT:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);const o=[];return Z(r,(e=>{o.push(i[e])})),je(o)},DCOUNTA:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);const o=[];return Z(r,(e=>{o.push(i[e])})),Ce(o)},DDB:function(e,t,n,r,i){if(i=void 0===i?2:i,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i)))return k;if(e<0||t<0||n<0||r<0||i<=0)return T;if(r>n)return T;if(t>=e)return 0;let o=0,s=0;for(let a=1;a<=r;a++)s=Math.min(i/n*(e-o),e-t-o),o+=s;return s},DEC2BIN:function(e,t){if((e=he(e))instanceof Error)return e;if(!/^-?[0-9]{1,3}$/.test(e)||e<-512||e>511)return T;if(e<0)return"1"+Bt("0",9-(512+e).toString(2).length)+(512+e).toString(2);const n=parseInt(e,10).toString(2);return void 0===t?n:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=n.length?Bt("0",t-n.length)+n:T},DEC2HEX:function(e,t){if((e=he(e))instanceof Error)return e;if(!/^-?[0-9]{1,12}$/.test(e)||e<-549755813888||e>549755813887)return T;if(e<0)return(1099511627776+e).toString(16);const n=parseInt(e,10).toString(16);return void 0===t?n:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=n.length?Bt("0",t-n.length)+n:T},DEC2OCT:function(e,t){if((e=he(e))instanceof Error)return e;if(!/^-?[0-9]{1,9}$/.test(e)||e<-536870912||e>536870911)return T;if(e<0)return(1073741824+e).toString(8);const n=parseInt(e,10).toString(8);return void 0===t?n:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=n.length?Bt("0",t-n.length)+n:T},DECIMAL:function(e,t){if(arguments.length<2)return D;const n=se(e=e||"0",t=he(t));if(n)return n;if(0===t)return T;const r=parseInt(e,t);return isNaN(r)?T:r},DEGREES:function(e){return(e=he(e))instanceof Error?e:180*e/Math.PI},DELTA:function(e,t){return t=void 0===t?0:t,ae(e=he(e),t=he(t))?k:e===t?1:0},DEVSQ:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=S.mean(e);let n=0;for(let r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},DGET:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){i=re(e[oe(e,t)])}else i=re(e[t]);return 0===r.length?k:r.length>1?T:i[r[0]]},DISC:function(e,t,n,r,i){if(ae(e=fe(e),t=fe(t),n=he(n),r=he(r),i=(i=he(i))||0))return k;if(n<=0||r<=0)return T;if(e>=t)return k;let o,s;switch(i){case 0:o=360,s=Ot(e,t,!1);break;case 1:case 3:o=365,s=Rt(e,t,"D");break;case 2:o=360,s=Rt(e,t,"D");break;case 4:o=360,s=Ot(e,t,!0);break;default:return T}return(r-n)/r*o/s},DMAX:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);let o=i[r[0]];return Z(r,(e=>{o<i[e]&&(o=i[e])})),o},DMIN:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);let o=i[r[0]];return Z(r,(e=>{o>i[e]&&(o=i[e])})),o},DOLLAR:function(e,t=2){if(e=he(e),isNaN(e))return k;const n={style:"currency",currency:"USD",minimumFractionDigits:t>=0?t:0,maximumFractionDigits:t>=0?t:0},r=(e=wt(e,t)).toLocaleString("en-US",n);return e<0?"$("+r.slice(2)+")":r},DOLLARDE:function(e,t){if(ae(e=he(e),t=he(t)))return k;if(t<0)return T;if(t>=0&&t<1)return O;t=parseInt(t,10);let n=parseInt(e,10);n+=e%1*Math.pow(10,Math.ceil(Math.log(t)/Math.LN10))/t;const r=Math.pow(10,Math.ceil(Math.log(t)/Math.LN2)+1);return n=Math.round(n*r)/r,n},DOLLARFR:function(e,t){if(ae(e=he(e),t=he(t)))return k;if(t<0)return T;if(t>=0&&t<1)return O;t=parseInt(t,10);let n=parseInt(e,10);return n+=e%1*Math.pow(10,-Math.ceil(Math.log(t)/Math.LN10))*t,n},DPRODUCT:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);let o=[];Z(r,(e=>{o.push(i[e])})),o=hr(o);let s=1;return Z(o,(e=>{s*=e})),s},DSTDEV:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);let o=[];return Z(r,(e=>{o.push(i[e])})),o=hr(o),st.S(o)},DSTDEVP:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);let o=[];return Z(r,(e=>{o.push(i[e])})),o=hr(o),st.P(o)},DSUM:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);const o=[];return Z(r,(e=>{o.push(i[e])})),xt(o)},DURATION:function(){throw new Error("DURATION is not implemented")},DVAR:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);const o=[];return Z(r,(e=>{o.push(i[e])})),lt.S(o)},DVARP:function(e,t,n){if(isNaN(t)&&"string"!=typeof t)return k;const r=pr(e,n);let i=[];if("string"==typeof t){const n=oe(e,t);i=re(e[n])}else i=re(e[t]);const o=[];return Z(r,(e=>{o.push(i[e])})),lt.P(o)},EDATE:function(e,t){if((e=fe(e))instanceof Error)return e;if(isNaN(t))return k;let n=e.getDate();e.setDate(1),t=parseInt(t,10),e.setMonth(e.getMonth()+t);let r=e.getMonth();if(n>28){let t=[31,28,31,30,31,30,31,31,30,31,30,31][r],i=e.getFullYear();1===r&&(i%4==0&&i%100!=0||i%400==0)&&(t=29),n=Math.min(n,t)}return e.setDate(n),e},EFFECT:function(e,t){return ae(e=he(e),t=he(t))?k:e<=0||t<1?T:(t=parseInt(t,10),Math.pow(1+e/t,t)-1)},EOMONTH:function(e,t){return(e=fe(e))instanceof Error?e:isNaN(t)?k:(t=parseInt(t,10),new Date(e.getFullYear(),e.getMonth()+t+1,0))},ERF:Xt,ERFC:Kt,ERFCPRECISE:wn,ERFPRECISE:xn,ERROR:ve,EVEN:function(e){return(e=he(e))instanceof Error?e:ht(e,-2,-1)},EXACT:function(e,t){if(2!==arguments.length)return D;const n=se(e,t);return n||(e=me(e))===(t=me(t))},EXP:function(e){return arguments.length<1?D:arguments.length>1?P:(e=he(e))instanceof Error?e:e=Math.exp(e)},EXPON:Pe,EXPONDIST:En,F:Le,FACT:gt,FACTDOUBLE:function e(t){if((t=he(t))instanceof Error)return t;const n=Math.floor(t);return n<=0?1:n*e(n-2)},FALSE:function(){return!1},FDIST:$n,FDISTRT:Mn,FIND:function(e,t,n){if(arguments.length<2)return D;e=me(e),n=void 0===n?0:n;const r=(t=me(t)).indexOf(e,n-1);return-1===r?k:r+1},FINV:An,FINVRT:Sn,FISHER:function(e){return(e=he(e))instanceof Error?e:Math.log((1+e)/(1-e))/2},FISHERINV:function(e){if((e=he(e))instanceof Error)return e;const t=Math.exp(2*e);return(t-1)/(t+1)},FIXED:Vt,FLOOR:yt,FLOORMATH:Rn,FLOORPRECISE:In,FORECAST:Fe,FREQUENCY:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;const n=e.length,r=t.length,i=[];for(let o=0;o<=r;o++){i[o]=0;for(let s=0;s<n;s++)0===o?e[s]<=t[0]&&(i[0]+=1):o<r?e[s]>t[o-1]&&e[s]<=t[o]&&(i[o]+=1):o===r&&e[s]>t[r-1]&&(i[r]+=1)}return i},FTEST:Nn,FV:vr,FVSCHEDULE:function(e,t){if(ae(e=he(e),t=pe(ee(t))))return k;const n=t.length;let r=e;for(let e=0;e<n;e++)r*=1+t[e];return r},GAMMA:qe,GAMMADIST:On,GAMMAINV:kn,GAMMALN:Ue,GAMMALNPRECISE:jn,GAUSS:function(e){return(e=he(e))instanceof Error?e:S.normal.cdf(e,0,1)-.5},GCD:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=e.length,n=e[0];let r=n<0?-n:n;for(let n=1;n<t;n++){const t=e[n];let i=t<0?-t:t;for(;r&&i;)r>i?r%=i:i%=r;r+=i}return r},GEOMEAN:function(){const e=pe(ee(arguments));return e instanceof Error?e:S.geomean(e)},GESTEP:function(e,t){return ae(t=t||0,e=he(e))?e:e>=t?1:0},GROWTH:function(e,t,n,r){if((e=pe(ee(e)))instanceof Error)return e;let i;if(void 0===t)for(t=[],i=1;i<=e.length;i++)t.push(i);if(void 0===n&&(n=t),ae(t=pe(ee(t)),n=pe(ee(n))))return k;void 0===r&&(r=!0);const o=e.length;let s,a,l=0,c=0,u=0,f=0;for(i=0;i<o;i++){const n=t[i],r=Math.log(e[i]);l+=n,c+=r,u+=n*r,f+=n*n}l/=o,c/=o,u/=o,f/=o,r?(s=(u-l*c)/(f-l*l),a=c-s*l):(s=u/f,a=0);const d=[];for(i=0;i<n.length;i++)d.push(Math.exp(a+s*n[i]));return d},HARMEAN:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=e.length;let n=0;for(let r=0;r<t;r++)n+=1/e[r];return t/n},HEX2BIN:function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return T;const n=!(10!==e.length||"f"!==e.substring(0,1).toLowerCase()),r=n?parseInt(e,16)-1099511627776:parseInt(e,16);if(r<-512||r>511)return T;if(n)return"1"+Bt("0",9-(512+r).toString(2).length)+(512+r).toString(2);const i=r.toString(2);return void 0===t?i:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=i.length?Bt("0",t-i.length)+i:T},HEX2DEC:function(e){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return T;const t=parseInt(e,16);return t>=549755813888?t-1099511627776:t},HEX2OCT:function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return T;const n=parseInt(e,16);if(n>536870911&&n<0xffe0000000)return T;if(n>=0xffe0000000)return(n-0xffc0000000).toString(8);const r=n.toString(8);return void 0===t?r:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=r.length?Bt("0",t-r.length)+r:T},HLOOKUP:function(e,t,n,r){return Ae(e,ie(t),n,r)},HOUR:function(e){return(e=fe(e))instanceof Error?e:e.getHours()},HYPGEOM:ze,HYPGEOMDIST:Cn,IF:function(e,t,n){return e instanceof Error?e:(null==(t=!(arguments.length>=2)||t)&&(t=0),null==(n=3===arguments.length&&n)&&(n=0),e?t:n)},IFERROR:function(e,t){return we(e)?t:e},IFNA:function(e,t){return e===D?t:e},IFS:function(){for(let e=0;e<arguments.length/2;e++)if(arguments[2*e])return arguments[2*e+1];return D},IMABS:Zt,IMAGINARY:Qt,IMARGUMENT:Jt,IMCONJUGATE:function(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",0!==n?Wt(t,-n,r):e},IMCOS:en,IMCOSH:tn,IMCOT:function(e){return ae(rn(e),Qt(e))?k:nn(en(e),on(e))},IMCSC:function(e){return!0===e||!1===e?k:ae(rn(e),Qt(e))?T:nn("1",on(e))},IMCSCH:function(e){return!0===e||!1===e?k:ae(rn(e),Qt(e))?T:nn("1",sn(e))},IMDIV:nn,IMEXP:function(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);r="i"===r||"j"===r?r:"i";const i=Math.exp(t);return Wt(i*Math.cos(n),i*Math.sin(n),r)},IMLN:function(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.log(Math.sqrt(t*t+n*n)),Math.atan(n/t),r)},IMLOG10:function(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.log(Math.sqrt(t*t+n*n))/Math.log(10),Math.atan(n/t)/Math.log(10),r)},IMLOG2:function(e){const t=rn(e),n=Qt(e);if(ae(t,n))return k;let r=e.substring(e.length-1);return r="i"===r||"j"===r?r:"i",Wt(Math.log(Math.sqrt(t*t+n*n))/Math.log(2),Math.atan(n/t)/Math.log(2),r)},IMPOWER:function(e,t){if(ae(t=he(t),rn(e),Qt(e)))return k;let n=e.substring(e.length-1);n="i"===n||"j"===n?n:"i";const r=Math.pow(Zt(e),t),i=Jt(e);return Wt(r*Math.cos(t*i),r*Math.sin(t*i),n)},IMPRODUCT:function(){let e=arguments[0];if(!arguments.length)return k;for(let t=1;t<arguments.length;t++){const n=rn(e),r=Qt(e),i=rn(arguments[t]),o=Qt(arguments[t]);if(ae(n,r,i,o))return k;e=Wt(n*i-r*o,n*o+r*i)}return e},IMREAL:rn,IMSEC:function(e){return!0===e||!1===e||ae(rn(e),Qt(e))?k:nn("1",en(e))},IMSECH:function(e){return ae(rn(e),Qt(e))?k:nn("1",tn(e))},IMSIN:on,IMSINH:sn,IMSQRT:function(e){if(ae(rn(e),Qt(e)))return k;let t=e.substring(e.length-1);t="i"===t||"j"===t?t:"i";const n=Math.sqrt(Zt(e)),r=Jt(e);return Wt(n*Math.cos(r/2),n*Math.sin(r/2),t)},IMSUB:function(e,t){const n=rn(e),r=Qt(e),i=rn(t),o=Qt(t);if(ae(n,r,i,o))return k;const s=e.substring(e.length-1),a=t.substring(t.length-1);let l="i";return("j"===s||"j"===a)&&(l="j"),Wt(n-i,r-o,l)},IMSUM:function(){if(!arguments.length)return k;const e=ee(arguments);let t=e[0];for(let n=1;n<e.length;n++){const r=rn(t),i=Qt(t),o=rn(e[n]),s=Qt(e[n]);if(ae(r,i,o,s))return k;t=Wt(r+o,i+s)}return t},IMTAN:function(e){return!0===e||!1===e||ae(rn(e),Qt(e))?k:nn(on(e),en(e))},INDEX:function(e,t,n){const r=se(e,t,n);if(r)return r;if(!Array.isArray(e))return k;const i=e.length>0&&!Array.isArray(e[0]);return i&&!n?(n=t,t=1):(n=n||1,t=t||1),n<0||t<0?k:i&&1===t&&n<=e.length?e[n-1]:t<=e.length&&n<=e[t-1].length?e[t-1][n-1]:j},INFO:function(){throw new Error("INFO is not implemented")},INT:function(e){return(e=he(e))instanceof Error?e:Math.floor(e)},INTERCEPT:function(e,t){return ae(e=pe(e),t=pe(t))?k:e.length!==t.length?D:Fe(0,e,t)},INTRATE:function(){throw new Error("INTRATE is not implemented")},IPMT:br,IRR:function(e,t){if(t=t||0,ae(e=pe(ee(e)),t=he(t)))return k;const n=(e,t,n)=>{const r=n+1;let i=e[0];for(let n=1;n<e.length;n++)i+=e[n]/Math.pow(r,(t[n]-t[0])/365);return i},r=(e,t,n)=>{const r=n+1;let i=0;for(let n=1;n<e.length;n++){const o=(t[n]-t[0])/365;i-=o*e[n]/Math.pow(r,o+1)}return i},i=[];let o=!1,s=!1;for(let t=0;t<e.length;t++)i[t]=0===t?0:i[t-1]+365,e[t]>0&&(o=!0),e[t]<0&&(s=!0);if(!o||!s)return T;let a,l,c,u=t=void 0===t?.1:t,f=!0;do{c=n(e,i,u),a=u-c/r(e,i,u),l=Math.abs(a-u),u=a,f=l>1e-10&&Math.abs(c)>1e-10}while(f);return u},ISBLANK:function(e){return null===e},ISERR:be,ISERROR:we,ISEVEN:function(e){return!(1&Math.floor(Math.abs(e)))},ISFORMULA:function(){throw new Error("ISFORMULA is not implemented")},ISLOGICAL:xe,ISNA:function(e){return e===D},ISNONTEXT:function(e){return"string"!=typeof e},ISNUMBER:Ee,ISO:_t,ISODD:function(e){return!!(1&Math.floor(Math.abs(e)))},ISOWEEKNUM:kt,ISPMT:function(e,t,n,r){return ae(e=he(e),t=he(t),n=he(n),r=he(r))?k:r*e*(t/n-1)},ISREF:function(){throw new Error("ISREF is not implemented")},ISTEXT:$e,KURT:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;const t=S.mean(e),n=e.length;let r=0;for(let i=0;i<n;i++)r+=Math.pow(e[i]-t,4);return r/=Math.pow(S.stdev(e,!0),4),n*(n+1)/((n-1)*(n-2)*(n-3))*r-3*(n-1)*(n-1)/((n-2)*(n-3))},LARGE:Ve,LCM:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;for(var t,n,r,i,o=1;void 0!==(r=e.pop());){if(0===r)return 0;for(;r>1;){if(r%2){for(t=3,n=Math.floor(Math.sqrt(r));t<=n&&r%t;t+=2);i=t<=n?t:r}else i=2;for(r/=i,o*=i,t=e.length;t;e[--t]%i==0&&1==(e[t]/=i)&&e.splice(t,1));}}return o},LEFT:function(e,t){const n=se(e,t);return n||(e=me(e),(t=he(t=void 0===t?1:t))instanceof Error||"string"!=typeof e?k:e.substring(0,t))},LEN:function(e){return 0===arguments.length?P:e instanceof Error?e:Array.isArray(e)?k:me(e).length},LINEST:Be,LN:function(e){return(e=he(e))instanceof Error?e:0===e?T:Math.log(e)},LOG:function(e,t){const n=se(e=he(e),t=he(t));return n||(0===e||0===t?T:Math.log(e)/Math.log(t))},LOG10:function(e){return(e=he(e))instanceof Error?e:0===e?T:Math.log(e)/Math.log(10)},LOGEST:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;if(e.length!==t.length)return k;for(let t=0;t<e.length;t++)e[t]=Math.log(e[t]);const n=Be(e,t);return n[0]=Math.round(1e6*Math.exp(n[0]))/1e6,n[1]=Math.round(1e6*Math.exp(n[1]))/1e6,n},LOGINV:Tn,LOGNORM:Ge,LOGNORMDIST:Dn,LOGNORMINV:Pn,LOOKUP:function(e,t,n){t=ee(t),n=n?ee(n):t;const r="number"==typeof e;let i=D;for(let o=0;o<t.length;o++){if(t[o]===e)return n[o];if(r&&t[o]<=e||"string"==typeof t[o]&&t[o].localeCompare(e)<0)i=n[o];else if(r&&t[o]>e)return i}return i},LOWER:function(e){return 1!==arguments.length?k:ae(e=me(e))?e:e.toLowerCase()},MATCH:function(e,t,n){if(!e&&0!==e||!t)return D;if(2===arguments.length&&(n=1),!((t=ee(t))instanceof Array))return D;if(-1!==n&&0!==n&&1!==n)return D;let r,i;for(let o=0;o<t.length;o++)if(1===n){if(t[o]===e)return o+1;t[o]<e&&(i?t[o]>i&&(r=o+1,i=t[o]):(r=o+1,i=t[o]))}else if(0===n){if("string"==typeof e&&"string"==typeof t[o]){const n=e.toLowerCase().replace(/\?/g,".").replace(/\*/g,".*").replace(/~/g,"\\").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]");if(new RegExp("^"+n+"$").test(t[o].toLowerCase()))return o+1}else if(t[o]===e)return o+1}else if(-1===n){if(t[o]===e)return o+1;t[o]>e&&(i?t[o]<i&&(r=o+1,i=t[o]):(r=o+1,i=t[o]))}return r||D},MAX:He,MAXA:function(){const e=ee(arguments),t=se.apply(void 0,e);if(t)return t;let n=Q(e);return n=n.map((e=>null==e?0:e)),0===n.length?0:Math.max.apply(Math,n)},MAXIFS:function(){const e=ye(...arguments);return 0===e.length?0:Math.max.apply(Math,e)},MDURATION:function(){throw new Error("MDURATION is not implemented")},MEDIAN:Ye,MID:function(e,t,n){if(null==t)return k;if(ae(t=he(t),n=he(n))||"string"!=typeof e)return n;const r=t-1,i=r+n;return e.substring(r,i)},MIN:We,MINA:function(){const e=ee(arguments),t=se.apply(void 0,e);if(t)return t;let n=Q(e);return n=n.map((e=>null==e?0:e)),0===n.length?0:Math.min.apply(Math,n)},MINIFS:function(){const e=ye(...arguments);return 0===e.length?0:Math.min.apply(Math,e)},MINUTE:function(e){return(e=fe(e))instanceof Error?e:e.getMinutes()},MIRR:function(e,t,n){if(ae(e=pe(ee(e)),t=he(t),n=he(n)))return k;const r=e.length,i=[],o=[];for(let t=0;t<r;t++)e[t]<0?i.push(e[t]):o.push(e[t]);const s=-wr(n,o)*Math.pow(1+n,r-1),a=wr(t,i)*(1+t);return Math.pow(s/a,1/(r-1))-1},MMULT:function(e,t){return!Array.isArray(e)||!Array.isArray(t)||e.some((e=>!e.length))||t.some((e=>!e.length))||te(e).some((e=>"number"!=typeof e))||te(t).some((e=>"number"!=typeof e))||e[0].length!==t.length?k:Array(e.length).fill(0).map((()=>Array(t[0].length).fill(0))).map(((n,r)=>n.map(((n,i)=>e[r].reduce(((e,n,r)=>e+n*t[r][i]),0)))))},MOD:function(e,t){const n=se(e=he(e),t=he(t));if(n)return n;if(0===t)return O;let r=Math.abs(e%t);return r=e<0?t-r:r,t>0?r:-r},MODE:Xe,MODEMULT:Ln,MODESNGL:Fn,MONTH:function(e){return(e=fe(e))instanceof Error?e:e.getMonth()+1},MROUND:function(e,t){const n=se(e=he(e),t=he(t));return n||(e*t==0?0:e*t<0?T:Math.round(e/t)*t)},MULTINOMIAL:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;let t=0,n=1;for(let r=0;r<e.length;r++)t+=e[r],n*=gt(e[r]);return gt(t)/n},MUNIT:function(e){return arguments.length>1?D:!(e=parseInt(e))||e<=0?k:Array(e).fill(0).map((()=>Array(e).fill(0))).map(((e,t)=>(e[t]=1,e)))},N:function(e){return Ee(e)?e:e instanceof Date?e.getTime():!0===e?1:!1===e?0:we(e)?e:0},NA:function(){return D},NEGBINOM:Ke,NEGBINOMDIST:qn,NETWORKDAYS:jt,NETWORKDAYSINTL:Un,NOMINAL:function(e,t){return ae(e=he(e),t=he(t))?k:e<=0||t<1?T:(t=parseInt(t,10),(Math.pow(e+1,1/t)-1)*t)},NORM:Ze,NORMDIST:zn,NORMINV:Vn,NORMSDIST:Bn,NORMSINV:Gn,NOT:function(e){return"string"==typeof e?k:e instanceof Error?e:!e},NOW:function(){return new Date},NPER:function(e,t,n,r,i){if(i=void 0===i?0:i,r=void 0===r?0:r,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i)))return k;if(0===e)return-(n+r)/t;{const o=t*(1+e*i)-r*e,s=n*e+t*(1+e*i);return Math.log(o/s)/Math.log(1+e)}},NPV:wr,NUMBERVALUE:function(e,t,n){return"number"==typeof(e=_e(e)?e:"")?e:"string"!=typeof e?D:(t=void 0===t?".":t,n=void 0===n?",":n,Number(e.replace(t,".").replace(n,"")))},OCT2BIN:function(e,t){if(!/^[0-7]{1,10}$/.test(e))return T;const n=!(10!==e.length||"7"!==e.substring(0,1)),r=n?parseInt(e,8)-1073741824:parseInt(e,8);if(r<-512||r>511)return T;if(n)return"1"+Bt("0",9-(512+r).toString(2).length)+(512+r).toString(2);const i=r.toString(2);return void 0===t?i:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=i.length?Bt("0",t-i.length)+i:T},OCT2DEC:function(e){if(!/^[0-7]{1,10}$/.test(e))return T;const t=parseInt(e,8);return t>=536870912?t-1073741824:t},OCT2HEX:function(e,t){if(!/^[0-7]{1,10}$/.test(e))return T;const n=parseInt(e,8);if(n>=536870912)return"ff"+(n+3221225472).toString(16);const r=n.toString(16);return void 0===t?r:isNaN(t)?k:t<0?T:(t=Math.floor(t))>=r.length?Bt("0",t-r.length)+r:T},ODD:function(e){if((e=he(e))instanceof Error)return e;let t=Math.ceil(Math.abs(e));return t=1&t?t:t+1,e>=0?t:-t},ODDFPRICE:function(){throw new Error("ODDFPRICE is not implemented")},ODDFYIELD:function(){throw new Error("ODDFYIELD is not implemented")},ODDLPRICE:function(){throw new Error("ODDLPRICE is not implemented")},ODDLYIELD:function(){throw new Error("ODDLYIELD is not implemented")},OR:function(){const e=ee(arguments);let t=k;for(let n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===k&&(t=!1),e[n]&&(t=!0))}return t},PDURATION:function(e,t,n){return ae(e=he(e),t=he(t),n=he(n))?k:e<=0?T:(Math.log(n)-Math.log(t))/Math.log(1+e)},PEARSON:Qe,PERCENTILE:Je,PERCENTILEEXC:Hn,PERCENTILEINC:Yn,PERCENTRANK:et,PERCENTRANKEXC:Wn,PERCENTRANKINC:Xn,PERMUT:function(e,t){return ae(e=he(e),t=he(t))?k:gt(e)/gt(e-t)},PERMUTATIONA:function(e,t){return ae(e=he(e),t=he(t))?k:Math.pow(e,t)},PHI:function(e){return(e=he(e))instanceof Error?k:Math.exp(-.5*e*e)/2.5066282746310002},PI:function(){return Math.PI},PMT:xr,POISSON:tt,POISSONDIST:Kn,POWER:vt,PPMT:function(e,t,n,r,i,o){return i=i||0,o=o||0,ae(e=he(e),n=he(n),r=he(r),i=he(i),o=he(o))?k:xr(e,n,r,i,o)-br(e,t,n,r,i,o)},PRICE:function(){throw new Error("PRICE is not implemented")},PRICEDISC:function(e,t,n,r,i){if(ae(e=fe(e),t=fe(t),n=he(n),r=he(r),i=(i=he(i))||0))return k;if(n<=0||r<=0)return T;if(e>=t)return k;let o,s;switch(i){case 0:o=360,s=Ot(e,t,!1);break;case 1:case 3:o=365,s=Rt(e,t,"D");break;case 2:o=360,s=Rt(e,t,"D");break;case 4:o=360,s=Ot(e,t,!0);break;default:return T}return r-n*r*s/o},PRICEMAT:function(){throw new Error("PRICEMAT is not implemented")},PROB:function(e,t,n,r){if(void 0===n)return 0;if(r=void 0===r?n:r,ae(e=pe(ee(e)),t=pe(ee(t)),n=he(n),r=he(r)))return k;if(n===r)return e.indexOf(n)>=0?t[e.indexOf(n)]:0;const i=e.sort(((e,t)=>e-t)),o=i.length;let s=0;for(let a=0;a<o;a++)i[a]>=n&&i[a]<=r&&(s+=t[e.indexOf(i[a])]);return s},PRODUCT:bt,PRONETIC:function(){throw new Error("PRONETIC is not implemented")},PROPER:function(e){return ae(e)?e:isNaN(e)&&"number"==typeof e?k:(e=me(e)).replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()))},PV:function(e,t,n,r,i){return r=r||0,i=i||0,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i))?k:0===e?-n*t-r:((1-Math.pow(1+e,t))/e*n*(1+e*i)-r)/Math.pow(1+e,t)},QUARTILE:nt,QUARTILEEXC:Zn,QUARTILEINC:Qn,QUOTIENT:function(e,t){const n=se(e=he(e),t=he(t));return n||parseInt(e/t,10)},RADIANS:function(e){return(e=he(e))instanceof Error?e:e*Math.PI/180},RAND:function(){return Math.random()},RANDBETWEEN:function(e,t){const n=se(e=he(e),t=he(t));return n||e+Math.ceil((t-e+1)*Math.random())-1},RANK:rt,RANKAVG:Jn,RANKEQ:er,RATE:function(e,t,n,r,i,o){if(o=void 0===o?.01:o,r=void 0===r?0:r,i=void 0===i?0:i,ae(e=he(e),t=he(t),n=he(n),r=he(r),i=he(i),o=he(o)))return k;const s=1e-10;let a=o;i=i?1:0;for(let o=0;o<20;o++){if(a<=-1)return T;let o,l,c;if(Math.abs(a)<s?o=n*(1+e*a)+t*(1+a*i)*e+r:(l=Math.pow(1+a,e),o=n*l+t*(1/a+i)*(l-1)+r),Math.abs(o)<s)return a;if(Math.abs(a)<s)c=n*e+t*i*e;else{l=Math.pow(1+a,e);const r=e*Math.pow(1+a,e-1);c=n*r+t*(1/a+i)*r+t*(-1/(a*a))*(l-1)}a-=o/c}return a},RECEIVED:function(){throw new Error("RECEIVED is not implemented")},REPLACE:function(e,t,n,r){return ae(t=he(t),n=he(n))||"string"!=typeof e||"string"!=typeof r?k:e.substr(0,t-1)+r+e.substr(t-1+n)},REPT:Bt,RIGHT:function(e,t){const n=se(e,t);return n||(e=me(e),(t=he(t=void 0===t?1:t))instanceof Error?t:e.substring(e.length-t))},ROMAN:function(e){if((e=he(e))instanceof Error)return e;const t=String(e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let r="",i=3;for(;i--;)r=(n[+t.pop()+10*i]||"")+r;return new Array(+t.join("")+1).join("M")+r},ROUND:wt,ROUNDDOWN:function(e,t){const n=se(e=he(e),t=he(t));return n||(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},ROUNDUP:function(e,t){const n=se(e=he(e),t=he(t));return n||(e>0?1:-1)*Math.ceil(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},ROW:function(e,t){return 2!==arguments.length?D:t<0?T:e instanceof Array&&"number"==typeof t?0!==e.length?S.row(e,t):void 0:k},ROWS:function(e){return 1!==arguments.length?D:e instanceof Array?0===e.length?0:S.rows(e):k},RRI:function(e,t,n){return ae(e=he(e),t=he(t),n=he(n))?k:0===e||0===t?T:Math.pow(n/t,1/e)-1},RSQ:function(e,t){return ae(e=pe(ee(e)),t=pe(ee(t)))?k:Math.pow(Qe(e,t),2)},SEARCH:function(e,t,n){let r;return"string"!=typeof e||"string"!=typeof t?k:(n=void 0===n?0:n,r=t.toLowerCase().indexOf(e.toLowerCase(),n-1)+1,0===r?k:r)},SEC:function(e){return(e=he(e))instanceof Error?e:1/Math.cos(e)},SECH:function(e){return(e=he(e))instanceof Error?e:2/(Math.exp(e)+Math.exp(-e))},SECOND:function(e){return(e=fe(e))instanceof Error?e:e.getSeconds()},SERIESSUM:function(e,t,n,r){if(ae(e=he(e),t=he(t),n=he(n),r=pe(r)))return k;let i=r[0]*Math.pow(e,t);for(let o=1;o<r.length;o++)i+=r[o]*Math.pow(e,t+o*n);return i},SHEET:function(){throw new Error("SHEET is not implemented")},SHEETS:function(){throw new Error("SHEETS is not implemented")},SIGN:function(e){return(e=he(e))instanceof Error?e:e<0?-1:0===e?0:1},SIN:function(e){return(e=he(e))instanceof Error?e:Math.sin(e)},SINH:function(e){return(e=he(e))instanceof Error?e:(Math.exp(e)-Math.exp(-e))/2},SKEW:it,SKEWP:tr,SLN:function(e,t,n){return ae(e=he(e),t=he(t),n=he(n))?k:0===n?T:(e-t)/n},SLOPE:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;const n=S.mean(t),r=S.mean(e),i=t.length;let o=0,s=0;for(let a=0;a<i;a++)o+=(t[a]-n)*(e[a]-r),s+=Math.pow(t[a]-n,2);return o/s},SMALL:ot,SORT:function(e,t=1,n=1,r=!1){if(!e||!Array.isArray(e))return D;if(0===e.length)return 0;if(!(t=he(t))||t<1)return k;if(1!==(n=he(n))&&-1!==n)return k;if("boolean"!=typeof(r=ue(r)))return C;const i=e=>e.sort(((e,r)=>(e=me(e[t-1]),r=me(r[t-1]),1===n?e<r?-1*n:n:e>r?n:-1*n))),o=J(e),s=r?ie(o):o;return t>=1&&t<=s[0].length?r?ie(i(s)):i(s):k},SQRT:function(e){return(e=he(e))instanceof Error?e:e<0?T:Math.sqrt(e)},SQRTPI:function(e){return(e=he(e))instanceof Error?e:Math.sqrt(e*Math.PI)},STANDARDIZE:function(e,t,n){return ae(e=he(e),t=he(t),n=he(n))?k:(e-t)/n},STDEV:st,STDEVA:function(){const e=ct.apply(this,arguments);return Math.sqrt(e)},STDEVP:nr,STDEVPA:function(){const e=ut.apply(this,arguments);let t=Math.sqrt(e);return isNaN(t)&&(t=T),t},STDEVS:rr,STEYX:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;const n=S.mean(t),r=S.mean(e),i=t.length;let o=0,s=0,a=0;for(let l=0;l<i;l++)o+=Math.pow(e[l]-r,2),s+=(t[l]-n)*(e[l]-r),a+=Math.pow(t[l]-n,2);return Math.sqrt((o-s*s/a)/(i-2))},SUBSTITUTE:function(e,t,n,r){if(arguments.length<3)return D;if(e&&t){if(void 0===r)return e.split(t).join(n);{if(r=Math.floor(Number(r)),Number.isNaN(r)||r<=0)return k;let i=0,o=0;for(;i>-1&&e.indexOf(t,i)>-1;)if(i=e.indexOf(t,i+1),o++,i>-1&&o===r)return e.substring(0,i)+n+e.substring(i+t.length);return e}}return e},SUBTOTAL:function(e,t){if((e=he(e))instanceof Error)return e;switch(e){case 1:case 101:return Se(t);case 2:case 102:return je(t);case 3:case 103:return Ce(t);case 4:case 104:return He(t);case 5:case 105:return We(t);case 6:case 106:return bt(t);case 7:case 107:return st.S(t);case 8:case 108:return st.P(t);case 9:case 109:return xt(t);case 10:case 110:return lt.S(t);case 11:case 111:return lt.P(t)}},SUM:xt,SUMIF:function(e,t,n){if(e=ee(e),n=n?ee(n):e,e instanceof Error)return e;if(null==t||t instanceof Error)return 0;let r=0;const i="*"===t,o=i?null:W(t+"");for(let t=0;t<e.length;t++){const s=e[t],a=n[t];if(i)r+=s;else{const e=[H(s,G)].concat(o);r+=X(e)?a:0}}return r},SUMIFS:function(){return xt(ye(...arguments))},SUMPRODUCT:function(){if(!arguments||0===arguments.length)return k;const e=arguments.length+1;let t,n,r,i,o=0;for(let s=0;s<arguments[0].length;s++)if(arguments[0][s]instanceof Array)for(let r=0;r<arguments[0][s].length;r++){for(t=1,n=1;n<e;n++){const e=arguments[n-1][s][r];if(e instanceof Error)return e;if(i=he(e),i instanceof Error)return i;t*=i}o+=t}else{for(t=1,n=1;n<e;n++){const e=arguments[n-1][s];if(e instanceof Error)return e;if(r=he(e),r instanceof Error)return r;t*=r}o+=t}return o},SUMSQ:function(){const e=pe(ee(arguments));if(e instanceof Error)return e;let t=0;const n=e.length;for(let r=0;r<n;r++)t+=Ee(e[r])?e[r]*e[r]:0;return t},SUMX2MY2:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;let n=0;for(let r=0;r<e.length;r++)n+=e[r]*e[r]-t[r]*t[r];return n},SUMX2PY2:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;let n=0;e=pe(ee(e)),t=pe(ee(t));for(let r=0;r<e.length;r++)n+=e[r]*e[r]+t[r]*t[r];return n},SUMXMY2:function(e,t){if(ae(e=pe(ee(e)),t=pe(ee(t))))return k;let n=0;e=ee(e),t=ee(t);for(let r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},SWITCH:function(){let e;if(arguments.length>0){const t=arguments[0],n=arguments.length-1,r=Math.floor(n/2);let i=!1;const o=n%2!=0,s=n%2==0?null:arguments[arguments.length-1];if(r)for(let n=0;n<r;n++)if(t===arguments[2*n+1]){e=arguments[2*n+2],i=!0;break}i||(e=o?s:D)}else e=k;return e},SYD:function(e,t,n,r){return ae(e=he(e),t=he(t),n=he(n),r=he(r))?k:0===n||r<1||r>n?T:(e-t)*(n-(r=parseInt(r,10))+1)*2/(n*(n+1))},T:function(e){return e instanceof Error||"string"==typeof e?e:""},TAN:function(e){return(e=he(e))instanceof Error?e:Math.tan(e)},TANH:function(e){if((e=he(e))instanceof Error)return e;const t=Math.exp(2*e);return(t-1)/(t+1)},TBILLEQ:function(e,t,n){return ae(e=fe(e),t=fe(t),n=he(n))?k:n<=0||e>t||t-e>31536e6?T:365*n/(360-n*Ot(e,t,!1))},TBILLPRICE:function(e,t,n){return ae(e=fe(e),t=fe(t),n=he(n))?k:n<=0||e>t||t-e>31536e6?T:100*(1-n*Ot(e,t,!1)/360)},TBILLYIELD:function(e,t,n){return ae(e=fe(e),t=fe(t),n=he(n))?k:n<=0||e>t||t-e>31536e6?T:360*(100-n)/(n*Ot(e,t,!1))},TDIST:ir,TDISTRT:or,TEXT:function(e,t){if(void 0===e||e instanceof Error||t instanceof Error)return D;if(e instanceof Date)return e.toISOString().slice(0,10);if(null==t)return"";if("number"==typeof t)return String(t);if("string"!=typeof t)return k;const n=t.startsWith("$")?"$":"",r=t.endsWith("%");return r&&(e*=100),e=(e=Vt(e,(t=t.replace(/%/g,"").replace(/\$/g,"")).includes(".")?t.split(".")[1].match(/0/g).length:0,!t.includes(","))).startsWith("-")?"-"+n+(e=e.replace("-","")):n+e,r&&(e+="%"),e},TEXTJOIN:function(e,t,...n){if("boolean"!=typeof t&&(t=ue(t)),arguments.length<3)return D;e=null!=e?e:"";let r=ee(n),i=t?r.filter((e=>e)):r;if(Array.isArray(e)){e=ee(e);let t=i.map((e=>[e])),n=0;for(let r=0;r<t.length-1;r++)t[r].push(e[n]),n++,n===e.length&&(n=0);return i=ee(t),i.join("")}return i.join(e)},TIME:function(e,t,n){return ae(e=he(e),t=he(t),n=he(n))?k:e<0||t<0||n<0?T:(3600*e+60*t+n)/86400},TIMEVALUE:function(e){return(e=fe(e))instanceof Error?e:(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())/86400},TINV:sr,TODAY:function(){return It(new Date)},TRANSPOSE:function(e){return e?ie(J(e)):D},TREND:function(e,t,n){if(ae(e=pe(ee(e)),t=pe(ee(t)),n=pe(ee(n))))return k;const r=Be(e,t),i=r[0],o=r[1],s=[];return n.forEach((e=>{s.push(i*e+o)})),s},TRIM:function(e){return(e=me(e))instanceof Error?e:e.replace(/\s+/g," ").trim()},TRIMMEAN:function(e,t){if(ae(e=pe(ee(e)),t=he(t)))return k;const n=yt(e.length*t,2)/2;return S.mean((r=re(e.sort(((e,t)=>e-t)),n),i=(i=n)||1,r&&"function"==typeof r.slice?r.slice(0,r.length-i):r));var r,i},TRUE:function(){return!0},TRUNC:function(e,t){const n=se(e=he(e),t=he(t));return n||(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},TTEST:ar,TYPE:function(e){return Ee(e)?1:$e(e)?2:xe(e)?4:we(e)?16:Array.isArray(e)?64:void 0},UNICHAR:Gt,UNICODE:Ht,UNIQUE:Me,UPPER:function(e){return(e=me(e))instanceof Error?e:e.toUpperCase()},VALUE:function(e){const t=se(e);if(t)return t;if("number"==typeof e)return e;if(_e(e)||(e=""),"string"!=typeof e)return k;const n=/(%)$/.test(e)||/^(%)/.test(e);if(""===(e=(e=(e=e.replace(/^[^0-9-]{0,3}/,"")).replace(/[^0-9]{0,3}$/,"")).replace(/[ ,]/g,"")))return 0;let r=Number(e);return isNaN(r)?k:(r=r||0,n&&(r*=.01),r)},VAR:lt,VARA:ct,VARP:lr,VARPA:ut,VARS:cr,VDB:function(){throw new Error("VDB is not implemented")},VLOOKUP:Ae,WEEKDAY:function(e,t){if((e=fe(e))instanceof Error)return e;void 0===t&&(t=1);const n=e.getDay();return At[t][n]},WEEKNUM:function(e,t){if((e=fe(e))instanceof Error)return e;if(void 0===t&&(t=1),21===t)return kt(e);const n=Mt[t];let r=new Date(e.getFullYear(),0,1);const i=r.getDay()<n?1:0;return r-=24*Math.abs(r.getDay()-n)*60*60*1e3,Math.floor((e-r)/864e5/7+1)+i},WEIBULL:ft,WEIBULLDIST:ur,WORKDAY:Ct,WORKDAYINTL:fr,XIRR:function(e,t,n){if(ae(e=pe(ee(e)),t=de(ee(t)),n=he(n)))return k;const r=(e,t,n)=>{const r=n+1;let i=e[0];for(let n=1;n<e.length;n++)i+=e[n]/Math.pow(r,Nt(t[n],t[0])/365);return i},i=(e,t,n)=>{const r=n+1;let i=0;for(let n=1;n<e.length;n++){const o=Nt(t[n],t[0])/365;i-=o*e[n]/Math.pow(r,o+1)}return i};let o=!1,s=!1;for(let t=0;t<e.length;t++)e[t]>0&&(o=!0),e[t]<0&&(s=!0);if(!o||!s)return T;let a,l,c,u=n=n||.1,f=!0;do{c=r(e,t,u),a=u-c/i(e,t,u),l=Math.abs(a-u),u=a,f=l>1e-10&&Math.abs(c)>1e-10}while(f);return u},XNPV:function(e,t,n){if(ae(e=he(e),t=pe(ee(t)),n=de(ee(n))))return k;let r=0;for(let i=0;i<t.length;i++)r+=t[i]/Math.pow(1+e,Nt(n[i],n[0])/365);return r},XOR:function(){const e=ee(arguments);let t=k;for(let n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===k&&(t=0),e[n]&&t++)}return t===k?t:!!(1&Math.floor(Math.abs(t)))},YEAR:function(e){return(e=fe(e))instanceof Error?e:e.getFullYear()},YEARFRAC:Pt,YIELD:function(){throw new Error("YIELD is not implemented")},YIELDDISC:function(){throw new Error("YIELDDISC is not implemented")},YIELDMAT:function(){throw new Error("YIELDMAT is not implemented")},Z:dt,ZTEST:dr,utils:Er});function Mr(e,t,n="pre"){"pre"===n&&t(e),"BinaryExpression"===e.type?(Mr(e.left,t),Mr(e.right,t)):"UnaryExpression"===e.type?Mr(e.value,t):"Function"===e.type&&e.arguments.forEach((e=>Mr(e,t))),"post"===n&&t(e)}function Ar(e){const t=new Set;return Mr(e,(e=>{"Function"===e.type&&t.add(e.name)})),t}function Sr(e){const t=new Set;return Mr(e,(e=>{"Reference"===e.type&&t.add(e.field)})),t}function Rr(e){return e.includes(".")}function Ir(e,t,n){const[r,i]=function(e){const[t,...n]=e.split(".");return[t,n.join(".")]}(t),o=n.getRelationForField(e,r);return o&&o.collection===e?[o,...Rr(i)?Ir(o.related_collection,i,n):[]]:[]}var Nr="object"==typeof global&&global&&global.Object===Object&&global,Or="object"==typeof self&&self&&self.Object===Object&&self,kr=Nr||Or||Function("return this")(),jr=kr.Symbol,Cr=Object.prototype,Tr=Cr.hasOwnProperty,Dr=Cr.toString,Pr=jr?jr.toStringTag:void 0;var Lr=Object.prototype.toString;var Fr=jr?jr.toStringTag:void 0;function qr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Fr&&Fr in Object(e)?function(e){var t=Tr.call(e,Pr),n=e[Pr];try{e[Pr]=void 0;var r=!0}catch(e){}var i=Dr.call(e);return r&&(t?e[Pr]=n:delete e[Pr]),i}(e):function(e){return Lr.call(e)}(e)}function Ur(e){return null!=e&&"object"==typeof e}function zr(e){return"symbol"==typeof e||Ur(e)&&"[object Symbol]"==qr(e)}var Vr=Array.isArray,Br=jr?jr.prototype:void 0,Gr=Br?Br.toString:void 0;function Hr(e){if("string"==typeof e)return e;if(Vr(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,Hr)+"";if(zr(e))return Gr?Gr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Yr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Wr(e){return e}function Xr(e){if(!Yr(e))return!1;var t=qr(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Kr,Zr=kr["__core-js_shared__"],Qr=(Kr=/[^.]+$/.exec(Zr&&Zr.keys&&Zr.keys.IE_PROTO||""))?"Symbol(src)_1."+Kr:"";var Jr=Function.prototype.toString;var ei=/^\[object .+?Constructor\]$/,ti=Function.prototype,ni=Object.prototype,ri=ti.toString,ii=ni.hasOwnProperty,oi=RegExp("^"+ri.call(ii).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function si(e){return!(!Yr(e)||(t=e,Qr&&Qr in t))&&(Xr(e)?oi:ei).test(function(e){if(null!=e){try{return Jr.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function ai(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return si(n)?n:void 0}var li=Object.create,ci=function(){function e(){}return function(t){if(!Yr(t))return{};if(li)return li(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var ui=Date.now;function fi(e){return function(){return e}}var di,hi,pi,mi=function(){try{var e=ai(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),gi=mi?function(e,t){return mi(e,"toString",{configurable:!0,enumerable:!1,value:fi(t),writable:!0})}:Wr,yi=(di=gi,hi=0,pi=0,function(){var e=ui(),t=16-(e-pi);if(pi=e,t>0){if(++hi>=800)return arguments[0]}else hi=0;return di.apply(void 0,arguments)}),_i=/^(?:0|[1-9]\d*)$/;function vi(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&_i.test(e))&&e>-1&&e%1==0&&e<t}function bi(e,t,n){"__proto__"==t&&mi?mi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function wi(e,t){return e===t||e!=e&&t!=t}var xi=Object.prototype.hasOwnProperty;function Ei(e,t,n){var r=e[t];xi.call(e,t)&&wi(r,n)&&(void 0!==n||t in e)||bi(e,t,n)}var $i=Math.max;function Mi(e,t){return yi(function(e,t,n){return t=$i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=$i(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,t,Wr),e+"")}function Ai(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Si(e){return null!=e&&Ai(e.length)&&!Xr(e)}var Ri=Object.prototype;function Ii(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ri)}function Ni(e){return Ur(e)&&"[object Arguments]"==qr(e)}var Oi=Object.prototype,ki=Oi.hasOwnProperty,ji=Oi.propertyIsEnumerable,Ci=Ni(function(){return arguments}())?Ni:function(e){return Ur(e)&&ki.call(e,"callee")&&!ji.call(e,"callee")};var Ti="object"==typeof exports&&exports&&!exports.nodeType&&exports,Di=Ti&&"object"==typeof module&&module&&!module.nodeType&&module,Pi=Di&&Di.exports===Ti?kr.Buffer:void 0,Li=(Pi?Pi.isBuffer:void 0)||function(){return!1},Fi={};Fi["[object Float32Array]"]=Fi["[object Float64Array]"]=Fi["[object Int8Array]"]=Fi["[object Int16Array]"]=Fi["[object Int32Array]"]=Fi["[object Uint8Array]"]=Fi["[object Uint8ClampedArray]"]=Fi["[object Uint16Array]"]=Fi["[object Uint32Array]"]=!0,Fi["[object Arguments]"]=Fi["[object Array]"]=Fi["[object ArrayBuffer]"]=Fi["[object Boolean]"]=Fi["[object DataView]"]=Fi["[object Date]"]=Fi["[object Error]"]=Fi["[object Function]"]=Fi["[object Map]"]=Fi["[object Number]"]=Fi["[object Object]"]=Fi["[object RegExp]"]=Fi["[object Set]"]=Fi["[object String]"]=Fi["[object WeakMap]"]=!1;var qi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ui=qi&&"object"==typeof module&&module&&!module.nodeType&&module,zi=Ui&&Ui.exports===qi&&Nr.process,Vi=function(){try{var e=Ui&&Ui.require&&Ui.require("util").types;return e||zi&&zi.binding&&zi.binding("util")}catch(e){}}(),Bi=Vi&&Vi.isTypedArray,Gi=Bi?function(e){return function(t){return e(t)}}(Bi):function(e){return Ur(e)&&Ai(e.length)&&!!Fi[qr(e)]},Hi=Object.prototype.hasOwnProperty;function Yi(e,t){var n=Vr(e),r=!n&&Ci(e),i=!n&&!r&&Li(e),o=!n&&!r&&!i&&Gi(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=a.length;for(var c in e)!t&&!Hi.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vi(c,l))||a.push(c);return a}var Wi=Object.prototype.hasOwnProperty;function Xi(e){if(!Yr(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ii(e),n=[];for(var r in e)("constructor"!=r||!t&&Wi.call(e,r))&&n.push(r);return n}function Ki(e){return Si(e)?Yi(e,!0):Xi(e)}var Zi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qi=/^\w*$/;var Ji=ai(Object,"create");var eo=Object.prototype.hasOwnProperty;var to=Object.prototype.hasOwnProperty;function no(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ro(e,t){for(var n=e.length;n--;)if(wi(e[n][0],t))return n;return-1}no.prototype.clear=function(){this.__data__=Ji?Ji(null):{},this.size=0},no.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},no.prototype.get=function(e){var t=this.__data__;if(Ji){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return eo.call(t,e)?t[e]:void 0},no.prototype.has=function(e){var t=this.__data__;return Ji?void 0!==t[e]:to.call(t,e)},no.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ji&&void 0===t?"__lodash_hash_undefined__":t,this};var io=Array.prototype.splice;function oo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oo.prototype.clear=function(){this.__data__=[],this.size=0},oo.prototype.delete=function(e){var t=this.__data__,n=ro(t,e);return!(n<0)&&(n==t.length-1?t.pop():io.call(t,n,1),--this.size,!0)},oo.prototype.get=function(e){var t=this.__data__,n=ro(t,e);return n<0?void 0:t[n][1]},oo.prototype.has=function(e){return ro(this.__data__,e)>-1},oo.prototype.set=function(e,t){var n=this.__data__,r=ro(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var so=ai(kr,"Map");function ao(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function lo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lo.prototype.clear=function(){this.size=0,this.__data__={hash:new no,map:new(so||oo),string:new no}},lo.prototype.delete=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},lo.prototype.get=function(e){return ao(this,e).get(e)},lo.prototype.has=function(e){return ao(this,e).has(e)},lo.prototype.set=function(e,t){var n=ao(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function co(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(co.Cache||lo),n}co.Cache=lo;var uo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fo=/\\(\\)?/g,ho=function(e){var t=co(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(uo,(function(e,n,r,i){t.push(r?i.replace(fo,"$1"):n||e)})),t}));function po(e,t){return Vr(e)?e:function(e,t){if(Vr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!zr(e))||Qi.test(e)||!Zi.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:ho(function(e){return null==e?"":Hr(e)}(e))}function mo(e){if("string"==typeof e||zr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function go(e,t,n){var r=null==e?void 0:function(e,t){for(var n=0,r=(t=po(t,e)).length;null!=e&&n<r;)e=e[mo(t[n++])];return n&&n==r?e:void 0}(e,t);return void 0===r?n:r}var yo=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),_o=Function.prototype,vo=Object.prototype,bo=_o.toString,wo=vo.hasOwnProperty,xo=bo.call(Object);function Eo(e){var t=this.__data__=new oo(e);this.size=t.size}Eo.prototype.clear=function(){this.__data__=new oo,this.size=0},Eo.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Eo.prototype.get=function(e){return this.__data__.get(e)},Eo.prototype.has=function(e){return this.__data__.has(e)},Eo.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oo){var r=n.__data__;if(!so||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new lo(r)}return n.set(e,t),this.size=n.size,this};var $o="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mo=$o&&"object"==typeof module&&module&&!module.nodeType&&module,Ao=Mo&&Mo.exports===$o?kr.Buffer:void 0,So=Ao?Ao.allocUnsafe:void 0;var Ro=kr.Uint8Array;function Io(e,t){var n,r,i=t?(n=e.buffer,r=new n.constructor(n.byteLength),new Ro(r).set(new Ro(n)),r):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var No,Oo=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),s=o.length;s--;){var a=o[No?s:++r];if(!1===t(i[a],a,i))break}return e};function ko(e,t,n){(void 0!==n&&!wi(e[t],n)||void 0===n&&!(t in e))&&bi(e,t,n)}function jo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Co(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),i?bi(n,a,l):Ei(n,a,l)}return n}(e,Ki(e))}function To(e,t,n,r,i,o,s){var a=jo(e,n),l=jo(t,n),c=s.get(l);if(c)ko(e,n,c);else{var u=o?o(a,l,n+"",e,t,s):void 0,f=void 0===u;if(f){var d=Vr(l),h=!d&&Li(l),p=!d&&!h&&Gi(l);u=l,d||h||p?Vr(a)?u=a:!function(e){return Ur(e)&&Si(e)}(a)?h?(f=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=So?So(n):new e.constructor(n);return e.copy(r),r}(l,!0)):p?(f=!1,u=Io(l,!0)):u=[]:u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(a):function(e){if(!Ur(e)||"[object Object]"!=qr(e))return!1;var t=yo(e);if(null===t)return!0;var n=wo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&bo.call(n)==xo}(l)||Ci(l)?(u=a,Ci(a)?u=Co(a):Yr(a)&&!Xr(a)||(u=function(e){return"function"!=typeof e.constructor||Ii(e)?{}:ci(yo(e))}(l))):f=!1}f&&(s.set(l,u),i(u,l,r,o,s),s.delete(l)),ko(e,n,u)}}function Do(e,t,n,r,i){e!==t&&Oo(t,(function(o,s){if(i||(i=new Eo),Yr(o))To(e,t,s,n,Do,r,i);else{var a=r?r(jo(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),ko(e,s,a)}}),Ki)}var Po,Lo=(Po=function(e,t,n,r){Do(e,t,n,r)},Mi((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Po.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!Yr(n))return!1;var r=typeof t;return!!("number"==r?Si(n)&&vi(t,n.length):"string"==r&&t in n)&&wi(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var s=t[n];s&&Po(e,s,n,i)}return e}))),Fo=Lo,qo=Object.prototype.hasOwnProperty;function Uo(e,t){return null!=e&&qo.call(e,t)}function zo(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=po(t,e)).length,o=!1;++r<i;){var s=mo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ai(i)&&vi(s,i)&&(Vr(e)||Ci(e))}(e,t,Uo)}function Vo(e,t,n){return null==e?e:function(e,t,n,r){if(!Yr(e))return e;for(var i=-1,o=(t=po(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var l=mo(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var u=a[l];void 0===(c=r?r(u,l,a):void 0)&&(c=Yr(u)?u:vi(t[i+1])?[]:{})}Ei(a,l,c),a=a[l]}return e}(e,t,n)}function Bo(e,t){return t.reduce((function(e,t){return{type:"BinaryExpression",operator:t[1],left:e,right:t[3]}}),e)}function Go(e,t,n,r){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,Go.prototype),i.expected=t,i.found=n,i.location=r,i.name="SyntaxError",i}function Ho(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}function Yo(e,t){var n,r,i,o,s={},a=(t=void 0!==t?t:{}).grammarSource,l={Formula:gt},c=gt,u="-",f="*",d="=",h="/",p="%",m="+",g="<=",y=">=",_="<",v=">",b="==",w="!=",x="(",E=")",$=",",M="{{",A="}}",S=".",R="true",I="false",N="0",O='"',k="'",j='\\"',C="\\'",T=/^[+=]/,D=/^[\-=]/,P=/^[A-Z]/,L=/^[A-Z0-9]/,F=/^[a-zA-Z_\-]/,q=/^[a-zA-Z0-9_\-]/,U=/^[0-9]/,z=/^[1-9]/,V=/^[ \t\n\r]/,B=ut("-",!1),G=ut("*",!1),H=ut("=",!1),Y=ut("/",!1),W=ut("%",!1),X=ut("+",!1),K=ft(["+","="],!1,!1),Z=ft(["-","="],!1,!1),Q=ut("<=",!1),J=ut(">=",!1),ee=ut("<",!1),te=ut(">",!1),ne=ut("==",!1),re=ut("!=",!1),ie=dt("parenthesis"),oe=ut("(",!1),se=ut(")",!1),ae=dt("constant or field"),le=ut(",",!1),ce=ft([["A","Z"]],!1,!1),ue=ft([["A","Z"],["0","9"]],!1,!1),fe=dt("field reference"),de=ut("{{",!1),he=ut("}}",!1),pe=dt("field name"),me=dt("simple field name"),ge=ft([["a","z"],["A","Z"],"_","-"],!1,!1),ye=ft([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),_e=dt("relational field name"),ve=ut(".",!1),be=dt("boolean"),we=ut("true",!0),xe=ut("false",!0),Ee=dt("number"),$e=ut("0",!1),Me=ft([["0","9"]],!1,!1),Ae=ft([["1","9"]],!1,!1),Se=dt("string"),Re=ut('"',!1),Ie=ut("'",!1),Ne=ut('\\"',!1),Oe={type:"any"},ke=ut("\\'",!1),je=dt("whitespace"),Ce=ft([" ","\t","\n","\r"],!1,!1),Te=function(e,t){return e&&"-"===e?{type:"UnaryExpression",operator:e,value:t}:t},De=function(e,t){return Bo(e,t)},Pe=function(e,t){return Bo(e,t)},Le=function(e,t){return Bo(e,t)},Fe=function(e,t){return Bo(e,t)},qe=function(e){return e},Ue=function(e,t){return{type:"Function",name:e,arguments:t}},ze=function(e,t,n){return function(e,t,n){return[...e?Array(e.length).fill(null):[],...t?[t]:[],...n?n.map((([e,t,n])=>n)):[]]}(e,t,n)},Ve=function(){return ct()},Be=function(e){return{type:"Reference",field:e}},Ge=function(){return ct()},He=function(e,t){return[e,...t.map((([e,t])=>t))].join(".")},Ye=function(){return{type:"Literal",value:"true"===ct().toLowerCase()}},We=function(){return{type:"Literal",value:parseFloat(ct())}},Xe=function(){return{type:"Literal",value:parseFloat(ct())}},Ke=function(){return{type:"Literal",value:parseFloat(ct())}},Ze=function(e){return{type:"Literal",value:e.join("")}},Qe=function(e){return{type:"Literal",value:e.join("")}},Je=function(){return ct()},et=function(){return'"'},tt=function(){return ct()},nt=function(){return"'"},rt=0|t.peg$currPos,it=rt,ot=[{line:1,column:1}],st=rt,at=t.peg$maxFailExpected||[],lt=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in l))throw new Error("Can't start parsing from rule \""+t.startRule+'".');c=l[t.startRule]}function ct(){return e.substring(it,rt)}function ut(e,t){return{type:"literal",text:e,ignoreCase:t}}function ft(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function dt(e){return{type:"other",description:e}}function ht(t){var n,r=ot[t];if(r)return r;if(t>=ot.length)n=ot.length-1;else for(n=t;!ot[--n];);for(r={line:(r=ot[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ot[t]=r,r}function pt(e,t,n){var r=ht(e),i=ht(t),o={source:a,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}};return n&&a&&"function"==typeof a.offset&&(o.start=a.offset(o.start),o.end=a.offset(o.end)),o}function mt(e){rt<st||(rt>st&&(st=rt,at=[]),at.push(e))}function gt(){var t;return(t=function(){var t,n,r,i;lt++,t=rt,40===e.charCodeAt(rt)?(n=x,rt++):(n=s,0===lt&&mt(oe));n!==s&&(r=$t())!==s?(41===e.charCodeAt(rt)?(i=E,rt++):(i=s,0===lt&&mt(se)),i!==s?(it=t,t=qe(r)):(rt=t,t=s)):(rt=t,t=s);lt--,t===s&&(n=s,0===lt&&mt(ie));return t}())===s&&(t=function(){var t;lt++,t=function(){var t,n,r,i,o;if(lt++,t=rt,(n=St())!==s)if(46===e.charCodeAt(rt)?(r=S,rt++):(r=s,0===lt&&mt(ve)),r!==s){for(i=[],o=Rt();o!==s;)i.push(o),o=Rt();it=t,t=We()}else rt=t,t=s;else rt=t,t=s;if(t===s){if(t=rt,46===e.charCodeAt(rt)?(n=S,rt++):(n=s,0===lt&&mt(ve)),n!==s){if(r=[],(i=Rt())!==s)for(;i!==s;)r.push(i),i=Rt();else r=s;r!==s?(it=t,t=Xe()):(rt=t,t=s)}else rt=t,t=s;t===s&&(t=rt,(n=St())!==s&&(it=t,n=Ke()),t=n)}lt--,t===s&&(n=s,0===lt&&mt(Ee));return t}(),t===s&&(t=function(){var t,n,r,i;lt++,t=rt,34===e.charCodeAt(rt)?(n=O,rt++):(n=s,0===lt&&mt(Re));if(n!==s){for(r=[],i=It();i!==s;)r.push(i),i=It();34===e.charCodeAt(rt)?(i=O,rt++):(i=s,0===lt&&mt(Re)),i!==s?(it=t,t=Ze(r)):(rt=t,t=s)}else rt=t,t=s;if(t===s)if(t=rt,39===e.charCodeAt(rt)?(n=k,rt++):(n=s,0===lt&&mt(Ie)),n!==s){for(r=[],i=Nt();i!==s;)r.push(i),i=Nt();39===e.charCodeAt(rt)?(i=k,rt++):(i=s,0===lt&&mt(Ie)),i!==s?(it=t,t=Qe(r)):(rt=t,t=s)}else rt=t,t=s;lt--,t===s&&(n=s,0===lt&&mt(Se));return t}())===s&&(t=function(){var t,n;lt++,t=rt,(n=e.substr(rt,4)).toLowerCase()===R?rt+=4:(n=s,0===lt&&mt(we));n===s&&((n=e.substr(rt,5)).toLowerCase()===I?rt+=5:(n=s,0===lt&&mt(xe)));n!==s&&(it=t,n=Ye());t=n,lt--,t===s&&(n=s,0===lt&&mt(be));return t}())===s&&(t=function(){var t,n,r,i;lt++,t=rt,e.substr(rt,2)===M?(n=M,rt+=2):(n=s,0===lt&&mt(de));n!==s?(Ot(),r=function(){var t;lt++,t=function(){var t,n,r,i,o,a;if(lt++,t=rt,n=At(),n!==s){for(r=[],i=rt,46===e.charCodeAt(rt)?(o=S,rt++):(o=s,0===lt&&mt(ve)),o!==s&&(a=At())!==s?i=o=[o,a]:(rt=i,i=s);i!==s;)r.push(i),i=rt,46===e.charCodeAt(rt)?(o=S,rt++):(o=s,0===lt&&mt(ve)),o!==s&&(a=At())!==s?i=o=[o,a]:(rt=i,i=s);it=t,t=He(n,r)}else rt=t,t=s;lt--,t===s&&(n=s,0===lt&&mt(_e));return t}(),lt--,t===s&&0===lt&&mt(pe);return t}(),r!==s?(Ot(),e.substr(rt,2)===A?(i=A,rt+=2):(i=s,0===lt&&mt(he)),i!==s?(it=t,t=Be(r)):(rt=t,t=s)):(rt=t,t=s)):(rt=t,t=s);lt--,t===s&&(n=s,0===lt&&mt(fe));return t}());lt--,t===s&&0===lt&&mt(ae);return t}())===s&&(t=function(){var t,n,r,i,o;t=rt,n=function(){var t,n,r,i;t=rt,n=e.charAt(rt),P.test(n)?rt++:(n=s,0===lt&&mt(ce));if(n!==s){for(r=[],i=e.charAt(rt),L.test(i)?rt++:(i=s,0===lt&&mt(ue));i!==s;)r.push(i),i=e.charAt(rt),L.test(i)?rt++:(i=s,0===lt&&mt(ue));it=t,t=Ve()}else rt=t,t=s;return t}(),n!==s?(40===e.charCodeAt(rt)?(r=x,rt++):(r=s,0===lt&&mt(oe)),r!==s?(i=function(){var t,n,r,i,o,a,l,c;t=rt,n=[],44===e.charCodeAt(rt)?(r=$,rt++):(r=s,0===lt&&mt(le));for(;r!==s;)n.push(r),44===e.charCodeAt(rt)?(r=$,rt++):(r=s,0===lt&&mt(le));r=$t(),r===s&&(r=null);i=[],o=rt,44===e.charCodeAt(rt)?(a=$,rt++):(a=s,0===lt&&mt(le));a!==s?(l=Ot(),(c=$t())!==s?o=a=[a,l,c]:(rt=o,o=s)):(rt=o,o=s);for(;o!==s;)i.push(o),o=rt,44===e.charCodeAt(rt)?(a=$,rt++):(a=s,0===lt&&mt(le)),a!==s?(l=Ot(),(c=$t())!==s?o=a=[a,l,c]:(rt=o,o=s)):(rt=o,o=s);return it=t,t=ze(n,r,i),t}(),41===e.charCodeAt(rt)?(o=E,rt++):(o=s,0===lt&&mt(se)),o!==s?(it=t,t=Ue(n,i)):(rt=t,t=s)):(rt=t,t=s)):(rt=t,t=s);return t}()),t}function yt(){var t,n,r;return t=rt,45===e.charCodeAt(rt)?(n=u,rt++):(n=s,0===lt&&mt(B)),n===s&&(n=null),(r=gt())!==s?(it=t,t=Te(n,r)):(rt=t,t=s),t}function _t(){var e,t,n,r,i,o,a,l;if(e=rt,(t=yt())!==s){for(n=[],r=rt,i=Ot(),(o=vt())!==s?(a=Ot(),(l=yt())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);r!==s;)n.push(r),r=rt,i=Ot(),(o=vt())!==s?(a=Ot(),(l=yt())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);it=e,e=De(t,n)}else rt=e,e=s;return e}function vt(){var t,n,r,i,o;return t=rt,n=rt,42===e.charCodeAt(rt)?(r=f,rt++):(r=s,0===lt&&mt(G)),r!==s?(i=rt,lt++,61===e.charCodeAt(rt)?(o=d,rt++):(o=s,0===lt&&mt(H)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),(t=n!==s?e.substring(t,rt):n)===s&&(t=rt,n=rt,47===e.charCodeAt(rt)?(r=h,rt++):(r=s,0===lt&&mt(Y)),r!==s?(i=rt,lt++,61===e.charCodeAt(rt)?(o=d,rt++):(o=s,0===lt&&mt(H)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),(t=n!==s?e.substring(t,rt):n)===s&&(t=rt,n=rt,37===e.charCodeAt(rt)?(r=p,rt++):(r=s,0===lt&&mt(W)),r!==s?(i=rt,lt++,61===e.charCodeAt(rt)?(o=d,rt++):(o=s,0===lt&&mt(H)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),t=n!==s?e.substring(t,rt):n)),t}function bt(){var e,t,n,r,i,o,a,l;if(e=rt,(t=_t())!==s){for(n=[],r=rt,i=Ot(),(o=wt())!==s?(a=Ot(),(l=_t())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);r!==s;)n.push(r),r=rt,i=Ot(),(o=wt())!==s?(a=Ot(),(l=_t())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);it=e,e=Pe(t,n)}else rt=e,e=s;return e}function wt(){var t,n,r,i,o;return t=rt,n=rt,43===e.charCodeAt(rt)?(r=m,rt++):(r=s,0===lt&&mt(X)),r!==s?(i=rt,lt++,o=e.charAt(rt),T.test(o)?rt++:(o=s,0===lt&&mt(K)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),(t=n!==s?e.substring(t,rt):n)===s&&(t=rt,n=rt,45===e.charCodeAt(rt)?(r=u,rt++):(r=s,0===lt&&mt(B)),r!==s?(i=rt,lt++,o=e.charAt(rt),D.test(o)?rt++:(o=s,0===lt&&mt(Z)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),t=n!==s?e.substring(t,rt):n),t}function xt(){var e,t,n,r,i,o,a,l;if(e=rt,(t=bt())!==s){for(n=[],r=rt,i=Ot(),(o=Et())!==s?(a=Ot(),(l=bt())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);r!==s;)n.push(r),r=rt,i=Ot(),(o=Et())!==s?(a=Ot(),(l=bt())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);it=e,e=Le(t,n)}else rt=e,e=s;return e}function Et(){var t,n,r,i,o;return e.substr(rt,2)===g?(t=g,rt+=2):(t=s,0===lt&&mt(Q)),t===s&&(e.substr(rt,2)===y?(t=y,rt+=2):(t=s,0===lt&&mt(J)),t===s&&(t=rt,n=rt,60===e.charCodeAt(rt)?(r=_,rt++):(r=s,0===lt&&mt(ee)),r!==s?(i=rt,lt++,60===e.charCodeAt(rt)?(o=_,rt++):(o=s,0===lt&&mt(ee)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),(t=n!==s?e.substring(t,rt):n)===s&&(t=rt,n=rt,62===e.charCodeAt(rt)?(r=v,rt++):(r=s,0===lt&&mt(te)),r!==s?(i=rt,lt++,62===e.charCodeAt(rt)?(o=v,rt++):(o=s,0===lt&&mt(te)),lt--,o===s?i=void 0:(rt=i,i=s),i!==s?n=r=[r,i]:(rt=n,n=s)):(rt=n,n=s),t=n!==s?e.substring(t,rt):n))),t}function $t(){var e,t,n,r,i,o,a,l;if(e=rt,(t=xt())!==s){for(n=[],r=rt,i=Ot(),(o=Mt())!==s?(a=Ot(),(l=xt())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);r!==s;)n.push(r),r=rt,i=Ot(),(o=Mt())!==s?(a=Ot(),(l=xt())!==s?r=i=[i,o,a,l]:(rt=r,r=s)):(rt=r,r=s);it=e,e=Fe(t,n)}else rt=e,e=s;return e}function Mt(){var t;return e.substr(rt,2)===b?(t=b,rt+=2):(t=s,0===lt&&mt(ne)),t===s&&(e.substr(rt,2)===w?(t=w,rt+=2):(t=s,0===lt&&mt(re))),t}function At(){var t,n,r,i;if(lt++,t=rt,n=e.charAt(rt),F.test(n)?rt++:(n=s,0===lt&&mt(ge)),n!==s){for(r=[],i=e.charAt(rt),q.test(i)?rt++:(i=s,0===lt&&mt(ye));i!==s;)r.push(i),i=e.charAt(rt),q.test(i)?rt++:(i=s,0===lt&&mt(ye));it=t,t=Ge()}else rt=t,t=s;return lt--,t===s&&(n=s,0===lt&&mt(me)),t}function St(){var t,n,r,i;if(48===e.charCodeAt(rt)?(t=N,rt++):(t=s,0===lt&&mt($e)),t===s)if(t=rt,n=function(){var t;t=e.charAt(rt),z.test(t)?rt++:(t=s,0===lt&&mt(Ae));return t}(),n!==s){for(r=[],i=Rt();i!==s;)r.push(i),i=Rt();t=n=[n,r]}else rt=t,t=s;return t}function Rt(){var t;return t=e.charAt(rt),U.test(t)?rt++:(t=s,0===lt&&mt(Me)),t}function It(){var t,n,r;return t=rt,n=rt,lt++,34===e.charCodeAt(rt)?(r=O,rt++):(r=s,0===lt&&mt(Re)),r===s&&(e.substr(rt,2)===j?(r=j,rt+=2):(r=s,0===lt&&mt(Ne))),lt--,r===s?n=void 0:(rt=n,n=s),n!==s?(e.length>rt?(r=e.charAt(rt),rt++):(r=s,0===lt&&mt(Oe)),r!==s?(it=t,t=Je()):(rt=t,t=s)):(rt=t,t=s),t===s&&(t=rt,e.substr(rt,2)===j?(n=j,rt+=2):(n=s,0===lt&&mt(Ne)),n!==s&&(it=t,n=et()),t=n),t}function Nt(){var t,n,r;return t=rt,n=rt,lt++,39===e.charCodeAt(rt)?(r=k,rt++):(r=s,0===lt&&mt(Ie)),r===s&&(e.substr(rt,2)===C?(r=C,rt+=2):(r=s,0===lt&&mt(ke))),lt--,r===s?n=void 0:(rt=n,n=s),n!==s?(e.length>rt?(r=e.charAt(rt),rt++):(r=s,0===lt&&mt(Oe)),r!==s?(it=t,t=tt()):(rt=t,t=s)):(rt=t,t=s),t===s&&(t=rt,e.substr(rt,2)===C?(n=C,rt+=2):(n=s,0===lt&&mt(ke)),n!==s&&(it=t,n=nt()),t=n),t}function Ot(){var t,n;for(lt++,t=[],n=e.charAt(rt),V.test(n)?rt++:(n=s,0===lt&&mt(Ce));n!==s;)t.push(n),n=e.charAt(rt),V.test(n)?rt++:(n=s,0===lt&&mt(Ce));return lt--,n=s,0===lt&&mt(je),t}if(n=c(),t.peg$library)return{peg$result:n,peg$currPos:rt,peg$FAILED:s,peg$maxFailExpected:at,peg$maxFailPos:st};if(n!==s&&rt===e.length)return n;throw n!==s&&rt<e.length&&mt({type:"end"}),r=at,i=st<e.length?e.charAt(st):null,o=st<e.length?pt(st,st+1):pt(st,st),new Go(Go.buildMessage(r,i),r,i,o)}function Wo(e){try{return Yo(e,{grammarSource:"formula"})}catch(t){throw Yr(t)&&"format"in t&&"function"==typeof t.format?t.format([{source:"formula",text:e}]):t}}function Xo(e,t){switch(e.type){case"Literal":return e.value;case"Reference":if(!zo(t,e.field))throw new Error(`Field not found: ${e.field}`);return go(t,e.field);case"UnaryExpression":return-Xo(e.value,t);case"BinaryExpression":return function(e,t){const n=Xo(e.left,t),r=Xo(e.right,t);switch(e.operator){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"<":return n<r;case"<=":return n<=r;case">":return n>r;case">=":return n>=r;case"==":return n==r;case"!=":return n!=r}}(e,t);case"Function":return function(e,t){const n=$r[e.name];if(!n)throw new Error(`Unknown function: ${e.name}`);const r=e.arguments.map((e=>Xo(e,t)));return n(...r)}(e,t);default:throw new Error(`Unknown node type: ${e.type}`)}}function Ko(e){const t=new Set;return Mr(e,(e=>{"Reference"===e.type&&t.add(e.field)})),t}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(Go,Error),Go.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,s=this.location.source+":"+o.line+":"+o.column;if(r){var a=this.location.end,l=Ho("",o.line.toString().length," "),c=r[i.line-1],u=(i.line===a.line?a.column:c.length+1)-i.column||1;t+="\n --\x3e "+s+"\n"+l+" |\n"+o.line+" | "+c+"\n"+l+" | "+Ho("",i.column-1," ")+Ho("",u,"^")}else t+="\n at "+s}return t},Go.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(s);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."};var Zo=(0).constructor;Zo.isFinite,Zo.isInteger,[].constructor.isArray;var Qo=function(){function e(e){this.size=e,this.reset()}return e.prototype.reset=function(){this.oldestIndex=0,this.map={},this.cachedKeys=new Array(this.size)},e.prototype.get=function(e){return this.map[e]},e.prototype.set=function(e,t){this.map[e]=t;var n=this.cachedKeys[this.oldestIndex];void 0!==n&&delete this.map[n],this.cachedKeys[this.oldestIndex]=e,this.oldestIndex++,this.oldestIndex%=this.size},e}();new Qo(1e3);var Jo={exports:{}};!function(e){!function(t,n){e.exports=n()}(self,(()=>{return e={7629:(e,t,n)=>{const r=n(375),i=n(8571),o=n(9474),s=n(1687),a=n(8652),l=n(8160),c=n(3292),u=n(6354),f=n(8901),d=n(9708),h=n(6914),p=n(2294),m=n(6133),g=n(1152),y=n(8863),_=n(2036),v={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new p.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return r("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(...e){return l.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(e){r(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),r(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const n in e){const i=e[n];r("function"==typeof i,"Alteration adjuster for",n,"must be a function"),t.$_terms.alterations.push({target:n,adjuster:i})}return t.$_temp.ruleset=!1,t}artifact(e){return r(void 0!==e,"Artifact cannot be undefined"),r(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return r(!1===e||"string"==typeof e,"Invalid to value"),r(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return r(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return r(e,"Missing error"),r(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e,t={}){return r(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(r(!t,"Cannot combine options with description"),t=e.description,e=e.method),r("function"==typeof e,"Method must be a function"),r(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(r("string"==typeof e,"id must be a non-empty string"),r(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(e){return r(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return r(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(...e){r(e.length,"Missing notes");for(const t of e)r(t&&"string"==typeof t,"Notes must be non-empty strings");return this._inner("notes",e)}only(e=!0){return r("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){r(e,"Missing preferences"),r(void 0===e.context,"Cannot override context"),r(void 0===e.externals,"Cannot override externals"),r(void 0===e.warnings,"Cannot override warnings"),r(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return r(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(e){return r(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),n=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:n}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...e){r(e.length,"Missing tags");for(const t of e)r(t&&"string"==typeof t,"Tags must be non-empty strings");return this._inner("tags",e)}unit(e){return r(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(...e){l.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(e,t){const n=this.clone();n.$_terms.whens||(n.$_terms.whens=[]);const i=c.when(n,e,t);if(!["any","link"].includes(n.type)){const e=i.is?[i]:i.switch;for(const t of e)r(!t.then||"any"===t.then.type||t.then.type===n.type,"Cannot combine",n.type,"with",t.then&&t.then.type),r(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===n.type,"Cannot combine",n.type,"with",t.otherwise&&t.otherwise.type)}return n.$_terms.whens.push(i),n.$_mutateRebuild()}cache(e){r(!this._inRuleset(),"Cannot set caching inside a ruleset"),r(!this._cache,"Cannot override schema cache"),r(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||a.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){r(l.isSchema(e),"Invalid schema object"),r("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),r(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),r(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const n=e.clone();for(const e of Object.keys(t))"type"!==e&&(n[e]=t[e]);t=n}t._ids.concat(e._ids),t._refs.register(e,m.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=_.merge(t._valids,e._valids,e._invalids),t._invalids=_.merge(t._invalids,e._invalids,e._valids);for(const n of e._singleRules.keys())t._singleRules.has(n)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==n)),t._singleRules.delete(n));for(const n of e._rules)e._definition.rules[n.method].multi||t._singleRules.set(n.name,n),t._rules.push(n);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else s(t._flags,e._flags);for(const n in e.$_terms){const r=e.$_terms[n];r?t.$_terms[n]?t.$_terms[n]=t.$_terms[n].concat(r):t.$_terms[n]=r.slice():t.$_terms[n]||(t.$_terms[n]=r)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return r(!e.base,"Cannot extend type with another base"),f.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){r(!this._inRuleset(),"Cannot fork inside a ruleset");let n=this;for(let r of[].concat(e))r=Array.isArray(r)?r:r.split("."),n=n._ids.fork(r,t,n);return n.$_temp.ruleset=!1,n}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),r(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const n=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;r(n>=0&&n<this._rules.length,"Cannot apply rules to empty ruleset");const o=this.clone();for(let s=n;s<o._rules.length;++s){const n=o._rules[s],a=i(n);for(const i in e)t.modifiers[i](a,e[i]),r(a.name===n.name,"Cannot change rule name");o._rules[s]=a,o._singleRules.get(a.name)===n&&o._singleRules.set(a.name,a)}return o.$_temp.ruleset=!1,o.$_mutateRebuild()}get ruleset(){r(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),r(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:n,adjuster:i}of this.$_terms.alterations)e.includes(n)&&(t=i(t),r(l.isSchema(t),"Alteration adjuster for",n,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(e,t){return y.entry(e,this,t)}validateAsync(e,t){return y.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),r(e&&"object"==typeof e,"Invalid options"),r(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)r("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const n=this._definition.rules[t.method],i=t.args;r(n,"Unknown rule",t.method);const o=this.clone();if(i){r(1===Object.keys(i).length||Object.keys(i).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in i){let s=i[e];if(n.argsByName){const a=n.argsByName.get(e);if(a.ref&&l.isResolvable(s))t._resolve.push(e),o.$_mutateRegister(s);else if(a.normalize&&(s=a.normalize(s),i[e]=s),a.assert){const t=l.validateArg(s,e,a);r(!t,t,"or reference")}}void 0!==s?i[e]=s:delete i[e]}}return n.multi||(o._ruleRemove(t.name,{clone:!1}),o._singleRules.set(t.name,t)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),n.priority?o._rules.unshift(t):o._rules.push(t),o}$_compile(e,t){return c.schema(this.$_root,e,t)}$_createError(e,t,n,r,i,o={}){const s=!1!==o.flags?this._flags:{},a=o.messages?h.merge(this._definition.messages,o.messages):this._definition.messages;return new u.Report(e,t,n,s,a,r,i)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,n,r){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,t.snapshot();const i=!y.validate(e,this,t,n,r).errors;return t.restore(),i}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),p.schema(this,e)||this}$_mutateRebuild(){return r(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,{source:t,name:n,path:r,key:i})=>{const o=this._definition[t][n]&&this._definition[t][n].register;!1!==o&&this.$_mutateRegister(e,{family:o,key:i})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:n}={}){this._refs.register(e,t),this._ids.register(e,{key:n})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t,n={}){r("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const i=this._definition.flags[e]||{};if(o(t,i.default)&&(t=void 0),o(t,this._flags[e]))return this;const s=!1!==n.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e,...t){return this[e][l.symbols.parent].call(this,...t)}$_validate(e,t,n){return y.validate(e,this,t,n)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=i(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const n in t){const r=t[n];e.$_terms[n]=r.init}return e.$_mutateRebuild()}_default(e,t,n={}){return l.assertOptions(n,"literal"),r(void 0!==t,"Missing",e,"value"),r("function"==typeof t||!n.literal,"Only function value supports literal option"),"function"==typeof t&&n.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,n){if(!this.$_terms.whens)return{schema:this};const r=[],i=[];for(let o=0;o<this.$_terms.whens.length;++o){const s=this.$_terms.whens[o];if(s.concat){r.push(s.concat),i.push(`${o}.concat`);continue}const a=s.ref?s.ref.resolve(e,t,n):e,l=s.is?[s]:s.switch,c=i.length;for(let c=0;c<l.length;++c){const{is:u,then:f,otherwise:d}=l[c],h=`${o}${s.switch?"."+c:""}`;if(u.$_match(a,t.nest(u,`${h}.is`),n)){if(f){const o=t.localize([...t.path,`${h}.then`],t.ancestors,t.schemas),{schema:s,id:a}=f._generate(e,o,n);r.push(s),i.push(`${h}.then${a?`(${a})`:""}`);break}}else if(d){const o=t.localize([...t.path,`${h}.otherwise`],t.ancestors,t.schemas),{schema:s,id:a}=d._generate(e,o,n);r.push(s),i.push(`${h}.otherwise${a?`(${a})`:""}`);break}}if(s.break&&i.length>c)break}const o=i.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",o),!o)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[o])return{schema:this.$_temp.whens[o],id:o};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,n));for(const e of r)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...r]),this.$_temp.whens[o]=s,{schema:s,id:o}}_inner(e,t,n={}){r(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const i=this.clone();return i.$_terms[e]&&!n.override||(i.$_terms[e]=[]),n.single?i.$_terms[e].push(t):i.$_terms[e].push(...t),i.$_temp.ruleset=!1,i}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const n=!1!==t.clone?this.clone():this;n._singleRules.delete(e);const r=[];for(let t=0;t<n._rules.length;++t){const i=n._rules[t];i.name!==e||i.keep?r.push(i):n._inRuleset()&&t<n.$_temp.ruleset&&--n.$_temp.ruleset}return n._rules=r,n}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const n=this.clone(),i=e[0]===l.symbols.override;if(i&&(e=e.slice(1)),!n[t]&&e.length?n[t]=new _:i&&(n[t]=e.length?new _:null,n.$_mutateRebuild()),!n[t])return n;i&&n[t].override();for(const i of e){r(void 0!==i,"Cannot call allow/valid/invalid with undefined"),r(i!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";n[e]&&(n[e].remove(i),n[e].length||(r("_valids"===t||!n._flags.only,"Setting invalid value",i,"leaves schema rejecting all values due to previous valid rule"),n[e]=null)),n[t].add(i,n._refs)}return n}}};v.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},v.Base.prototype.isImmutable=!0,v.Base.prototype.deny=v.Base.prototype.invalid,v.Base.prototype.disallow=v.Base.prototype.invalid,v.Base.prototype.equal=v.Base.prototype.valid,v.Base.prototype.exist=v.Base.prototype.required,v.Base.prototype.not=v.Base.prototype.invalid,v.Base.prototype.options=v.Base.prototype.prefs,v.Base.prototype.preferences=v.Base.prototype.prefs,e.exports=new v.Base},8652:(e,t,n)=>{const r=n(375),i=n(8571),o=n(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(e={}){o.assertOptions(e,["max"]),r(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let n=this._map.get(e);if(n)return n.value=t,void this._list.first(n);n=this._list.unshift({key:e,value:t}),this._map.set(e,n),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),i(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:n}=e;return t.prev=n,n&&(n.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,n)=>{const r=n(375),i=n(7916),o=n(5934);let s,a;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=o.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t,n="Options"){r(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const i=Object.keys(e).filter((e=>!t.includes(e)));r(0===i.length,`${n} contain unknown keys: ${i}`)},t.checkPreferences=function(e){a=a||n(3378);const t=a.preferences.validate(e);if(t.error)throw new i([t.error.details[0].message])},t.compare=function(e,t,n){switch(n){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e,n={}){const i=e&&e[t.symbols.any];return!!i&&(r(n.legacy||i.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,r){s=s||n(6914),e=e||{},r=r||{};const i=Object.assign({},e,r);return r.errors&&e.errors&&(i.errors=Object.assign({},e.errors,r.errors),i.errors.wrap=Object.assign({},e.errors.wrap,r.errors.wrap)),r.messages&&(i.messages=s.compile(r.messages,e.messages)),delete i[t.symbols.prefs],i},t.tryWithPath=function(e,t,n={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,n.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,n,{assert:r,message:i}){if(t.isSchema(r)){const t=r.validate(e);if(!t.error)return;return t.error.message}if(!r(e))return n?`${n} ${i}`:i},t.verifyFlat=function(e,t){for(const n of e)r(!Array.isArray(n),"Method no longer accepts array arguments:",t)}},3292:(e,t,n)=>{const r=n(375),i=n(8160),o=n(6133),s={};t.schema=function(e,t,n={}){i.assertOptions(n,["appendPath","override"]);try{return s.schema(e,t,n)}catch(e){throw n.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,t,n){r(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(r(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const o=(t,...r)=>!1!==n.override?t.valid(e.override,...r):t.valid(...r);if(s.simple(t))return o(e,t);if("function"==typeof t)return e.custom(t);if(r("object"==typeof t,"Invalid schema content:",typeof t),i.isResolvable(t))return o(e,t);if(i.isSchema(t))return t;if(Array.isArray(t)){for(const n of t)if(!s.simple(n))return e.alternatives().try(...t);return o(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?o(e.date(),t):(r(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return o.isRef(e)?e:o.create(e,t)},t.compile=function(e,n,o={}){i.assertOptions(o,["legacy"]);const a=n&&n[i.symbols.any];if(a)return r(o.legacy||a.version===i.version,"Cannot mix different versions of joi schemas:",a.version,i.version),n;if("object"!=typeof n||!o.legacy)return t.schema(e,n,{appendPath:!0});const l=s.walk(n);return l?l.compile(l.root,n):t.schema(e,n,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[i.symbols.any];if(t)return{root:e[t.root],compile:t.compile};r(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const n=s.walk(e[t]);if(n)return n}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,n,a){if(void 0===a&&(r(n&&"object"==typeof n,"Missing options"),a=n,n=o.create(".")),Array.isArray(a)&&(a={switch:a}),i.assertOptions(a,["is","not","then","otherwise","switch","break"]),i.isSchema(n))return r(void 0===a.is,'"is" can not be used with a schema condition'),r(void 0===a.not,'"not" can not be used with a schema condition'),r(void 0===a.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:n,then:a.then,otherwise:a.otherwise,break:a.break});if(r(o.isRef(n)||"string"==typeof n,"Invalid condition:",n),r(void 0===a.not||void 0===a.is,'Cannot combine "is" with "not"'),void 0===a.switch){let l=a;void 0!==a.not&&(l={is:a.not,then:a.otherwise,otherwise:a.then,break:a.break});let c=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return r(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),r(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===a.is||o.isRef(a.is)||i.isSchema(a.is)||(c=c.required()),s.condition(e,{ref:t.ref(n),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}r(Array.isArray(a.switch),'"switch" must be an array'),r(void 0===a.is,'Cannot combine "switch" with "is"'),r(void 0===a.not,'Cannot combine "switch" with "not"'),r(void 0===a.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(n),switch:[],break:a.break};for(let t=0;t<a.switch.length;++t){const n=a.switch[t],s=t===a.switch.length-1;i.assertOptions(n,s?["is","then","otherwise"]:["is","then"]),r(void 0!==n.is,'Switch statement missing "is"'),r(void 0!==n.then,'Switch statement missing "then"');const c={is:e.$_compile(n.is),then:e.$_compile(n.then)};if(o.isRef(n.is)||i.isSchema(n.is)||(c.is=c.is.required()),s){r(void 0===a.otherwise||void 0===n.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==a.otherwise?a.otherwise:n.otherwise;void 0!==t&&(r(void 0===l.break,"Cannot specify both otherwise and break"),c.otherwise=e.$_compile(t))}l.switch.push(c)}return l},s.condition=function(e,t){for(const n of["then","otherwise"])void 0===t[n]?delete t[n]:t[n]=e.$_compile(t[n]);return t}},6354:(e,t,n)=>{const r=n(5688),i=n(8160),o=n(3328);t.Report=class{constructor(e,n,r,i,o,s,a){if(this.code=e,this.flags=i,this.messages=o,this.path=s.path,this.prefs=a,this.state=s,this.value=n,this.message=null,this.template=null,this.local=r||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,n){return t.template(this.value,e,n||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const n of e)"object"!=typeof n&&("string"==typeof n?(t&&(t+="."),t+=n):t+=`[${n}]`);return t},t.template=function(e,t,n,r,s){if(!t)return;if(o.isTemplate(t))return"root"!==n?t:null;let a=s.errors.language;if(i.isResolvable(a)&&(a=a.resolve(e,r,s)),a&&t[a]){if(void 0!==t[a][n])return t[a][n];if(void 0!==t[a]["*"])return t[a]["*"]}return t[n]?t[n]:t["*"]},t.label=function(e,n,r,i){if(!r.errors.label)return"";if(e.label)return e.label;let o=n.path;return"key"===r.errors.label&&n.path.length>1&&(o=n.path.slice(-1)),t.path(o)||t.template(null,r.messages,"root",n,r)||i&&t.template(null,i,"root",n,r)||"value"},t.process=function(e,n,r){if(!e)return null;const{override:i,message:o,details:s}=t.details(e);if(i)return i;if(r.errors.stack)return new t.ValidationError(o,s,n);const a=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(o,s,n);return Error.stackTraceLimit=a,l},t.details=function(e,t={}){let n=[];const r=[];for(const i of e){if(i instanceof Error){if(!1!==t.override)return{override:i};const e=i.toString();n.push(e),r.push({message:e,type:"override",context:{error:i}});continue}const e=i.toString();n.push(e),r.push({message:e,path:i.path.filter((e=>"object"!=typeof e)),type:i.code,context:i.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:r}},t.ValidationError=class extends Error{constructor(e,t,n){super(e),this._original=n,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=r.error},8901:(e,t,n)=>{const r=n(375),i=n(8571),o=n(8160),s=n(6914),a={};t.type=function(e,t){const n=Object.getPrototypeOf(e),l=i(n),c=e._assign(Object.create(l)),u=Object.assign({},t);delete u.base,l._definition=u;const f=n._definition||{};u.messages=s.merge(f.messages,u.messages),u.properties=Object.assign({},f.properties,u.properties),c.type=u.type,u.flags=Object.assign({},f.flags,u.flags);const d=Object.assign({},f.terms);if(u.terms)for(const e in u.terms){const t=u.terms[e];r(void 0===c.$_terms[e],"Invalid term override for",u.type,e),c.$_terms[e]=t.init,d[e]=t}u.terms=d,u.args||(u.args=f.args),u.prepare=a.prepare(u.prepare,f.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=a.coerce(u.coerce,f.coerce),u.validate=a.validate(u.validate,f.validate);const h=Object.assign({},f.rules);if(u.rules)for(const e in u.rules){const t=u.rules[e];r("object"==typeof t,"Invalid rule definition for",u.type,e);let n=t.method;if(void 0===n&&(n=function(){return this.$_addRule(e)}),n&&(r(!l[e],"Rule conflict in",u.type,e),l[e]=n),r(!h[e],"Rule conflict in",u.type,e),h[e]=t,t.alias){const e=[].concat(t.alias);for(const n of e)l[n]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),r(!t.argsByName.has(e.name),"Duplicated argument name",e.name),o.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}u.rules=h;const p=Object.assign({},f.modifiers);if(u.modifiers)for(const e in u.modifiers){r(!l[e],"Rule conflict in",u.type,e);const t=u.modifiers[e];r("function"==typeof t,"Invalid modifier definition for",u.type,e);const n=function(t){return this.rule({[e]:t})};l[e]=n,p[e]=t}if(u.modifiers=p,u.overrides){l._super=n,c.$_super={};for(const e in u.overrides)r(n[e],"Cannot override missing",e),u.overrides[e][o.symbols.parent]=n[e],c.$_super[e]=n[e].bind(c);Object.assign(l,u.overrides)}u.cast=Object.assign({},f.cast,u.cast);const m=Object.assign({},f.manifest,u.manifest);return m.build=a.build(u.manifest&&u.manifest.build,f.manifest&&f.manifest.build),u.manifest=m,u.rebuild=a.rebuild(u.rebuild,f.rebuild),c},a.build=function(e,t){return e&&t?function(n,r){return t(e(n,r),r)}:e||t},a.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(n,r){let i;if((!t.from||t.from.includes(typeof n))&&(i=t.method(n,r),i)){if(i.errors||void 0===i.value)return i;n=i.value}if(!e.from||e.from.includes(typeof n)){const t=e.method(n,r);if(t)return t}return i}}:e||t},a.prepare=function(e,t){return e&&t?function(n,r){const i=e(n,r);if(i){if(i.errors||void 0===i.value)return i;n=i.value}return t(n,r)||i}:e||t},a.rebuild=function(e,t){return e&&t?function(n){t(n),e(n)}:e||t},a.validate=function(e,t){return e&&t?function(n,r){const i=t(n,r);if(i){if(i.errors&&(!Array.isArray(i.errors)||i.errors.length))return i;n=i.value}return e(n,r)||i}:e||t}},5107:(e,t,n)=>{const r=n(375),i=n(8571),o=n(8652),s=n(8160),a=n(3292),l=n(6354),c=n(8901),u=n(9708),f=n(6133),d=n(3328),h=n(1152);let p;const m={types:{alternatives:n(4946),any:n(8068),array:n(546),boolean:n(4937),date:n(7500),function:n(390),link:n(8785),number:n(3832),object:n(8966),string:n(7417),symbol:n(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(m.types))};for(const t of e._types)e[t]=function(...e){return r(!e.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),m.generate(this,m.types[t],e)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(...e){return this.any()[t](...e)};Object.assign(e,m.methods);for(const t in m.aliases){const n=m.aliases[t];e[t]=e[n]}return e.x=e.expression,h.setup&&h.setup(e),e}};m.methods={ValidationError:l.ValidationError,version:s.version,cache:o.provider,assert(e,t,...n){m.assert(e,t,!0,n)},attempt:(e,t,...n)=>m.assert(e,t,!1,n),build(e){return r("function"==typeof u.build,"Manifest functionality disabled"),u.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return a.compile(this,e,t)},defaults(e){r("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const n of t._types){const i=e(t[n]());r(s.isSchema(i),"modifier must return a valid schema object"),t[n]=function(...e){return m.generate(this,i,e)}}return t},expression:(...e)=>new d(...e),extend(...e){s.verifyFlat(e,"extend"),p=p||n(3378),r(e.length,"You need to provide at least one extension"),this.assert(e,p.extensions);const t=Object.assign({},this);t._types=new Set(t._types);for(let n of e){"function"==typeof n&&(n=n(t)),this.assert(n,p.extension);const e=m.expandExtension(n,t);for(const n of e){r(void 0===t[n.type]||t._types.has(n.type),"Cannot override name",n.type);const e=n.base||this.any(),i=c.type(e,n);t._types.add(n.type),t[n.type]=function(...e){return m.generate(this,i,e)}}}return t},isError:l.ValidationError.isError,isExpression:d.isTemplate,isRef:f.isRef,isSchema:s.isSchema,in:(...e)=>f.in(...e),override:s.symbols.override,ref:(...e)=>f.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in m.aliases)e[t]=this[t]();return e}},m.assert=function(e,t,n,r){const o=r[0]instanceof Error||"string"==typeof r[0]?r[0]:null,a=null!==o?r[1]:r[0],c=t.validate(e,s.preferences({errors:{stack:!0}},a||{}));let u=c.error;if(!u)return c.value;if(o instanceof Error)throw o;const f=n&&"function"==typeof u.annotate?u.annotate():u.message;throw u instanceof l.ValidationError==0&&(u=i(u)),u.message=o?`${o} ${f}`:f,u},m.generate=function(e,t,n){return r(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&n.length?t._definition.args(t,...n):t},m.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const n=[];for(const r of t._types)if(e.type.test(r)){const i=Object.assign({},e);i.type=r,i.base=t[r](),n.push(i)}return n},e.exports=m.root()},6914:(e,t,n)=>{const r=n(375),i=n(8571),o=n(3328);t.compile=function(e,t){if("string"==typeof e)return r(!t,"Cannot set single message string"),new o(e);if(o.isTemplate(e))return r(!t,"Cannot set single message template"),e;r("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?i(t):{};for(let n in e){const i=e[n];if("root"===n||o.isTemplate(i)){t[n]=i;continue}if("string"==typeof i){t[n]=new o(i);continue}r("object"==typeof i&&!Array.isArray(i),"Invalid message for",n);const s=n;for(n in t[s]=t[s]||{},i){const e=i[n];"root"===n||o.isTemplate(e)?t[s][n]=e:(r("string"==typeof e,"Invalid message for",n,"in",s),t[s][n]=new o(e))}}return t},t.decompile=function(e){const t={};for(let n in e){const r=e[n];if("root"===n){t.root=r;continue}if(o.isTemplate(r)){t[n]=r.describe({compact:!0});continue}const i=n;for(n in t[i]={},r){const e=r[n];"root"!==n?t[i][n]=e.describe({compact:!0}):t[i].root=e}}return t},t.merge=function(e,n){if(!e)return t.compile(n);if(!n)return e;if("string"==typeof n)return new o(n);if(o.isTemplate(n))return n;const s=i(e);for(let e in n){const t=n[e];if("root"===e||o.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new o(t);continue}r("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const i=e;for(e in s[i]=s[i]||{},t){const n=t[e];"root"===e||o.isTemplate(n)?s[i][e]=n:(r("string"==typeof n,"Invalid message for",e,"in",i),s[i][e]=new o(n))}}return s}},2294:(e,t,n)=>{const r=n(375),i=n(8160),o=n(6133),s={};t.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,n]of e._byId.entries())r(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,n);for(const[t,n]of e._byKey.entries())r(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,n)}fork(e,t,n){const o=this._collect(e);o.push({schema:n});const a=o.shift();let l={id:a.id,schema:t(a.schema)};r(i.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of o)l={id:e.id,schema:s.fork(e.schema,l.id,l.schema)};return l.schema}labels(e,t=[]){const n=e[0],r=this._get(n);if(!r)return[...t,...e].join(".");const i=e.slice(1);return t=[...t,r.schema._flags.label||n],i.length?r.schema._ids.labels(i,t):t.join(".")}reach(e,t=[]){const n=e[0],i=this._get(n);r(i,"Schema does not contain path",[...t,...e].join("."));const o=e.slice(1);return o.length?i.schema._ids.reach(o,[...t,n]):i.schema}register(e,{key:t}={}){if(!e||!i.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const n=e._flags.id;if(n){const t=this._byId.get(n);r(!t||t.schema===e,"Cannot add different schemas with the same id:",n),r(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,{schema:e,id:n})}t&&(r(!this._byKey.has(t),"Schema already contains key:",t),r(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,t=[],n=[]){const i=e[0],o=this._get(i);r(o,"Schema does not contain path",[...t,...e].join(".")),n=[o,...n];const s=e.slice(1);return s.length?o.schema._ids._collect(s,[...t,i],n):n}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(e,n,r){const i=t.schema(e,{each:(e,{key:t})=>{if(n===(e._flags.id||t))return r},ref:!1});return i?i.$_mutateRebuild():e},t.schema=function(e,t){let n;for(const r in e._flags){if("_"===r[0])continue;const i=s.scan(e._flags[r],{source:"flags",name:r},t);void 0!==i&&(n=n||e.clone(),n._flags[r]=i)}for(let r=0;r<e._rules.length;++r){const i=e._rules[r],o=s.scan(i.args,{source:"rules",name:i.name},t);if(void 0!==o){n=n||e.clone();const t=Object.assign({},i);t.args=o,n._rules[r]=t,n._singleRules.get(i.name)===i&&n._singleRules.set(i.name,t)}}for(const r in e.$_terms){if("_"===r[0])continue;const i=s.scan(e.$_terms[r],{source:"terms",name:r},t);void 0!==i&&(n=n||e.clone(),n.$_terms[r]=i)}return n},s.scan=function(e,t,n,r,a){const l=r||[];if(null===e||"object"!=typeof e)return;let c;if(Array.isArray(e)){for(let r=0;r<e.length;++r){const i="terms"===t.source&&"keys"===t.name&&e[r].key,o=s.scan(e[r],t,n,[r,...l],i);void 0!==o&&(c=c||e.slice(),c[r]=o)}return c}if(!1!==n.schema&&i.isSchema(e)||!1!==n.ref&&o.isRef(e)){const r=n.each(e,{...t,path:l,key:a});if(r===e)return;return r}for(const r in e){if("_"===r[0])continue;const i=s.scan(e[r],t,n,[r,...l],a);void 0!==i&&(c=c||Object.assign({},e),c[r]=i)}return c}},6133:(e,t,n)=>{const r=n(375),i=n(8571),o=n(9621),s=n(8160);let a;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e,t={}){r("string"==typeof e,"Invalid reference key:",e),s.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),r(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const n=Object.assign({},l.defaults,t);delete n.prefix;const i=n.separator,o=l.context(e,i,t.prefix);if(n.type=o.type,e=o.key,"value"===n.type)if(o.root&&(r(!i||e[0]!==i,"Cannot specify relative path with root prefix"),n.ancestor="root",e||(e=null)),i&&i===e)e=null,n.ancestor=0;else if(void 0!==n.ancestor)r(!i||!e||e[0]!==i,"Cannot combine prefix with ancestor option");else{const[t,r]=l.ancestor(e,i);r&&""===(e=e.slice(r))&&(e=null),n.ancestor=t}return n.path=i?null===e?[]:e.split(i):[e],new l.Ref(n)},t.in=function(e,n={}){return t.create(e,{...n,in:!0})},t.isRef=function(e){return!!e&&!!e[s.symbols.ref]},l.Ref=class{constructor(e){r("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),r([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),r(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),r(!e.map||Array.isArray(e.map),"options.map must be an array"),r(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),r("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,n,i,o={}){return r(!this.in||o.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(n.context,t,o):"local"===this.type?this._resolve(i,t,o):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,o):(r(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,o)):this._resolve(e,t,o)}_resolve(e,t,n){let r;if("value"===this.type&&t.mainstay.shadow&&!1!==n.shadow&&(r=t.mainstay.shadow.get(this.absolute(t))),void 0===r&&(r=o(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(r=this.adjust(r)),this.map){const e=this.map.get(r);void 0!==e&&(r=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,r),r}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},l.Ref.prototype[s.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t,n={}){if(e=e.trim(),n){const r=void 0===n.global?"$":n.global;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"global"};const i=void 0===n.local?"#":n.local;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"local"};const o=void 0===n.root?"/":n.root;if(o!==t&&e.startsWith(o))return{key:e.slice(o.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let n=2;for(;e[n]===t;)++n;return[n-1,n]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,r){if(e)if(r=void 0===r?t.toParent:r,Array.isArray(e))for(const t of e)this.register(t,r);else if(s.isSchema(e))for(const t of e._refs.refs)t.ancestor-r>=0&&this.refs.push({ancestor:t.ancestor-r,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-r>=0&&this.refs.push({ancestor:e.ancestor-r,root:e.root}),a=a||n(3328),a.isTemplate(e)&&this.register(e.refs(),r)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=i(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,n)=>{const r=n(5107),i={};i.wrap=r.string().min(1).max(2).allow(!1),t.preferences=r.object({allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),context:r.object(),convert:r.boolean(),dateFormat:r.valid("date","iso","string","time","utc"),debug:r.boolean(),errors:{escapeHtml:r.boolean(),label:r.valid("path","key",!1),language:[r.string(),r.object().ref()],render:r.boolean(),stack:r.boolean(),wrap:{label:i.wrap,array:i.wrap,string:i.wrap}},externals:r.boolean(),messages:r.object(),noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:r.valid("required","optional","forbidden"),skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()}).strict(),i.nameRx=/^[a-zA-Z0-9]\w*$/,i.rule=r.object({alias:r.array().items(r.string().pattern(i.nameRx)).single(),args:r.array().items(r.string(),r.object({name:r.string().pattern(i.nameRx).required(),ref:r.boolean(),assert:r.alternatives([r.function(),r.object().schema()]).conditional("ref",{is:!0,then:r.required()}),normalize:r.function(),message:r.string().when("assert",{is:r.function(),then:r.required()})})),convert:r.boolean(),manifest:r.boolean(),method:r.function().allow(!1),multi:r.boolean(),validate:r.function()}),t.extension=r.object({type:r.alternatives([r.string(),r.object().regex()]).required(),args:r.function(),cast:r.object().pattern(i.nameRx,r.object({from:r.function().maxArity(1).required(),to:r.function().minArity(1).maxArity(2).required()})),base:r.object().schema().when("type",{is:r.object().regex(),then:r.forbidden()}),coerce:[r.function().maxArity(3),r.object({method:r.function().maxArity(3).required(),from:r.array().items(r.string()).single()})],flags:r.object().pattern(i.nameRx,r.object({setter:r.string(),default:r.any()})),manifest:{build:r.function().arity(2)},messages:[r.object(),r.string()],modifiers:r.object().pattern(i.nameRx,r.function().minArity(1).maxArity(2)),overrides:r.object().pattern(i.nameRx,r.function()),prepare:r.function().maxArity(3),rebuild:r.function().arity(1),rules:r.object().pattern(i.nameRx,i.rule),terms:r.object().pattern(i.nameRx,r.object({init:r.array().allow(null).required(),manifest:r.object().pattern(/.+/,[r.valid("schema","single"),r.object({mapped:r.object({from:r.string().required(),to:r.string().required()}).required()})])})),validate:r.function().maxArity(3)}).strict(),t.extensions=r.array().items(r.object(),r.function().arity(1)).strict(),i.desc={buffer:r.object({buffer:r.string()}),func:r.object({function:r.function().required(),options:{literal:!0}}),override:r.object({override:!0}),ref:r.object({ref:r.object({type:r.valid("value","global","local"),path:r.array().required(),separator:r.string().length(1).allow(!1),ancestor:r.number().min(0).integer().allow("root"),map:r.array().items(r.array().length(2)).min(1),adjust:r.function(),iterables:r.boolean(),in:r.boolean(),render:r.boolean()}).required()}),regex:r.object({regex:r.string().min(3)}),special:r.object({special:r.valid("deep").required()}),template:r.object({template:r.string().required(),options:r.object()}),value:r.object({value:r.alternatives([r.object(),r.array()]).required()})},i.desc.entity=r.alternatives([r.array().items(r.link("...")),r.boolean(),r.function(),r.number(),r.string(),i.desc.buffer,i.desc.func,i.desc.ref,i.desc.regex,i.desc.special,i.desc.template,i.desc.value,r.link("/")]),i.desc.values=r.array().items(null,r.boolean(),r.function(),r.number().allow(1/0,-1/0),r.string().allow(""),r.symbol(),i.desc.buffer,i.desc.func,i.desc.override,i.desc.ref,i.desc.regex,i.desc.template,i.desc.value),i.desc.messages=r.object().pattern(/.+/,[r.string(),i.desc.template,r.object().pattern(/.+/,[r.string(),i.desc.template])]),t.description=r.object({type:r.string().required(),flags:r.object({cast:r.string(),default:r.any(),description:r.string(),empty:r.link("/"),failover:i.desc.entity,id:r.string(),label:r.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:r.boolean(),unit:r.string()}).unknown(),preferences:{allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),convert:r.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:r.boolean(),label:["path","key"],language:[r.string(),i.desc.ref],wrap:{label:i.wrap,array:i.wrap}},externals:r.boolean(),messages:i.desc.messages,noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:["required","optional","forbidden"],skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()},allow:i.desc.values,invalid:i.desc.values,rules:r.array().min(1).items({name:r.string().required(),args:r.object().min(1),keep:r.boolean(),message:[r.string(),i.desc.messages],warn:r.boolean()}),keys:r.object().pattern(/.*/,r.link("/")),link:i.desc.ref}).pattern(/^[a-z]\w*$/,r.any())},493:(e,t,n)=>{const r=n(8571),i=n(9621),o=n(8160),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,n){this.path=e,this.ancestors=t,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(e,t=null,n=null){const r=new s.State(e,t,this);return n&&r.schemas&&(r.schemas=[s.schemas(n),...r.schemas]),r}nest(e,t){const n=new s.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[s.schemas(e),...n.schemas],n.debug=t,n}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=r(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return o.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,n){if(!e.length)return;if("strip"===n&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let r=this._values;for(let t=0;t<e.length;++t){const n=e[t];let i=r.get(n);i||(i=new Map,r.set(n,i)),r=i}r[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return i(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const n=e.slice(0,-1),r=e[e.length-1],o=i(this._values,n,{iterables:!0});t?o.set(r,t):o&&o.delete(r)}}},3328:(e,t,n)=>{const r=n(375),i=n(8571),o=n(5277),s=n(1447),a=n(8160),l=n(6354),c=n(6133),u={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=u.Template=class{constructor(e,t){if(r("string"==typeof e,"Template source must be a string"),r(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,t){const{functions:e,...n}=t;this._settings=Object.keys(n).length?i(n):void 0,this._functions=e,this._functions&&(r(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),r(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=u.encode(this.source),t=u.split(e);let n=!1;const r=[],i=t.shift();i&&r.push(i);for(const e of t){const t="{"!==e[0],i=t?"}":"}}",o=e.indexOf(i);if(-1===o||"{"===e[1]){r.push(`{${u.decode(e)}`);continue}let s=e.slice(t?0:1,o);const a=":"===s[0];a&&(s=s.slice(1));const l=this._ref(u.decode(s),{raw:t,wrapped:a});r.push(l),"string"!=typeof l&&(n=!0);const c=e.slice(o+i.length);c&&r.push(u.decode(c))}n?this._template=r:this.rendered=r.join("")}static date(e,t){return u.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new u.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[a.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,n,r){return this._template&&1===this._template.length?this._part(this._template[0],e,t,n,r,{}):this.render(e,t,n,r)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,n,r,i={}){if(!this.isDynamic())return this.rendered;const s=[];for(const a of this._template)if("string"==typeof a)s.push(a);else{const l=this._part(a,e,t,n,r,i),c=u.stringify(l,e,t,n,r,i);if(void 0!==c){const e=a.raw||!1===(i.errors&&i.errors.escapeHtml)?c:o(c);s.push(u.wrap(e,a.wrapped&&n.errors.wrap.label))}}return s.join("")}_ref(e,{raw:t,wrapped:n}){const r=[],i=e=>{const t=c.create(e,this._settings);return r.push(t),e=>{const n=t.resolve(...e);return void 0!==n?n:null}};try{const t=this._functions?{...u.functions,...this._functions}:u.functions;var o=new s.Parser(e,{reference:i,functions:t,constants:u.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(o.single){if("reference"===o.single.type){const e=r[0];return{ref:e,raw:t,refs:r,wrapped:n||"local"===e.type&&"label"===e.key}}return u.stringify(o.single.value)}return{formula:o,raw:t,refs:r}}toString(){return this.source}},u.Template.prototype[a.symbols.template]=!0,u.Template.prototype.isImmutable=!0,u.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>u.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>u.closes.slice(0,t.length)))},u.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},u.split=function(e){const t=[];let n="";for(let r=0;r<e.length;++r){const i=e[r];if("{"===i){let i="";for(;r+1<e.length&&"{"===e[r+1];)i+="{",++r;t.push(n),n=i}else n+=i}return t.push(n),t},u.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},u.stringify=function(e,t,n,r,i,o={}){const s=typeof e,a=r&&r.errors&&r.errors.wrap||{};let l=!1;if(c.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,n,r,i,{in:e.in,...o})),null===e)return"null";if("string"===s)return u.wrap(e,o.arrayItems&&a.string);if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return u.Template.date(e,r);if(e instanceof Map){const t=[];for(const[n,r]of e.entries())t.push(`${n.toString()} -> ${r.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const f=[];for(const s of e)f.push(u.stringify(s,t,n,r,i,{arrayItems:!0,...o}));return u.wrap(f.join(", "),!l&&a.array)},u.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},u.functions={if:(e,t,n)=>e?t:n,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,n,r,i,o]=this,s=o.messages;if(!s)return"";const a=l.template(t,s[0],e,n,r)||l.template(t,s[1],e,n,r);return a?a.render(t,n,r,i,o):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,n)=>{const r=n(375),i=n(1687),o=n(8068),s=n(8160),a=n(3292),l=n(6354),c=n(6133),u={};e.exports=o.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:c.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,t){const{schema:n,error:r,state:o,prefs:s}=t;if(n._flags.match){const t=[],a=[];for(let r=0;r<n.$_terms.matches.length;++r){const i=n.$_terms.matches[r],l=o.nest(i.schema,`match.${r}`);l.snapshot();const c=i.schema.$_validate(e,l,s);c.errors?(a.push(c.errors),l.restore()):(t.push(c.value),l.commit())}if(0===t.length)return{errors:r("alternatives.any",{details:a.map((e=>l.details(e,{override:!1})))})};if("one"===n._flags.match)return 1===t.length?{value:t[0]}:{errors:r("alternatives.one")};if(t.length!==n.$_terms.matches.length)return{errors:r("alternatives.all",{details:a.map((e=>l.details(e,{override:!1})))})};const c=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema)));return c(n)?{value:t.reduce(((e,t)=>i(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const a=[];for(let t=0;t<n.$_terms.matches.length;++t){const r=n.$_terms.matches[t];if(r.schema){const n=o.nest(r.schema,`match.${t}`);n.snapshot();const i=r.schema.$_validate(e,n,s);if(!i.errors)return n.commit(),i;n.restore(),a.push({schema:r.schema,reports:i.errors});continue}const i=r.ref?r.ref.resolve(e,o,s):e,l=r.is?[r]:r.switch;for(let n=0;n<l.length;++n){const a=l[n],{is:c,then:u,otherwise:f}=a,d=`match.${t}${r.switch?"."+n:""}`;if(c.$_match(i,o.nest(c,`${d}.is`),s)){if(u)return u.$_validate(e,o.nest(u,`${d}.then`),s)}else if(f)return f.$_validate(e,o.nest(f,`${d}.otherwise`),s)}}return u.errors(a,t)},rules:{conditional:{method(e,t){r(!this._flags._endedSwitch,"Unreachable condition"),r(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),r(void 0===t.break,"Cannot use break option with alternatives conditional");const n=this.clone(),i=a.when(n,e,t),o=i.is?[i]:i.switch;for(const e of o)if(e.then&&e.otherwise){n.$_setFlag("_endedSwitch",!0,{clone:!1});break}return n.$_terms.matches.push(i),n.$_mutateRebuild()}},match:{method(e){if(r(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)r(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(...e){r(e.length,"Missing alternative schemas"),s.verifyFlat(e,"try"),r(!this._flags._endedSwitch,"Unreachable condition");const t=this.clone();for(const n of e)t.$_terms.matches.push({schema:t.$_compile(n)});return t.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,n)=>"is"!==n.path[0]&&"string"!=typeof t._flags.label?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const n of t.matches){const{schema:t,ref:r,is:i,not:o,then:s,otherwise:a}=n;e=t?e.try(t):r?e.conditional(r,{is:i,then:s,not:o,otherwise:a,switch:n.switch}):e.conditional(i,{then:s,otherwise:a})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),u.errors=function(e,{error:t,state:n}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const r=new Set,i=[];for(const{reports:o,schema:s}of e){if(o.length>1)return u.unmatched(e,t);const a=o[0];if(a instanceof l.Report==0)return u.unmatched(e,t);if(a.state.path.length!==n.path.length){i.push({type:s.type,report:a});continue}if("any.only"===a.code){for(const e of a.local.valids)r.add(e);continue}const[c,f]=a.code.split(".");"base"===f?r.add(c):i.push({type:s.type,report:a})}return i.length?1===i.length?{errors:i[0].report}:u.unmatched(e,t):{errors:t("alternatives.types",{types:[...r]})}},u.unmatched=function(e,t){const n=[];for(const t of e)n.push(...t.reports);return{errors:t("alternatives.match",l.details(n,{override:!1}))}}},8068:(e,t,n)=>{const r=n(375),i=n(7629),o=n(8160),s=n(6914);e.exports=i.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return r("function"==typeof e,"Method must be a function"),r(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,{method:n}){try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){r(o.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return r(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate:(e,t,{code:n,local:r})=>t.error(n,r),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=s.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const n in t){const r=t[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const t of r)e=e[n.slice(0,-1)](t);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const t of r)e=e.shared(t)}else for(const t of r){const{ref:n,is:r,not:i,then:o,otherwise:s,concat:a}=t;e=a?e.concat(a):n?e.when(n,{is:r,not:i,then:o,otherwise:s,switch:t.switch,break:t.break}):e.when(r,{then:o,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:n}of r)t[e]=n;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,n)=>{const r=n(375),i=n(9474),o=n(9621),s=n(8068),a=n(8160),l=n(3292),c={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:n,prefs:r}){if(!Array.isArray(e))return;const i=t.$_getRule("sort");return i?c.sort(t,e,i.args.options,n,r):void 0}},validate(e,{schema:t,error:n}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[a.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:n,error:r},{schema:i}){const o=[e,...t.ancestors];for(let r=0;r<e.length;++r){const s=t.localize([...t.path,r],o,i);if(i.$_match(e[r],s,n))return e}const s=i._flags.label;return s?r("array.hasKnown",{patternLabel:s}):r("array.hasUnknown",null)},multi:!0},items:{method(...e){a.verifyFlat(e,"items");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const r=a.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});t.$_terms.items.push(r)}return t.$_mutateRebuild()},validate(e,{schema:t,error:n,state:r,prefs:i,errorsArray:o}){const s=t.$_terms._requireds.slice(),l=t.$_terms.ordered.slice(),u=[...t.$_terms._inclusions,...s],f=!e[a.symbols.arraySingle];delete e[a.symbols.arraySingle];const d=o();let h=e.length;for(let o=0;o<h;++o){const a=e[o];let p=!1,m=!1;const g=f?o:new Number(o),y=[...r.path,g];if(!t._flags.sparse&&void 0===a){if(d.push(n("array.sparse",{key:g,path:y,pos:o,value:void 0},r.localize(y))),i.abortEarly)return d;l.shift();continue}const _=[e,...r.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(a,r.localize(y,_,e),i,{presence:"ignore"})){if(d.push(n("array.excludes",{pos:o,value:a},r.localize(y))),i.abortEarly)return d;p=!0,l.shift();break}if(p)continue;if(t.$_terms.ordered.length){if(l.length){const s=l.shift(),u=s.$_validate(a,r.localize(y,_,s),i);if(u.errors){if(d.push(...u.errors),i.abortEarly)return d}else if("strip"===s._flags.result)c.fastSplice(e,o),--o,--h;else{if(!t._flags.sparse&&void 0===u.value){if(d.push(n("array.sparse",{key:g,path:y,pos:o,value:void 0},r.localize(y))),i.abortEarly)return d;continue}e[o]=u.value}continue}if(!t.$_terms.items.length){if(d.push(n("array.orderedLength",{pos:o,limit:t.$_terms.ordered.length})),i.abortEarly)return d;break}}const v=[];let b=s.length;for(let l=0;l<b;++l){const u=r.localize(y,_,s[l]);u.snapshot();const f=s[l].$_validate(a,u,i);if(v[l]=f,!f.errors){if(u.commit(),e[o]=f.value,m=!0,c.fastSplice(s,l),--l,--b,!t._flags.sparse&&void 0===f.value&&(d.push(n("array.sparse",{key:g,path:y,pos:o,value:void 0},r.localize(y))),i.abortEarly))return d;break}u.restore()}if(m)continue;const w=i.stripUnknown&&!!i.stripUnknown.arrays||!1;b=u.length;for(const l of u){let u;const f=s.indexOf(l);if(-1!==f)u=v[f];else{const s=r.localize(y,_,l);if(s.snapshot(),u=l.$_validate(a,s,i),!u.errors){s.commit(),"strip"===l._flags.result?(c.fastSplice(e,o),--o,--h):t._flags.sparse||void 0!==u.value?e[o]=u.value:(d.push(n("array.sparse",{key:g,path:y,pos:o,value:void 0},r.localize(y))),p=!0),m=!0;break}s.restore()}if(1===b){if(w){c.fastSplice(e,o),--o,--h,m=!0;break}if(d.push(...u.errors),i.abortEarly)return d;p=!0;break}}if(!p&&(t.$_terms._inclusions.length||t.$_terms._requireds.length)&&!m){if(w){c.fastSplice(e,o),--o,--h;continue}if(d.push(n("array.includes",{pos:o,value:a},r.localize(y))),i.abortEarly)return d}}return s.length&&c.fillMissedErrors(t,d,s,e,r,i),l.length&&(c.fillOrderedErrors(t,d,l,e,r,i),d.length||c.fillDefault(l,e,r,i)),d.length?d:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:r,operator:i,args:o})=>a.compare(e.length,n,i)?e:t.error("array."+r,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){a.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const r=a.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});c.validateSingle(r,t),t.$_mutateRegister(r),t.$_terms.ordered.push(r)}return t.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return r(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(e={}){a.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),r(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,{error:t,state:n,prefs:r,schema:i},{options:o}){const{value:s,errors:a}=c.sort(i,e,o,n,r);if(a)return a;for(let n=0;n<e.length;++n)if(e[n]!==s[n])return t("array.sort",{order:o.order,by:o.by?o.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e,t={}){r(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),a.assertOptions(t,["ignoreUndefined","separator"]);const n={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const r=a.default(t.separator,".");n.path=r?e.split(r):[e]}else n.comparator=e;return this.$_addRule(n)},validate(e,{state:t,error:n,schema:s},{comparator:a,options:l},{comparator:c,path:u}){const f={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},d=c||i,h=l.ignoreUndefined;for(let i=0;i<e.length;++i){const s=u?o(e[i],u):e[i],l=c?f.custom:f[typeof s];if(r(l,"Failed to find unique map container for type",typeof s),l instanceof Map){const r=l.entries();let o;for(;!(o=r.next()).done;)if(d(o.value[0],s)){const r=t.localize([...t.path,i],[e,...t.ancestors]),s={pos:i,value:e[i],dupePos:o.value[1],dupeValue:e[o.value[1]]};return u&&(s.path=a),n("array.unique",s,r)}l.set(s,i)}else{if((!h||void 0!==s)&&void 0!==l[s]){const r={pos:i,value:e[i],dupePos:l[s],dupeValue:e[l[s]]};return u&&(r.path=a),n("array.unique",r,t.localize([...t.path,i],[e,...t.ancestors]))}l[s]=i}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)c.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)c.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,n,r,i,o){const s=[];let a=0;for(const e of n){const t=e._flags.label;t?s.push(t):++a}s.length?a?t.push(e.$_createError("array.includesRequiredBoth",r,{knownMisses:s,unknownMisses:a},i,o)):t.push(e.$_createError("array.includesRequiredKnowns",r,{knownMisses:s},i,o)):t.push(e.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:a},i,o))},c.fillOrderedErrors=function(e,t,n,r,i,o){const s=[];for(const e of n)"required"===e._flags.presence&&s.push(e);s.length&&c.fillMissedErrors(e,t,s,r,i,o)},c.fillDefault=function(e,t,n,r){const i=[];let o=!0;for(let s=e.length-1;s>=0;--s){const a=e[s],l=[t,...n.ancestors],c=a.$_validate(void 0,n.localize(n.path,l,a),r).value;if(o){if(void 0===c)continue;o=!1}i.unshift(c)}i.length&&t.push(...i)},c.fastSplice=function(e,t){let n=t;for(;n<e.length;)e[n++]=e[n];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(r(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,n,r,i){const o="ascending"===n.order?1:-1,s=-1*o,a=o,l=(l,u)=>{let f=c.compare(l,u,s,a);if(null!==f)return f;if(n.by&&(l=n.by.resolve(l,r,i),u=n.by.resolve(u,r,i)),f=c.compare(l,u,s,a),null!==f)return f;const d=typeof l;if(d!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,r,i);if("number"!==d&&"string"!==d)throw e.$_createError("array.sort.unsupported",t,{type:d},r,i);return"number"===d?(l-u)*o:l<u?s:a};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},c.compare=function(e,t,n,r){return e===t?0:void 0===e?1:void 0===t?-1:null===e?r:null===t?n:null}},4937:(e,t,n)=>{const r=n(375),i=n(8068),o=n(8160),s=n(2036),a={isBool:function(e){return"boolean"==typeof e}};e.exports=i.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const n=t._flags.sensitive?e:e.toLowerCase();e="true"===n||"false"!==n&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...e){o.verifyFlat(e,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new s;for(let n=0;n<e.length;++n){const i=e[n];r(void 0!==i,"Cannot call truthy with undefined"),t.$_terms.truthy.add(i)}return t}},falsy:{method(...e){o.verifyFlat(e,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new s;for(let n=0;n<e.length;++n){const i=e[n];r(void 0!==i,"Cannot call falsy with undefined"),t.$_terms.falsy.add(i)}return t}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:a.isBool,to:(e,t)=>e?1:0},string:{from:a.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,n)=>{const r=n(375),i=n(8068),o=n(8160),s=n(3328),a={isDate:function(e){return e instanceof Date}};e.exports=i.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:a.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:n,prefs:r}){if(e instanceof Date&&!isNaN(e.getTime()))return;const i=t._flags.format;return r.convert&&i&&"string"==typeof e?{value:e,errors:n("date.format",{format:i})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:n},{name:r,operator:i,args:s}){const a="now"===n?Date.now():n.getTime();return o.compare(e.getTime(),a,i)?e:t.error("date."+r,{limit:s.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:a.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return r(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(e="javascript"){return r(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:a.isDate,to:(e,t)=>e.getTime()},string:{from:a.isDate,to:(e,{prefs:t})=>s.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),a.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return o.isIsoDate(e)?a.date(e.toString()):null;const n=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return a.date(1*e);if("unix"===t)return a.date(1e3*e);if("string"==typeof n)return null}return a.date(e)},a.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,n)=>{const r=n(375),i=n(7824);e.exports=i.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return r(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate:(e,t,{n:n})=>e.length===n?e:t.error("function.arity",{n:n})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return r(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate:(e,t,{n:n})=>e.length>=n?e:t.error("function.minArity",{n:n})},maxArity:{method(e){return r(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate:(e,t,{n:n})=>e.length<=n?e:t.error("function.maxArity",{n:n})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,n)=>{const r=n(978),i=n(375),o=n(8571),s=n(3652),a=n(8068),l=n(8160),c=n(3292),u=n(6354),f=n(6133),d=n(3328),h={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=a.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:n,state:r,prefs:i}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=h.clone(e,i);const o=[];if(t.$_terms.renames&&!h.rename(t,e,r,i,o))return{value:e,errors:o};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:o};const s=new Set(Object.keys(e));if(t.$_terms.keys){const n=[e,...r.ancestors];for(const a of t.$_terms.keys){const t=a.key,l=e[t];s.delete(t);const c=r.localize([...r.path,t],n,a),u=a.schema.$_validate(l,c,i);if(u.errors){if(i.abortEarly)return{value:e,errors:u.errors};void 0!==u.value&&(e[t]=u.value),o.push(...u.errors)}else"strip"===a.schema._flags.result||void 0===u.value&&void 0!==l?delete e[t]:void 0!==u.value&&(e[t]=u.value)}}if(s.size||t._flags._hasPatternMatch){const n=h.unknown(t,e,s,o,r,i);if(n)return n}if(t.$_terms.dependencies)for(const n of t.$_terms.dependencies){if(null!==n.key&&!1===h.isPresent(n.options)(n.key.resolve(e,r,i,null,{shadow:!1})))continue;const s=h.dependencies[n.rel](t,n,e,r,i);if(s){const n=t.$_createError(s.code,e,s.context,r,i);if(i.abortEarly)return{value:e,errors:n};o.push(n)}}return{value:e,errors:o}},rules:{and:{method(...e){return l.verifyFlat(e,"and"),h.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,n){d.isTemplate(e)||(e=c.ref(e)),i(void 0===n||"string"==typeof n,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const r=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:n}});return r.$_mutateRegister(e),r.$_mutateRegister(t),r},validate(e,{error:t,prefs:n,state:r},{subject:i,schema:o,message:s}){const a=i.resolve(e,r,n),l=f.isRef(i)?i.absolute(r):[];return o.$_match(a,r.localize(l,[e,...r.ancestors],o),n)?e:t("object.assert",{subject:i,message:s})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return i("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate:(e,t,{constructor:n,name:r})=>e instanceof n?e:t.error("object.instance",{type:r,value:e}),args:["constructor","name"]},keys:{method(e){i(void 0===e||"object"==typeof e,"Object schema must be a valid object"),i(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new h.Keys;for(const n in e)l.tryWithPath((()=>t.$_terms.keys.push({key:n,schema:this.$_compile(e[n])})),n)}else t.$_terms.keys=new h.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:r,operator:i,args:o})=>l.compare(Object.keys(e).length,n,i)?e:t.error("object."+r,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return l.verifyFlat(e,"nand"),h.dependency(this,"nand",null,e)}},or:{method(...e){return l.verifyFlat(e,"or"),h.dependency(this,"or",null,e)}},oxor:{method(...e){return h.dependency(this,"oxor",null,e)}},pattern:{method(e,t,n={}){const r=e instanceof RegExp;r||(e=this.$_compile(e,{appendPath:!0})),i(void 0!==t,"Invalid rule"),l.assertOptions(n,["fallthrough","matches"]),r&&i(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];const s={[r?"regex":"schema"]:e,rule:t};return n.matches&&(s.matches=this.$_compile(n.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),o.$_mutateRegister(s.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),n.fallthrough&&(s.fallthrough=!0),o.$_terms.patterns.push(s),o.$_mutateRegister(t),o}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>f.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t,n={}){i("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),i("string"==typeof t||t instanceof d,"Invalid rename to argument"),i(t!==e,"Cannot rename key to same name:",e),l.assertOptions(n,["alias","ignoreUndefined","override","multiple"]);const o=this.clone();o.$_terms.renames=o.$_terms.renames||[];for(const t of o.$_terms.renames)i(t.from!==e,"Cannot rename the same key multiple times");return t instanceof d&&o.$_mutateRegister(t),o.$_terms.renames.push({from:e,to:t,options:r(h.renameDefaults,n)}),o}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:n})=>!l.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,n={}){return h.dependency(this,"with",e,t,n)}},without:{method(e,t,n={}){return h.dependency(this,"without",e,t,n)}},xor:{method(...e){return l.verifyFlat(e,"xor"),h.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const n of e.$_terms.keys)l.tryWithPath((()=>t.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);e.$_terms.keys=new h.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:n,key:r=null,peers:i,options:o}of t.dependencies)e=h.dependency(e,n,r,i,o);if(t.patterns)for(const{regex:n,schema:r,rule:i,fallthrough:o,matches:s}of t.patterns)e=e.pattern(n||r,i,{fallthrough:o,matches:s});if(t.renames)for(const{from:n,to:r,options:i}of t.renames)e=e.rename(n,r,i);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),h.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return o(e,{shallow:!0});const n=Object.create(Object.getPrototypeOf(e));return Object.assign(n,e),n}const n=function(...t){return e.apply(this,t)};return n.prototype=o(e.prototype),Object.defineProperty(n,"name",{value:e.name,writable:!1}),Object.defineProperty(n,"length",{value:e.length,writable:!1}),Object.assign(n,e),n},h.dependency=function(e,t,n,r,o){i(null===n||"string"==typeof n,t,"key must be a strings"),o||(o=r.length>1&&"object"==typeof r[r.length-1]?r.pop():{}),l.assertOptions(o,["separator","isPresent"]),r=[].concat(r);const s=l.default(o.separator,"."),a=[];for(const e of r)i("string"==typeof e,t,"peers must be strings"),a.push(c.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==n&&(n=c.ref(n,{separator:s,ancestor:0,prefix:!1}));const u=e.clone();return u.$_terms.dependencies=u.$_terms.dependencies||[],u.$_terms.dependencies.push(new h.Dependency(t,n,a,r,o)),u},h.dependencies={and(e,t,n,r,i){const o=[],s=[],a=t.peers.length,l=h.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(n,r,i,null,{shadow:!1}))?o.push(e.key):s.push(e.key);if(o.length!==a&&s.length!==a)return{code:"object.and",context:{present:s,presentWithLabels:h.keysToLabels(e,s),missing:o,missingWithLabels:h.keysToLabels(e,o)}}},nand(e,t,n,r,i){const o=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,r,i,null,{shadow:!1}))&&o.push(e.key);if(o.length!==t.peers.length)return;const a=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:h.keysToLabels(e,a),peers:l,peersWithLabels:h.keysToLabels(e,l)}}},or(e,t,n,r,i){const o=h.isPresent(t.options);for(const e of t.peers)if(o(e.resolve(n,r,i,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)}}},oxor(e,t,n,r,i){const o=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,r,i,null,{shadow:!1}))&&o.push(e.key);if(!o.length||1===o.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return a.present=o,a.presentWithLabels=h.keysToLabels(e,o),{code:"object.oxor",context:a}},with(e,t,n,r,i){const o=h.isPresent(t.options);for(const s of t.peers)if(!1===o(s.resolve(n,r,i,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:h.keysToLabels(e,s.key)}}},without(e,t,n,r,i){const o=h.isPresent(t.options);for(const s of t.peers)if(o(s.resolve(n,r,i,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:h.keysToLabels(e,s.key)}}},xor(e,t,n,r,i){const o=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,r,i,null,{shadow:!1}))&&o.push(e.key);if(1===o.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return 0===o.length?{code:"object.missing",context:a}:(a.present=o,a.presentWithLabels=h.keysToLabels(e,o),{code:"object.xor",context:a})}},h.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},h.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},h.rename=function(e,t,n,r,i){const o={};for(const s of e.$_terms.renames){const a=[],l="string"!=typeof s.from;if(l)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const n=s.from.exec(e);n&&a.push({from:e,to:s.to,match:n})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||a.push(s);for(const c of a){const a=c.from;let u=c.to;if(u instanceof d&&(u=u.render(t,n,r,c.match)),a!==u){if(!s.options.multiple&&o[u]&&(i.push(e.$_createError("object.rename.multiple",t,{from:a,to:u,pattern:l},n,r)),r.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,u)&&!s.options.override&&!o[u]&&(i.push(e.$_createError("object.rename.override",t,{from:a,to:u,pattern:l},n,r)),r.abortEarly))return!1;void 0===t[a]?delete t[u]:t[u]=t[a],o[u]=!0,s.options.alias||delete t[a]}}}return!0},h.unknown=function(e,t,n,r,i,o){if(e.$_terms.patterns){let s=!1;const a=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),l=[t,...i.ancestors];for(const s of n){const c=t[s],u=[...i.path,s];for(let f=0;f<e.$_terms.patterns.length;++f){const d=e.$_terms.patterns[f];if(d.regex){const e=d.regex.test(s);if(i.mainstay.tracer.debug(i,"rule",`pattern.${f}`,e?"pass":"error"),!e)continue}else if(!d.schema.$_match(s,i.nest(d.schema,`pattern.${f}`),o))continue;n.delete(s);const h=i.localize(u,l,{schema:d.rule,key:s}),p=d.rule.$_validate(c,h,o);if(p.errors){if(o.abortEarly)return{value:t,errors:p.errors};r.push(...p.errors)}if(d.matches&&a[f].push(s),t[s]=p.value,!d.fallthrough)break}}if(s)for(let n=0;n<a.length;++n){const s=a[n];if(!s)continue;const c=e.$_terms.patterns[n].matches,f=i.localize(i.path,l,c),d=c.$_validate(s,f,o);if(d.errors){const n=u.details(d.errors,{override:!1});n.matches=s;const a=e.$_createError("object.pattern.match",t,n,i,o);if(o.abortEarly)return{value:t,errors:a};r.push(a)}}}if(n.size&&(e.$_terms.keys||e.$_terms.patterns)){if(o.stripUnknown&&!e._flags.unknown||o.skipFunctions){const e=!(!o.stripUnknown||!0!==o.stripUnknown&&!o.stripUnknown.objects);for(const r of n)e?(delete t[r],n.delete(r)):"function"==typeof t[r]&&n.delete(r)}if(!l.default(e._flags.unknown,o.allowUnknown))for(const s of n){const n=i.localize([...i.path,s],[]),a=e.$_createError("object.unknown",t[s],{child:s},n,o,{flags:!1});if(o.abortEarly)return{value:t,errors:a};r.push(a)}}},h.Dependency=class{constructor(e,t,n,r,i){this.rel=e,this.key=t,this.peers=n,this.paths=r,this.options=i}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},h.Keys=class extends Array{concat(e){const t=this.slice(),n=new Map;for(let e=0;e<t.length;++e)n.set(t[e].key,e);for(const r of e){const e=r.key,i=n.get(e);void 0!==i?t[i]={key:e,schema:t[i].schema.concat(r.schema)}:t.push(r)}return t}}},8785:(e,t,n)=>{const r=n(375),i=n(8068),o=n(8160),s=n(3292),a=n(6354),l={};e.exports=i.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,{schema:t,state:n,prefs:i}){r(t.$_terms.link,"Uninitialized link schema");const o=l.generate(t,e,n,i),s=t.$_terms.link[0].ref;return o.$_validate(e,n.nest(o,`link:${s.display}:${o.type}`),i)},generate:(e,t,n,r)=>l.generate(e,t,n,r),rules:{ref:{method(e){r(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),r("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),r("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(e){r(this.$_terms.link,"Uninitialized link schema"),r(o.isSchema(e),"Invalid schema object"),r("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(r(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,n,r){let i=n.mainstay.links.get(e);if(i)return i._generate(t,n,r).schema;const o=e.$_terms.link[0].ref,{perspective:s,path:a}=l.perspective(o,n);l.assert(s,"which is outside of schema boundaries",o,e,n,r);try{i=a.length?s.$_reach(a):s}catch(t){l.assert(!1,"to non-existing schema",o,e,n,r)}return l.assert("link"!==i.type,"which is another link",o,e,n,r),e._flags.relative||n.mainstay.links.set(e,i),i._generate(t,n,r).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:n,key:r}of t.schemas){if((n._flags.id||r)===e.path[0])return{perspective:n,path:e.path.slice(1)};if(n.$_terms.shared)for(const t of n.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,n,i,o,s){e||r(!1,`"${a.label(i._flags,o,s)}" contains link reference "${n.display}" ${t}`)}},3832:(e,t,n)=>{const r=n(375),i=n(8068),o=n(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const t=e.toString(),n=t.indexOf("."),r=t.indexOf("e");return(n<0?0:(r<0?t.length:r)-n-1)+(r<0?0:Math.max(0,-parseInt(t.slice(r+1))))}};e.exports=i.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:n}){if(!e.match(s.numberRx))return;e=e.trim();const r={value:parseFloat(e)};if(0===r.value&&(r.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(r.value)))return r.errors=n("number.unsafe"),r}else{const t=r.value.toString();if(t.match(/e/i))return r;if(t!==s.normalizeDecimal(e))return r.errors=n("number.unsafe"),r}return r}},validate(e,{schema:t,error:n,prefs:r}){if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!o.isNumber(e))return{value:e,errors:n("number.base")};const i={value:e};if(r.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);i.value=Math.round(i.value*t)/t}}return 0===i.value&&(i.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(i.errors=n("number.unsafe")),i},rules:{compare:{method:!1,validate:(e,t,{limit:n},{name:r,operator:i,args:s})=>o.compare(e,n,i)?e:t.error("number."+r,{limit:s.limit,value:e}),args:[{name:"limit",ref:!0,assert:o.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const t="number"==typeof e?s.decimalPlaces(e):null,n=Math.pow(10,t);return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:t,pfactor:n}})},validate:(e,t,{base:n,baseDecimalPlace:r,pfactor:i},o)=>s.decimalPlaces(e)>r?t.error("number.multiple",{multiple:o.args.base,value:e}):Math.round(i*e)%Math.round(i*n)==0?e:t.error("number.multiple",{multiple:o.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return r(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,{limit:n}){const r=e.toString().match(s.precisionRx);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(e){return r(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:(e,t,{sign:n})=>"negative"===n&&e<0||"positive"===n&&e>0?e:t.error(`number.${n}`)},unsafe:{method(e=!0){return r("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,n)=>{const r=n(7824);e.exports=r.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,n)=>{const r=n(375),i=n(5380),o=n(1745),s=n(9959),a=n(6064),l=n(9926),c=n(5752),u=n(8068),f=n(8160),d={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=u.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:n,prefs:r}){const i=t.$_getRule("normalize");i&&(e=e.normalize(i.args.form));const o=t.$_getRule("case");o&&(e="upper"===o.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const s=t.$_getRule("trim");if(s&&s.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const n of t.$_terms.replacements)e=e.replace(n.pattern,n.replacement);const a=t.$_getRule("hex");if(a&&a.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),t.$_getRule("isoDate")){const t=d.isoDate(e);t&&(e=t)}if(t._flags.truncate){const i=t.$_getRule("max");if(i){let o=i.args.limit;if(f.isResolvable(o)&&(o=o.resolve(e,n,r),!f.limit(o)))return{value:e,errors:t.$_createError("any.ref",o,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},n,r)};e=e.slice(0,o)}}return{value:e}}},validate(e,{schema:t,error:n}){if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){const r=t.$_getRule("min");if(r&&0===r.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(e={}){return f.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},r("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),r("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate:(e,t,{options:n})=>d.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")},case:{method(e){return r(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate:(e,t,{direction:n})=>"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let n=e.length,r=0,i=1;for(;n--;){const t=e.charAt(n)*i;r+=t-9*(t>9),i^=3}return r>0&&r%10==0?e:t.error("string.creditCard")}},dataUri:{method(e={}){return f.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},r("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,{options:n}){const r=e.match(d.dataUriRegex);if(r){if(!r[2])return e;if("base64"!==r[2])return e;if(d.base64Regex[n.paddingRequired].false.test(r[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&f.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=d.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,t,n,{address:r})=>i.isValid(e,r)?e:t.error("string.domain")},email:{method(e={}){f.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),r(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=d.addressOptions(e),n=new RegExp(`\\s*[${e.separator?a(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:n,address:t})},validate(e,t,{options:n},{regex:r,address:i}){const s=n.multiple?e.split(r):[e],a=[];for(const e of s)o.isValid(e,i)||a.push(e);return a.length?t.error("string.email",{value:e,invalids:a}):e}},guid:{alias:"uuid",method(e={}){f.assertOptions(e,["version","separator"]);let t="";if(e.version){const n=[].concat(e.version);r(n.length>=1,"version must have at least 1 valid version specified");const i=new Set;for(let e=0;e<n.length;++e){const o=n[e];r("string"==typeof o,"version at position "+e+" must be a string");const s=d.guidVersions[o.toLowerCase()];r(s,"version at position "+e+" must be one of "+Object.keys(d.guidVersions).join(", ")),r(!i.has(s),"version at position "+e+" must not be a duplicate"),t+=s,i.add(s)}}r(d.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const n=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,i=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${n})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:i})},validate(e,t,n,{regex:r}){const i=r.exec(e);return i?d.guidBrackets[i[1]]!==i[i.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(e={}){return f.assertOptions(e,["byteAligned","prefix"]),e={byteAligned:!1,prefix:!1,...e},r("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),r("boolean"==typeof e.prefix||"optional"===e.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:e}})},validate:(e,t,{options:n})=>("optional"===n.prefix?d.hexRegex.withOptionalPrefix:!0===n.prefix?d.hexRegex.withPrefix:d.hexRegex.withoutPrefix).test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>i.isValid(e,{minDomainSegments:1})||d.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){f.assertOptions(e,["cidr","version"]);const{cidr:t,versions:n,regex:r}=s.regex(e),i=e.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:i}},regex:r})},validate:(e,t,{options:n},{regex:r})=>r.test(e)?e:n.version?t.error("string.ipVersion",{value:e,cidr:n.cidr,version:n.version}):t.error("string.ip",{value:e,cidr:n.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>d.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>d.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return d.length(this,"length",e,"=",t)},validate(e,t,{limit:n,encoding:r},{name:i,operator:o,args:s}){const a=!r&&e.length;return f.compare(a,n,o)?e:t.error("string."+i,{limit:s.limit,value:e,encoding:r})},args:[{name:"limit",ref:!0,assert:f.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return d.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return d.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(e="NFC"){return r(d.normalizationForms.includes(e),"normalization form must be one of "+d.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate:(e,{error:t},{form:n})=>e===e.normalize(n)?e:t("string.normalize",{value:e,form:n}),convert:!0},pattern:{alias:"regex",method(e,t={}){r(e instanceof RegExp,"regex must be a RegExp"),r(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),f.assertOptions(t,["invert","name"]);const n=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:n})},validate:(e,t,{regex:n,options:r},{errorCode:i})=>n.test(e)^r.invert?e:t.error(i,{name:r.name,regex:n,value:e}),args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(a(e),"g")),r(e instanceof RegExp,"pattern must be a RegExp"),r("string"==typeof t,"replacement must be a String");const n=this.clone();return n.$_terms.replacements||(n.$_terms.replacements=[]),n.$_terms.replacements.push({pattern:e,replacement:t}),n}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(e=!0){return r("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate:(e,t,{enabled:n})=>n&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(e=!0){return r("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){f.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),e.domain&&f.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:n}=c.regex(e),r=e.domain?d.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:r,scheme:n})},validate(e,t,{options:n},{regex:r,domain:o,scheme:s}){if(["http:/","https:/"].includes(e))return t.error("string.uri");let a=r.exec(e);if(!a&&t.prefs.convert&&n.encodeUri){const t=encodeURI(e);a=r.exec(t),a&&(e=t)}if(a){const r=a[1]||a[2];return!o||n.allowRelative&&!r||i.isValid(r,o)?e:t.error("string.domain",{value:r})}return n.relativeOnly?t.error("string.uriRelativeOnly"):n.scheme?t.error("string.uriCustomScheme",{scheme:s,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:n,replacement:r}of t.replacements)e=e.replace(n,r);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),d.addressOptions=function(e){if(!e)return d.tlds||e;if(r(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),r(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return r(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds);r("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),r(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),r(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),d.validateTlds(e.tlds.deny,"tlds.deny"),e;const n=e.tlds.allow;return n?!0===n?(r(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds)):(Array.isArray(n)&&(e=Object.assign({},e,{tlds:{allow:new Set(n)}})),r(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),d.validateTlds(e.tlds.allow,"tlds.allow"),e):e},d.validateTlds=function(e,t){for(const n of e)r(i.isValid(n,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},d.isoDate=function(e){if(!f.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},d.length=function(e,t,n,i,o){return r(!o||!1,"Invalid encoding:",o),e.$_addRule({name:t,method:"length",args:{limit:n,encoding:o},operator:i})}},8826:(e,t,n)=>{const r=n(375),i=n(8068),o={};o.Map=class extends Map{slice(){return new o.Map(this)}},e.exports=i.extend({type:"symbol",terms:{map:{init:new o.Map}},coerce:{method(e,{schema:t,error:n}){const r=t.$_terms.map.get(e);return r&&(e=r),t._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),r(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),n=[];for(const i of e){r(i&&i[Symbol.iterator],"Entry must be an iterable");const[e,o]=i;r("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),r("symbol"==typeof o,"Value must be a Symbol"),t.$_terms.map.set(e,o),n.push(o)}return t.valid(...n)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,n)=>{const r=n(375),i=n(8571),o=n(738),s=n(9621),a=n(8160),l=n(6354),c=n(493),u={result:Symbol("result")};t.entry=function(e,t,n){let i=a.defaults;n&&(r(void 0===n.warnings,"Cannot override warnings preference in synchronous validation"),r(void 0===n.artifacts,"Cannot override artifacts preference in synchronous validation"),i=a.preferences(a.defaults,n));const o=u.entry(e,t,i);r(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:o.value};return o.error&&(s.error=o.error),o.mainstay.warnings.length&&(s.warning=l.details(o.mainstay.warnings)),o.mainstay.debug&&(s.debug=o.mainstay.debug),o.mainstay.artifacts&&(s.artifacts=o.mainstay.artifacts),s},t.entryAsync=async function(e,t,n){let r=a.defaults;n&&(r=a.preferences(a.defaults,n));const i=u.entry(e,t,r),o=i.mainstay;if(i.error)throw o.debug&&(i.error.debug=o.debug),i.error;if(o.externals.length){let t=i.value;const c=[];for(const i of o.externals){const f=i.state.path,d="link"===i.schema.type?o.links.get(i.schema):null;let h,p,m=t;const g=f.length?[t]:[],y=f.length?s(e,f):e;if(f.length){h=f[f.length-1];let e=t;for(const t of f.slice(0,-1))e=e[t],g.unshift(e);p=g[0],m=p[h]}try{const e=(e,t)=>(d||i.schema).$_createError(e,m,t,i.state,r),s=await i.method(m,{schema:i.schema,linked:d,state:i.state,prefs:n,original:y,error:e,errorsArray:u.errorsArray,warn:(e,t)=>o.warnings.push((d||i.schema).$_createError(e,m,t,i.state,r)),message:(e,t)=>(d||i.schema).$_createError("external",m,t,i.state,r,{messages:e})});if(void 0===s||s===m)continue;if(s instanceof l.Report){if(o.tracer.log(i.schema,i.state,"rule","external","error"),c.push(s),r.abortEarly)break;continue}if(Array.isArray(s)&&s[a.symbols.errors]){if(o.tracer.log(i.schema,i.state,"rule","external","error"),c.push(...s),r.abortEarly)break;continue}p?(o.tracer.value(i.state,"rule",m,s,"external"),p[h]=s):(o.tracer.value(i.state,"rule",t,s,"external"),t=s)}catch(e){throw r.errors.label&&(e.message+=` (${i.label})`),e}}if(i.value=t,c.length)throw i.error=l.process(c,e,r),o.debug&&(i.error.debug=o.debug),i.error}if(!r.warnings&&!r.debug&&!r.artifacts)return i.value;const c={value:i.value};return o.warnings.length&&(c.warning=l.details(o.warnings)),o.debug&&(c.debug=o.debug),o.artifacts&&(c.artifacts=o.artifacts),c},u.Mainstay=class{constructor(e,t,n){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=n,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},u.entry=function(e,n,r){const{tracer:i,cleanup:o}=u.tracer(n,r),s=r.debug?[]:null,a=n._ids._schemaChain?new Map:null,f=new u.Mainstay(i,s,a),d=n._ids._schemaChain?[{schema:n}]:null,h=new c([],[],{mainstay:f,schemas:d}),p=t.validate(e,n,h,r);o&&n.$_root.untrace();const m=l.process(p.errors,e,r);return{value:p.value,error:m,mainstay:f}},u.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(r(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:u.ignore}},t.validate=function(e,t,n,r,i={}){if(t.$_terms.whens&&(t=t._generate(e,n,r).schema),t._preferences&&(r=u.prefs(t,r)),t._cache&&r.cache){const r=t._cache.get(e);if(n.mainstay.tracer.debug(n,"validate","cached",!!r),r)return r}const o=(i,o,s)=>t.$_createError(i,e,o,s||n,r),s={original:e,prefs:r,schema:t,state:n,error:o,errorsArray:u.errorsArray,warn:(e,t,r)=>n.mainstay.warnings.push(o(e,t,r)),message:(i,o)=>t.$_createError("custom",e,o,n,r,{messages:i})};n.mainstay.tracer.entry(t,n);const l=t._definition;if(l.prepare&&void 0!==e&&r.convert){const t=l.prepare(e,s);if(t){if(n.mainstay.tracer.value(n,"prepare",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(l.coerce&&void 0!==e&&r.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,s);if(t){if(n.mainstay.tracer.value(n,"coerced",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}const c=t._flags.empty;c&&c.$_match(u.trim(e,t),n.nest(c),a.defaults)&&(n.mainstay.tracer.value(n,"empty",e,void 0),e=void 0);const f=i.presence||t._flags.presence||(t._flags._endedSwitch?null:r.presence);if(void 0===e){if("forbidden"===f)return u.finalize(e,null,s);if("required"===f)return u.finalize(e,[t.$_createError("any.required",e,null,n,r)],s);if("optional"===f){if(t._flags.default!==a.symbols.deepDefault)return u.finalize(e,null,s);n.mainstay.tracer.value(n,"default",e,{}),e={}}}else if("forbidden"===f)return u.finalize(e,[t.$_createError("any.unknown",e,null,n,r)],s);const d=[];if(t._valids){const i=t._valids.get(e,n,r,t._flags.insensitive);if(i)return r.convert&&(n.mainstay.tracer.value(n,"valids",e,i.value),e=i.value),n.mainstay.tracer.filter(t,n,"valid",i),u.finalize(e,null,s);if(t._flags.only){const i=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},n,r);if(r.abortEarly)return u.finalize(e,[i],s);d.push(i)}}if(t._invalids){const i=t._invalids.get(e,n,r,t._flags.insensitive);if(i){n.mainstay.tracer.filter(t,n,"invalid",i);const o=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},n,r);if(r.abortEarly)return u.finalize(e,[o],s);d.push(o)}}if(l.validate){const t=l.validate(e,s);if(t&&(n.mainstay.tracer.value(n,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return d.push(t.errors),u.finalize(e,d,s);if(t.errors.length)return d.push(...t.errors),u.finalize(e,d,s)}}return t._rules.length?u.rules(e,d,s):u.finalize(e,d,s)},u.rules=function(e,t,n){const{schema:r,state:i,prefs:o}=n;for(const s of r._rules){const l=r._definition.rules[s.method];if(l.convert&&o.convert){i.mainstay.tracer.log(r,i,"rule",s.name,"full");continue}let c,f=s.args;if(s._resolve.length){f=Object.assign({},f);for(const t of s._resolve){const n=l.argsByName.get(t),s=f[t].resolve(e,i,o),u=n.normalize?n.normalize(s):s,d=a.validateArg(u,null,n);if(d){c=r.$_createError("any.ref",s,{arg:t,ref:f[t],reason:d},i,o);break}f[t]=u}}c=c||l.validate(e,n,f,s);const d=u.rule(c,s);if(d.errors){if(i.mainstay.tracer.log(r,i,"rule",s.name,"error"),s.warn){i.mainstay.warnings.push(...d.errors);continue}if(o.abortEarly)return u.finalize(e,d.errors,n);t.push(...d.errors)}else i.mainstay.tracer.log(r,i,"rule",s.name,"pass"),i.mainstay.tracer.value(i,"rule",e,d.value,s.name),e=d.value}return u.finalize(e,t,n)},u.rule=function(e,t){return e instanceof l.Report?(u.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[a.symbols.errors]?(e.forEach((e=>u.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},u.error=function(e,t){return t.message&&e._setTemplate(t.message),e},u.finalize=function(e,t,n){t=t||[];const{schema:i,state:o,prefs:s}=n;if(t.length){const r=u.default("failover",void 0,t,n);void 0!==r&&(o.mainstay.tracer.value(o,"failover",e,r),e=r,t=[])}if(t.length&&i._flags.error)if("function"==typeof i._flags.error){t=i._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)r(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[i._flags.error];if(void 0===e){const r=u.default("default",e,t,n);o.mainstay.tracer.value(o,"default",e,r),e=r}if(i._flags.cast&&void 0!==e){const t=i._definition.cast[i._flags.cast];if(t.from(e)){const r=t.to(e,n);o.mainstay.tracer.value(o,"cast",e,r,i._flags.cast),e=r}}if(i.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of i.$_terms.externals)o.mainstay.externals.push({method:e,schema:i,state:o,label:l.label(i._flags,o,s)});const a={value:e,errors:t.length?t:null};return i._flags.result&&(a.value="strip"===i._flags.result?void 0:n.original,o.mainstay.tracer.value(o,i._flags.result,e,a.value),o.shadow(e,i._flags.result)),i._cache&&!1!==s.cache&&!i._refs.length&&i._cache.set(n.original,a),void 0===e||a.errors||void 0===i._flags.artifact||(o.mainstay.artifacts=o.mainstay.artifacts||new Map,o.mainstay.artifacts.has(i._flags.artifact)||o.mainstay.artifacts.set(i._flags.artifact,[]),o.mainstay.artifacts.get(i._flags.artifact).push(o.path)),a},u.prefs=function(e,t){const n=t===a.defaults;return n&&e._preferences[a.symbols.prefs]?e._preferences[a.symbols.prefs]:(t=a.preferences(t,e._preferences),n&&(e._preferences[a.symbols.prefs]=t),t)},u.default=function(e,t,n,r){const{schema:o,state:s,prefs:l}=r,c=o._flags[e];if(l.noDefaults||void 0===c)return t;if(s.mainstay.tracer.log(o,s,"rule",e,"full"),!c)return c;if("function"==typeof c){const a=c.length?[i(s.ancestors[0]),r]:[];try{return c(...a)}catch(t){return void n.push(o.$_createError(`any.${e}`,null,{error:t},s,l))}}return"object"!=typeof c?c:c[a.symbols.literal]?c.literal:a.isResolvable(c)?c.resolve(t,s,l):i(c)},u.trim=function(e,t){if("string"!=typeof e)return e;const n=t.$_getRule("trim");return n&&n.args.enabled?e.trim():e},u.ignore={active:!1,debug:o,entry:o,filter:o,log:o,resolve:o,value:o},u.errorsArray=function(){const e=[];return e[a.symbols.errors]=!0,e}},2036:(e,t,n)=>{const r=n(375),i=n(9474),o=n(8160),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){o.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,n){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const n of[...t._values,...t._refs])e.add(n)}if(n)for(const t of[...n._values,...n._refs])e.remove(t);return e.length?e:null}remove(e){o.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,n,r){return!!this.get(e,t,n,r)}get(e,t,n,r){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&r){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(i(t,e))return{value:t};if(t)for(const o of this._refs){const s=o.resolve(e,t,n,null,{in:!0});if(void 0===s)continue;const a=o.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of a)if(typeof t==typeof e)if(r&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:o}}else if(i(t,e))return{value:t,ref:o}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){r(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[o.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const n of e)"string"==typeof n&&t.set(n.toLowerCase(),n);return t}},978:(e,t,n)=>{const r=n(375),i=n(8571),o=n(1687),s=n(9621),a={};e.exports=function(e,t,n={}){if(r(e&&"object"==typeof e,"Invalid defaults value: must be an object"),r(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),r("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return a.applyToDefaultsWithShallow(e,t,n);const s=i(e);if(!0===t)return s;const l=void 0!==n.nullOverride&&n.nullOverride;return o(s,t,{nullOverride:l,mergeArrays:!1})},a.applyToDefaultsWithShallow=function(e,t,n){const l=n.shallow;r(Array.isArray(l),"Invalid keys");const c=new Map,u=!0===t?null:new Set;for(let n of l){n=Array.isArray(n)?n:n.split(".");const r=s(e,n);r&&"object"==typeof r?c.set(r,u&&s(t,n)||r):u&&u.add(n)}const f=i(e,{},c);if(!u)return f;for(const e of u)a.reachCopy(f,t,e);const d=void 0!==n.nullOverride&&n.nullOverride;return o(f,t,{nullOverride:d,mergeArrays:!1})},a.reachCopy=function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const r=t;let i=e;for(let e=0;e<n.length-1;++e){const t=n[e];"object"!=typeof i[t]&&(i[t]={}),i=i[t]}i[n[n.length-1]]=r}},375:(e,t,n)=>{const r=n(7916);e.exports=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new r(t)}}},8571:(e,t,n)=>{const r=n(9621),i=n(4277),o=n(7043),s={needsProtoHack:new Set([i.set,i.map,i.weakSet,i.weakMap])};e.exports=s.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let r=s.clone,a=n;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);r=e=>e}else if(a){const t=a.get(e);if(t)return t}else a=new Map;const l=i.getInternalProto(e);if(l===i.buffer)return!1;if(l===i.date)return new Date(e.getTime());if(l===i.regex)return new RegExp(e);const c=s.base(e,l,t);if(c===e)return e;if(a&&a.set(e,c),l===i.set)for(const n of e)c.add(r(n,t,a));else if(l===i.map)for(const[n,i]of e)c.set(n,r(i,t,a));const u=o.keys(e,t);for(const n of u){if("__proto__"===n)continue;if(l===i.array&&"length"===n){c.length=e.length;continue}const o=Object.getOwnPropertyDescriptor(e,n);o?o.get||o.set?Object.defineProperty(c,n,o):o.enumerable?c[n]=r(e[n],t,a):Object.defineProperty(c,n,{enumerable:!1,writable:!0,configurable:!0,value:r(e[n],t,a)}):Object.defineProperty(c,n,{enumerable:!0,writable:!0,configurable:!0,value:r(e[n],t,a)})}return c},s.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const i=new Map;for(const t of n){const n=r(e,t);"object"!=typeof n&&"function"!=typeof n||i.set(n,n)}return s.clone(e,t,i)},s.base=function(e,t,n){if(!1===n.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===i.array?[]:{};const r=Object.getPrototypeOf(e);if(r&&r.isImmutable)return e;if(t===i.array){const e=[];return r!==t&&Object.setPrototypeOf(e,r),e}if(s.needsProtoHack.has(t)){const e=new r.constructor;return r!==t&&Object.setPrototypeOf(e,r),e}return Object.create(r)}},9474:(e,t,n)=>{const r=n(4277),i={mismatched:null};e.exports=function(e,t,n){return n=Object.assign({prototype:!0},n),!!i.isDeepEqual(e,t,n,[])},i.isDeepEqual=function(e,t,n,o){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!n.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const a=i.getSharedType(e,t,!!n.prototype);switch(a){case r.buffer:return!1;case r.promise:return e===t;case r.regex:return e.toString()===t.toString();case i.mismatched:return!1}for(let n=o.length-1;n>=0;--n)if(o[n].isSame(e,t))return!0;o.push(new i.SeenEntry(e,t));try{return!!i.isDeepEqualObj(a,e,t,n,o)}finally{o.pop()}},i.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?i.mismatched:r.getInternalProto(e);const o=r.getInternalProto(e);return o!==r.getInternalProto(t)?i.mismatched:o},i.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},i.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},i.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},i.isDeepEqualObj=function(e,t,n,o,s){const{isDeepEqual:a,valueOf:l,hasOwnEnumerableProperty:c}=i,{keys:u,getOwnPropertySymbols:f}=Object;if(e===r.array){if(!o.part){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!a(t[e],n[e],o,s))return!1;return!0}for(const e of t)for(const t of n)if(a(e,t,o,s))return!0}else if(e===r.set){if(t.size!==n.size)return!1;if(!i.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const r of e)if(a(n,r,o,s)){e.delete(r),t=!0;break}if(!t)return!1}}}else if(e===r.map){if(t.size!==n.size)return!1;for(const[e,r]of Map.prototype.entries.call(t)){if(void 0===r&&!Map.prototype.has.call(n,e))return!1;if(!a(r,Map.prototype.get.call(n,e),o,s))return!1}}else if(e===r.error&&(t.name!==n.name||t.message!==n.message))return!1;const d=l(t),h=l(n);if((t!==d||n!==h)&&!a(d,h,o,s))return!1;const p=u(t);if(!o.part&&p.length!==u(n).length&&!o.skip)return!1;let m=0;for(const e of p)if(o.skip&&o.skip.includes(e))void 0===n[e]&&++m;else{if(!c(n,e))return!1;if(!a(t[e],n[e],o,s))return!1}if(!o.part&&p.length-m!==u(n).length)return!1;if(!1!==o.symbols){const e=f(t),r=new Set(f(n));for(const i of e){if(!o.skip||!o.skip.includes(i))if(c(t,i)){if(!c(n,i))return!1;if(!a(t[i],n[i],o,s))return!1}else if(c(n,i))return!1;r.delete(i)}for(const e of r)if(c(n,e))return!1}return!0},i.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,n)=>{const r=n(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:r(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{const t={};e.exports=function(e){if(!e)return"";let n="";for(let r=0;r<e.length;++r){const i=e.charCodeAt(r);t.isSafe(i)?n+=e[r]:n+=t.escapeHtmlChar(i)}return n},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{e.exports=function(){}},1687:(e,t,n)=>{const r=n(375),i=n(8571),o=n(7043),s={};e.exports=s.merge=function(e,t,n){if(r(e&&"object"==typeof e,"Invalid target value: must be an object"),r(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){r(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let r=0;r<t.length;++r)e.push(i(t[r],{symbols:n.symbols}));return e}const a=o.keys(t,n);for(let r=0;r<a.length;++r){const o=a[r];if("__proto__"===o||!Object.prototype.propertyIsEnumerable.call(t,o))continue;const l=t[o];if(l&&"object"==typeof l){if(e[o]===l)continue;!e[o]||"object"!=typeof e[o]||Array.isArray(e[o])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[o]=i(l,{symbols:n.symbols}):s.merge(e[o],l,n)}else(null!=l||n.nullOverride)&&(e[o]=l)}return e}},9621:(e,t,n)=>{const r=n(375),i={};e.exports=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const o=Array.isArray(t);r(!o||!n.separator,"Separator option is not valid for array-based chain");const s=o?t:t.split(n.separator||".");let a=e;for(let e=0;e<s.length;++e){let o=s[e];const l=n.iterables&&i.iterables(a);if(Array.isArray(a)||"set"===l){const e=Number(o);Number.isInteger(e)&&(o=e<0?a.length+e:e)}if(!a||"function"==typeof a&&!1===n.functions||!l&&void 0===a[o]){r(!n.strict||e+1===s.length,"Missing segment",o,"in reach path ",t),r("object"==typeof a||!0===n.functions||"function"!=typeof a,"Invalid segment",o,"in reach path ",t),a=n.default;break}a=l?"set"===l?[...a][o]:a.get(o):a[o]}return a},i.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{e.exports=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{const n={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const r=Object.prototype.toString.call(e);return n.typeMap.get(r)||t.generic}},7043:(e,t)=>{t.keys=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,n)=>{const r=n(375),i={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const n=[].concat((t=t||{}).before||[]),i=[].concat(t.after||[]),o=t.group||"?",s=t.sort||0;r(!n.includes(o),`Item cannot come before itself: ${o}`),r(!n.includes("?"),"Item cannot come before unassociated items"),r(!i.includes(o),`Item cannot come after itself: ${o}`),r(!i.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:n,after:i,group:o,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();r(e,"item","?"!==o?`added into group ${o}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(i.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return r(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return r(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),n=Object.create(null);for(const r of this._items){const i=r.seq,o=r.group;n[o]=n[o]||[],n[o].push(i),e[i]=r.before;for(const e of r.after)t[e]=t[e]||[],t[e].push(i)}for(const t in e){const r=[];for(const i in e[t]){const o=e[t][i];n[o]=n[o]||[],r.push(...n[o])}e[t]=r}for(const r in t)if(n[r])for(const i of n[r])e[i].push(...t[r]);const r={};for(const t in e){const n=e[t];for(const e of n)r[e]=r[e]||[],r[e].push(t)}const i={},o=[];for(let e=0;e<this._items.length;++e){let t=e;if(r[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===i[e])continue;r[e]||(r[e]=[]);const n=r[e].length;let o=0;for(let t=0;t<n;++t)i[r[e][t]]&&++o;if(o===n){t=e;break}}}null!==t&&(i[t]=!0,o.push(t))}if(o.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of o){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},i.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,n)=>{const r=n(443),i=n(2178),o={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:r.URL||URL};t.analyze=function(e,t={}){if(!e)return i.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return i.code("DOMAIN_TOO_LONG");if(o.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return i.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(o.domainControlRx.test(e))return i.code("DOMAIN_INVALID_CHARS");e=o.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const n=t.minDomainSegments||o.minDomainSegments,r=e.split(".");if(r.length<n)return i.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&r.length>t.maxDomainSegments)return i.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=r[r.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return i.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<r.length;++e){const t=r[e];if(!t.length)return i.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return i.code("DOMAIN_LONG_SEGMENT");if(e<r.length-1){if(!o.domainSegmentRx.test(t))return i.code("DOMAIN_INVALID_CHARS")}else if(!o.tldSegmentRx.test(t))return i.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,n){return!t.analyze(e,n)},o.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new o.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,n)=>{const r=n(9848),i=n(5380),o=n(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(r.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return o.code("EMPTY_STRING");const n=!s.nonAsciiRx.test(e);if(!n){if(!1===t.allowUnicode)return o.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const r=e.split("@");if(2!==r.length)return r.length>2?o.code("MULTIPLE_AT_CHAR"):o.code("MISSING_AT_CHAR");const[a,l]=r;if(!a)return o.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return o.code("ADDRESS_TOO_LONG");if(s.encoder.encode(a).length>64)return o.code("LOCAL_TOO_LONG")}return s.local(a,n)||i.analyze(l,t)},s.local=function(e,t){const n=e.split(".");for(const e of n){if(!e.length)return o.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return o.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return o.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,n)=>{const r=n(375),i=n(5752);t.regex=function(e={}){r(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";r(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),r(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let n=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),r(n.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<n.length;++e)r("string"==typeof n[e],"options.version must only contain strings"),n[e]=n[e].toLowerCase(),r(["ipv4","ipv6","ipvfuture"].includes(n[e]),"options.version contains unknown version "+n[e]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const o=`(?:${n.map((e=>{if("forbidden"===t)return i.ip[e];const n=`\\/${"ipv4"===e?i.ip.v4Cidr:i.ip.v6Cidr}`;return"required"===t?`${i.ip[e]}${n}`:`${i.ip[e]}(?:${n})?`})).join("|")})`,s=new RegExp(`^${o}$`);return{cidr:t,versions:n,regex:s,raw:o}}},5752:(e,t,n)=>{const r=n(375),i=n(6064),o={generate:function(){const e={},t="\\dA-Fa-f",n="["+t+"]",r="\\w-\\.~",i="!\\$&'\\(\\)\\*\\+,;=",o="%"+t,s=r+o+i+":@",a="["+s+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const c=n+"{1,4}",u="(?:"+c+":"+c+"|"+e.ipv4address+")",f="(?:"+c+":){6}"+u,d="::(?:"+c+":){5}"+u,h="(?:"+c+")?::(?:"+c+":){4}"+u,p="(?:(?:"+c+":){0,1}"+c+")?::(?:"+c+":){3}"+u,m="(?:(?:"+c+":){0,2}"+c+")?::(?:"+c+":){2}"+u,g="(?:(?:"+c+":){0,3}"+c+")?::"+c+":"+u,y="(?:(?:"+c+":){0,4}"+c+")?::"+u,_="(?:(?:"+c+":){0,5}"+c+")?::"+c,v="(?:(?:"+c+":){0,6}"+c+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+f+"|"+d+"|"+h+"|"+p+"|"+m+"|"+g+"|"+y+"|"+_+"|"+v+")",e.ipvFuture="v"+n+"+\\.["+r+i+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const b="["+r+o+i+":]*",w="["+r+o+i+"]{1,255}",x="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+w+")",E="(?:"+b+"@)?"+x+"(?::\\d*)?",$="(?:"+b+"@)?("+x+")(?::\\d*)?",M=a+"*",A=a+"+",S="(?:\\/"+M+")*",R="\\/(?:"+A+S+")?",I=A+S,N="["+r+o+i+"@]+"+S,O="(?:\\/\\/\\/"+M+S+")";return e.hierPart="(?:(?:\\/\\/"+E+S+")|"+R+"|"+I+"|"+O+")",e.hierPartCapture="(?:(?:\\/\\/"+$+S+")|"+R+"|"+I+")",e.relativeRef="(?:(?:\\/\\/"+E+S+")|"+R+"|"+N+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+$+S+")|"+R+"|"+N+"|)",e.query="["+s+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+s+"\\/\\?]*",e}};o.rfc3986=o.generate(),t.ip={v4Cidr:o.rfc3986.ipv4Cidr,v6Cidr:o.rfc3986.ipv6Cidr,ipv4:o.rfc3986.ipv4address,ipv6:o.rfc3986.ipv6address,ipvfuture:o.rfc3986.ipvFuture},o.createRegex=function(e){const t=o.rfc3986,n="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return o.wrap(s+n);let a="";if(e.scheme){r(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(e.scheme);r(n.length>=1,"scheme must have at least 1 scheme specified");const o=[];for(let e=0;e<n.length;++e){const s=n[e];r(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?o.push(s.source.toString()):(r(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),o.push(i(s)))}a=o.join("|")}const l="(?:"+(a?"(?:"+a+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",c=e.allowRelative?"(?:"+l+"|"+s+")":l;return o.wrap(c+n,a)},o.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},o.uriRegex=o.createRegex({}),t.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?o.createRegex(e):o.uriRegex}},1447:(e,t)=>{const n={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e,t={}){if(!t[n.settings]&&t.constants)for(const e in t.constants){const n=t.constants[e];if(null!==n&&!["boolean","number","string"].includes(typeof n))throw new Error(`Formula constant ${e} contains invalid ${typeof n} value type`)}this.settings=t[n.settings]?t:Object.assign({[n.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let r=[],i="",o=0,s=!1;const a=e=>{if(o)throw new Error("Formula missing closing parenthesis");const a=r.length?r[r.length-1]:null;if(s||i||e){if(a&&"reference"===a.type&&")"===e)return a.type="function",a.value=this._subFormula(i,a.value),void(i="");if(")"===e){const e=new t.Parser(i,this.settings);r.push({type:"segment",value:e})}else if(s){if("]"===s)return r.push({type:"reference",value:i}),void(i="");r.push({type:"literal",value:i})}else if(n.operatorCharacters.includes(i))a&&"operator"===a.type&&n.operators.includes(a.value+i)?a.value+=i:r.push({type:"operator",value:i});else if(i.match(n.numberRx))r.push({type:"constant",value:parseFloat(i)});else if(void 0!==this.settings.constants[i])r.push({type:"constant",value:this.settings.constants[i]});else{if(!i.match(n.tokenRx))throw new Error(`Formula contains invalid token: ${i}`);r.push({type:"reference",value:i})}i=""}};for(const t of e)s?t===s?(a(),s=!1):i+=t:o?"("===t?(i+=t,++o):")"===t?(--o,o?i+=t:a(t)):i+=t:t in n.literals?s=n.literals[t]:"("===t?(a(),++o):n.operatorCharacters.includes(t)?(a(),i=t,a()):" "!==t?i+=t:a();a(),r=r.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==r[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of r){if("operator"===e.type){if(n.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!n.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===r.length&&["reference","literal","constant"].includes(r[0].type)&&(this.single={type:"reference"===r[0].type?"reference":"value",value:r[0].value}),this._parts=r.map((e=>{if("operator"===e.type)return n.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):n.reference(e.value)}))}_subFormula(e,r){const i=this.settings.functions[r];if("function"!=typeof i)throw new Error(`Formula contains unknown function ${r}`);let o=[];if(e){let t="",i=0,s=!1;const a=()=>{if(!t)throw new Error(`Formula contains function ${r} with invalid arguments ${e}`);o.push(t),t=""};for(let r=0;r<e.length;++r){const o=e[r];s?(t+=o,o===s&&(s=!1)):o in n.literals&&!i?(t+=o,s=n.literals[o]):","!==o||i?(t+=o,"("===o?++i:")"===o&&--i):a()}a()}return o=o.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const n of o)t.push(n.evaluate(e));return i.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let r=t.length-2;r>=0;--r){const i=t[r];if(i&&"operator"===i.type){const o=t[r+1];t.splice(r+1,1);const s=n.evaluate(o,e);t[r]=n.single(i.value,s)}}return n.operatorsOrder.forEach((r=>{for(let i=1;i<t.length-1;)if(r.includes(t[i])){const r=t[i],o=n.evaluate(t[i-1],e),s=n.evaluate(t[i+1],e);t.splice(i,2);const a=n.calculate(r,o,s);t[i-1]=0===a?0:a}else i+=2})),n.evaluate(t[0],e)}},t.Parser.prototype[n.symbol]=!0,n.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},n.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[n.symbol]?e.evaluate(t):e},n.single=function(e,t){if("!"===e)return!t;const n=-t;return 0===n?0:n},n.calculate=function(e,t,r){if("??"===e)return n.exists(t)?t:r;if("string"==typeof t||"string"==typeof r){if("+"===e)return(t=n.exists(t)?t:"")+(n.exists(r)?r:"")}else switch(e){case"^":return Math.pow(t,r);case"*":return t*r;case"/":return t/r;case"%":return t%r;case"+":return t+r;case"-":return t-r}switch(e){case"<":return t<r;case"<=":return t<=r;case">":return t>r;case">=":return t>=r;case"==":return t===r;case"!=":return t!==r;case"&&":return t&&r;case"||":return t||r}return null},n.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{e.exports=JSON.parse('{"version":"17.13.1"}')}},t={},function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(5107);var e,t}))}(Jo);var es=$(Jo.exports),ts={table:"directus_collections",defaults:{collection:null,hidden:!1,singleton:!1,icon:null,note:null,translations:null,display_template:null,accountability:"all"},data:[{collection:"directus_activity",note:"$t:directus_collection.directus_activity",accountability:null},{collection:"directus_collections",icon:"database",note:"$t:directus_collection.directus_collections"},{collection:"directus_fields",icon:"input",note:"$t:directus_collection.directus_fields"},{collection:"directus_files",icon:"folder",note:"$t:directus_collection.directus_files",display_template:"{{ $thumbnail }} {{ title }}"},{collection:"directus_folders",note:"$t:directus_collection.directus_folders",display_template:"{{ name }}"},{collection:"directus_migrations",note:"$t:directus_collection.directus_migrations"},{collection:"directus_permissions",icon:"admin_panel_settings",note:"$t:directus_collection.directus_permissions"},{collection:"directus_presets",icon:"bookmark",note:"$t:directus_collection.directus_presets",accountability:null},{collection:"directus_relations",icon:"merge_type",note:"$t:directus_collection.directus_relations"},{collection:"directus_revisions",note:"$t:directus_collection.directus_revisions",accountability:null},{collection:"directus_roles",icon:"supervised_user_circle",note:"$t:directus_collection.directus_roles"},{collection:"directus_sessions",note:"$t:directus_collection.directus_sessions"},{collection:"directus_settings",singleton:!0,note:"$t:directus_collection.directus_settings"},{collection:"directus_users",archive_field:"status",archive_value:"archived",unarchive_value:"draft",icon:"people_alt",note:"$t:directus_collection.directus_users",display_template:"{{ first_name }} {{ last_name }}"},{collection:"directus_webhooks",note:"$t:directus_collection.directus_webhooks"},{collection:"directus_dashboards",note:"$t:directus_collection.directus_dashboards"},{collection:"directus_panels",note:"$t:directus_collection.directus_panels"},{collection:"directus_notifications",note:"$t:directus_collection.directus_notifications"},{collection:"directus_shares",icon:"share",note:"$t:directus_collection.directus_shares"},{collection:"directus_flows",note:"$t:directus_collection.directus_flows"},{collection:"directus_operations",note:"$t:directus_collection.directus_operations"},{collection:"directus_translations",note:"$t:directus_collection.directus_translations"},{collection:"directus_versions",note:"$t:directus_collection.directus_versions"},{collection:"directus_extensions",note:"$t:directus_collection.directus_extensions"}]};ts.data.map((e=>({...ts.defaults,...e,system:!0})));var ns=ts.data.map((e=>e.collection));var rs={table:"directus_relations",defaults:{many_collection:"directus_users",many_field:null,one_collection:null,one_field:null,one_allowed_collections:null,one_collection_field:null,one_deselect_action:"nullify",junction_field:null,sort_field:null},data:[{many_collection:"directus_collections",many_field:"group",one_collection:"directus_collections"},{many_collection:"directus_users",many_field:"role",one_collection:"directus_roles",one_field:"users"},{many_collection:"directus_users",many_field:"avatar",one_collection:"directus_files"},{many_collection:"directus_revisions",many_field:"activity",one_collection:"directus_activity",one_field:"revisions"},{many_collection:"directus_revisions",many_field:"parent",one_collection:"directus_revisions"},{many_collection:"directus_revisions",many_field:"version",one_collection:"directus_versions"},{many_collection:"directus_presets",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_presets",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_folders",many_field:"parent",one_collection:"directus_folders"},{many_collection:"directus_files",many_field:"folder",one_collection:"directus_folders"},{many_collection:"directus_files",many_field:"uploaded_by",one_collection:"directus_users"},{many_collection:"directus_files",many_field:"modified_by",one_collection:"directus_users"},{many_collection:"directus_fields",many_field:"collection",one_collection:"directus_collections",one_field:"fields"},{many_collection:"directus_fields",many_field:"group",one_collection:"directus_fields"},{many_collection:"directus_activity",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_settings",many_field:"project_logo",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_foreground",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_background",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_favicon",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"storage_default_folder",one_collection:"directus_folders"},{many_collection:"directus_panels",many_field:"dashboard",one_collection:"directus_dashboards",one_field:"panels"},{many_collection:"directus_panels",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_flows",many_field:"operation",one_collection:"directus_operations"},{many_collection:"directus_flows",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_operations",many_field:"flow",one_collection:"directus_flows",one_field:"operations",one_deselect_action:"delete"},{many_collection:"directus_operations",many_field:"resolve",one_collection:"directus_operations"},{many_collection:"directus_operations",many_field:"reject",one_collection:"directus_operations"},{many_collection:"directus_operations",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_permissions",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_sessions",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_sessions",many_field:"share",one_collection:"directus_shares"},{many_collection:"directus_dashboards",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_notifications",many_field:"recipient",one_collection:"directus_users"},{many_collection:"directus_notifications",many_field:"sender",one_collection:"directus_users"},{many_collection:"directus_shares",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_shares",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_shares",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_versions",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_versions",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_versions",many_field:"user_updated",one_collection:"directus_users"}]};rs.data.map((e=>({...rs.defaults,...e,system:!0})));var is={collection:null,field:null,special:null,interface:null,options:null,display:null,display_options:null,readonly:!1,hidden:!1,sort:null,width:"full",group:null,translations:null,note:null,conditions:null,required:!1},os={table:"directus_settings",fields:[{field:"id",hidden:!0},{field:"project_name",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_settings.project_name_placeholder"},width:"half"},{field:"project_descriptor",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_settings.project_name_placeholder"},width:"half"},{field:"project_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com"},width:"half"},{field:"default_language",interface:"system-language",options:{iconRight:"language",placeholder:"en-US"},width:"half"},{field:"theming_group",interface:"group-raw",special:["alias","no-data","group"]},{field:"branding_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:fields.directus_settings.branding"},special:["alias","no-data"],width:"full",group:"theming_group"},{field:"project_color",interface:"select-color",note:"$t:field_options.directus_settings.project_color_note",width:"half",group:"theming_group"},{field:"project_logo",interface:"file",note:"$t:field_options.directus_settings.project_logo_note",width:"half",group:"theming_group"},{field:"public_foreground",interface:"file",width:"half",group:"theming_group"},{field:"public_background",interface:"file",width:"half",group:"theming_group"},{field:"public_favicon",interface:"file",note:"$t:field_options.directus_settings.project_favicon_note",width:"half",group:"theming_group"},{field:"public_note",interface:"input",options:{placeholder:"$t:field_options.directus_settings.public_note_placeholder",iconRight:"info"},width:"half",group:"theming_group"},{field:"theming_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:fields.directus_settings.theming"},special:["alias","no-data"],width:"full",group:"theming_group"},{field:"default_appearance",interface:"select-dropdown",width:"half",options:{choices:[{value:"auto",text:"$t:appearance_auto"},{value:"light",text:"$t:appearance_light"},{value:"dark",text:"$t:appearance_dark"}]},group:"theming_group"},{field:"default_theme_light",width:"full",interface:"system-theme",options:{appearance:"light"},group:"theming_group"},{field:"theme_light_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"light"},group:"theming_group",special:["cast-json"]},{field:"default_theme_dark",width:"full",interface:"system-theme",options:{appearance:"dark"},group:"theming_group"},{field:"theme_dark_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"dark"},group:"theming_group",special:["cast-json"]},{field:"custom_css",interface:"input-code",options:{language:"css",lineNumber:!0,template:"#app, #main-content, body {\n  --v-button-background-color: #6644FF !important;\n  --v-button-background-color-hover: #5E41EC !important;\n}\n"},width:"full",group:"theming_group"},{field:"modules_divider",interface:"presentation-divider",options:{icon:"menu_open",title:"$t:modules"},special:["alias","no-data"],width:"full"},{field:"module_bar",interface:"system-modules",special:["cast-json"]},{field:"security_divider",interface:"presentation-divider",options:{icon:"shield",title:"$t:security"},special:["alias","no-data"],width:"full"},{field:"auth_password_policy",interface:"select-dropdown",options:{choices:[{value:null,text:"$t:field_options.directus_settings.auth_password_policy.none_text"},{value:"/^.{8,}$/",text:"$t:field_options.directus_settings.auth_password_policy.weak_text"},{value:"/(?=^.{8,}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+}{';'?>.<,])(?!.*\\s).*$/",text:"$t:field_options.directus_settings.auth_password_policy.strong_text"}],allowOther:!0},width:"half"},{field:"auth_login_attempts",interface:"input",options:{iconRight:"lock",placeholder:"$t:unlimited"},width:"half"},{field:"public_registration_divider",interface:"presentation-divider",options:{icon:"person_add",title:"$t:fields.directus_settings.public_registration"},special:["alias","no-data"],width:"full"},{field:"public_registration",interface:"boolean",note:"$t:fields.directus_settings.public_registration_note",width:"half",options:{label:"$t:enabled"},special:["cast-boolean"]},{field:"public_registration_role",interface:"select-dropdown-m2o",note:"$t:fields.directus_settings.public_registration_role_note",options:{template:"{{ name }}",filter:{admin_access:{_eq:!1}}},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"public_registration_verify_email",interface:"boolean",note:"$t:fields.directus_settings.public_registration_verify_email_note",width:"half",options:{label:"$t:enabled"},special:["cast-boolean"]},{field:"public_registration_email_filter",interface:"system-filter",note:"$t:fields.directus_settings.public_registration_email_filter_note",options:{collectionName:"directus_users",collectionField:"email",fieldName:"email"},special:["cast-json"],width:"half"},{field:"files_divider",interface:"presentation-divider",options:{icon:"folder",title:"$t:fields.directus_settings.files_and_thumbnails"},special:["alias","no-data"],width:"full"},{field:"storage_asset_transform",interface:"select-dropdown",options:{choices:[{value:"all",text:"$t:fields.directus_settings.transformations_all"},{value:"none",text:"$t:fields.directus_settings.transformations_none"},{value:"presets",text:"$t:fields.directus_settings.transformations_presets"}]},width:"half"},{field:"storage_default_folder",interface:"system-folder",width:"half",note:"$t:interfaces.system-folder.field_hint"},{field:"storage_asset_presets",interface:"list",options:{fields:[{field:"key",name:"$t:key",type:"string",schema:{is_nullable:!1},meta:{interface:"input",options:{slug:!0,onlyOnCreate:!1},width:"full",required:!0}},{field:"fit",name:"$t:field_options.directus_settings.storage_asset_presets.fit_label",type:"string",schema:{is_nullable:!1},meta:{interface:"select-dropdown",options:{choices:[{value:"contain",text:"$t:field_options.directus_settings.storage_asset_presets.fit.contain_text"},{value:"cover",text:"$t:field_options.directus_settings.storage_asset_presets.fit.cover_text"},{value:"inside",text:"$t:field_options.directus_settings.storage_asset_presets.fit.fit_text"},{value:"outside",text:"$t:field_options.directus_settings.storage_asset_presets.fit.outside_text"}]},width:"half"}},{field:"width",name:"$t:width",type:"integer",schema:{is_nullable:!1},meta:{interface:"input",width:"half"}},{field:"height",name:"$t:height",type:"integer",schema:{is_nullable:!1},meta:{interface:"input",width:"half"}},{field:"quality",type:"integer",name:"$t:quality",schema:{default_value:80,is_nullable:!1},meta:{interface:"slider",options:{max:100,min:0,step:1},width:"half"}},{field:"withoutEnlargement",name:"$t:field_options.directus_settings.storage_asset_presets.upscaling",type:"boolean",schema:{default_value:!1},meta:{interface:"boolean",width:"half",options:{label:"$t:no_upscale"}}},{field:"format",name:"$t:format",type:"string",schema:{is_nullable:!1,default_value:""},meta:{interface:"select-dropdown",options:{allowNone:!0,choices:[{value:"auto",text:"Auto"},{value:"jpeg",text:"JPEG"},{value:"png",text:"PNG"},{value:"webp",text:"WebP"},{value:"tiff",text:"Tiff"},{value:"avif",text:"AVIF"}]},width:"half"}},{field:"transforms",name:"$t:field_options.directus_settings.additional_transforms",type:"json",schema:{is_nullable:!1,default_value:[]},meta:{note:"$t:field_options.directus_settings.transforms_note",interface:"json",options:{template:'[\n  ["blur", 45],\n  ["grayscale"],\n  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]\n]\n',placeholder:'[\n  ["blur", 45],\n  ["grayscale"],\n  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]\n]\n'},width:"full"}}],template:"{{key}}"},special:["cast-json"],width:"full"},{field:"reporting_divider",interface:"presentation-divider",options:{icon:"feedback",title:"$t:fields.directus_settings.reporting"},special:["alias","no-data"],width:"full"},{field:"report_feature_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com/feature"},width:"half"},{field:"report_bug_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com/bug"},width:"half"},{field:"report_error_url",interface:"system-display-template",options:{placeholder:"https://example.com/error",fields:[{name:"Error",field:"error",key:"error",path:"error",children:[{name:"Name",field:"name",key:"error.name",path:"error.name"},{name:"Message",field:"message",key:"error.message",path:"error.message"}]},{name:"Navigator",field:"navigator",key:"navigator",path:"navigator",children:[{name:"Language",field:"language",key:"navigator.language",path:"navigator.language"},{name:"User Agent",field:"userAgent",key:"navigator.userAgent",path:"navigator.userAgent"}]},{name:"Route",field:"route",key:"route",path:"route",children:[{name:"Full Path",field:"fullPath",key:"route.fullPath",path:"route.fullPath"},{name:"Hash",field:"hash",key:"route.hash",path:"route.hash"},{name:"Name",field:"name",key:"route.name",path:"route.name"},{name:"Path",field:"path",key:"route.path",path:"route.path"},{name:"Query",field:"query",key:"route.query",path:"route.query"}]},{name:"User",field:"user",key:"user",path:"user",children:[{name:"ID",field:"id",key:"user.id",path:"user.id"},{name:"First Name",field:"first_name",key:"user.first_name",path:"user.first_name"},{name:"Last Name",field:"last_name",key:"user.last_name",path:"user.last_name"},{name:"Status",field:"status",key:"user.status",path:"user.status"},{name:"Title",field:"title",key:"user.title",path:"user.title"},{name:"Description",field:"description",key:"user.description",path:"user.description"},{name:"Location",field:"location",key:"user.location",path:"user.location"}]},{name:"Role",field:"role",key:"role",path:"role",children:[{name:"ID",field:"id",key:"role.id",path:"role.id"},{name:"Name",field:"name",key:"role.name",path:"role.name"}]}]},width:"full"},{field:"map_divider",interface:"presentation-divider",options:{icon:"map",title:"$t:fields.directus_settings.mapping"},special:["alias","no-data"],width:"full"},{field:"mapbox_key",interface:"input",options:{icon:"key",title:"$t:field_options.directus_settings.mapbox_key",placeholder:"$t:field_options.directus_settings.mapbox_placeholder",iconLeft:"vpn_key",font:"monospace"},width:"full"},{field:"basemaps",interface:"list",special:["cast-json"],options:{template:"{{name}}",fields:[{field:"name",name:"$t:name",schema:{is_nullable:!1},meta:{interface:"text-input",required:!0,options:{placeholder:"$t:field_options.directus_settings.basemaps_name_placeholder"}}},{field:"type",name:"$t:type",meta:{interface:"select-dropdown",options:{choices:[{value:"raster",text:"$t:field_options.directus_settings.basemaps_raster"},{value:"tile",text:"$t:field_options.directus_settings.basemaps_tile"},{value:"style",text:"$t:field_options.directus_settings.basemaps_style"}]}}},{field:"url",name:"$t:url",schema:{is_nullable:!1},meta:{interface:"text-input",options:{placeholder:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}},{field:"tileSize",name:"$t:tile_size",type:"integer",schema:{is_nullable:!0},meta:{interface:"input",options:{placeholder:"512"},conditions:[{name:"typeNeqRaster",rule:{type:{_neq:"raster"}},hidden:!0}]}},{field:"attribution",name:"$t:fields.directus_settings.attribution",type:"string",schema:{is_nullable:!0},meta:{interface:"input",options:{placeholder:"$t:fields.directus_settings.attribution_placeholder"}}}]}},{field:"image_editor",interface:"presentation-divider",options:{icon:"image",title:"$t:fields.directus_settings.image_editor"},special:["alias","no-data"],width:"full"},{field:"custom_aspect_ratios",interface:"list",special:["cast-json"],options:{template:"{{text}}",fields:[{field:"text",name:"$t:text",type:"string",meta:{interface:"text-input",width:"half",required:!0,options:{placeholder:"$t:text"}}},{field:"value",name:"$t:value",type:"float",meta:{interface:"input",width:"half",required:!0,options:{placeholder:"$t:value"}}}]}}]},ss=[];function as(e){let{fields:t,table:n}=e;t.forEach(((e,t)=>{ss.push({system:!0,...is,...e,collection:n,sort:t+1})}))}as({table:"directus_activity",fields:[{field:"id",width:"half"},{field:"item",width:"half"},{field:"action",display:"labels",display_options:{choices:[{text:"$t:field_options.directus_activity.create",value:"create",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{text:"$t:field_options.directus_activity.update",value:"update",foreground:"var(--blue)",background:"var(--blue-25)"},{text:"$t:field_options.directus_activity.delete",value:"delete",foreground:"var(--theme--danger)",background:"var(--danger-25)"},{text:"$t:field_options.directus_activity.login",value:"login",foreground:"var(--purple)",background:"var(--purple-25)"}]},width:"half"},{field:"collection",display:"collection",display_options:{icon:!0},width:"half"},{field:"timestamp",display:"datetime",special:["date-created","cast-timestamp"],options:{relative:!0},width:"half"},{field:"user",display:"user",width:"half"},{field:"comment",display:"formatted-value",display_options:{color:"var(--theme--foreground-subdued)"},width:"half"},{field:"user_agent",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"origin",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"ip",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"revisions",interface:"list-o2m",special:["o2m"],options:{fields:["collection","item"]},width:"half"}]}),as({table:"directus_collections",fields:[{field:"collection_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"box",title:"$t:field_options.directus_collections.collection_setup"},width:"full"},{field:"collection",interface:"input",options:{font:"monospace"},readonly:!0,width:"half"},{field:"note",interface:"input",options:{placeholder:"$t:field_options.directus_collections.note_placeholder"},width:"half"},{field:"icon",interface:"select-icon",options:null,width:"half"},{field:"color",interface:"select-color",options:{placeholder:"$t:interfaces.select-color.placeholder"},width:"half"},{field:"display_template",interface:"system-display-template",options:{collectionField:"collection"},width:"full"},{field:"hidden",special:["cast-boolean"],interface:"boolean",options:{label:"$t:field_options.directus_collections.hidden_label"},width:"half"},{field:"singleton",special:["cast-boolean"],interface:"boolean",options:{label:"$t:singleton_label"},width:"half"},{field:"translations",special:["cast-json"],interface:"list",options:{template:"{{ translation }} ({{ language }})",fields:[{field:"language",name:"$t:language",type:"string",schema:{default_value:"en-US"},meta:{interface:"system-language",width:"half",required:!0}},{field:"translation",name:"$t:field_options.directus_collections.collection_name",type:"string",meta:{interface:"input",width:"half",required:!0,options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}},{field:"singular",name:"$t:field_options.directus_collections.singular_unit",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}},{field:"plural",name:"$t:field_options.directus_collections.plural_unit",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}}]},width:"full"},{field:"preview_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"preview",title:"$t:field_options.directus_collections.preview_divider"},width:"full"},{field:"preview_url",interface:"system-display-template",options:{collectionField:"collection",injectVersionField:!0},width:"full"},{field:"content_versioning_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"published_with_changes",title:"$t:field_options.directus_collections.content_versioning_divider"},width:"full"},{field:"versioning",interface:"boolean",special:["cast-boolean"],options:{label:"$t:field_options.directus_collections.enable_versioning"},width:"half"},{field:"archive_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"archive",title:"$t:field_options.directus_collections.archive_divider"},width:"full"},{field:"archive_field",interface:"system-field",options:{collectionField:"collection",allowNone:!0,placeholder:"$t:field_options.directus_collections.archive_field_placeholder"},width:"half"},{field:"archive_app_filter",interface:"boolean",special:["cast-boolean"],options:{label:"$t:field_options.directus_collections.archive_app_filter"},width:"half"},{field:"archive_value",interface:"input",options:{font:"monospace",iconRight:"archive",placeholder:"$t:field_options.directus_collections.archive_value"},width:"half"},{field:"unarchive_value",interface:"input",options:{font:"monospace",iconRight:"unarchive",placeholder:"$t:field_options.directus_collections.unarchive_value"},width:"half"},{field:"sort_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"sort",title:"$t:field_options.directus_collections.sort_divider"},width:"full"},{field:"sort_field",interface:"system-field",options:{collectionField:"collection",placeholder:"$t:field_options.directus_collections.sort_field",typeAllowList:["float","decimal","integer"],allowNone:!0,allowPrimaryKey:!1,allowForeignKeys:!1},width:"half"},{field:"accountability_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"admin_panel_settings",title:"$t:field_options.directus_collections.accountability_divider"},width:"full"},{field:"accountability",interface:"select-dropdown",options:{choices:[{text:"$t:field_options.directus_collections.track_activity_revisions",value:"all"},{text:"$t:field_options.directus_collections.only_track_activity",value:"activity"},{text:"$t:field_options.directus_collections.do_not_track_anything",value:null}]},width:"half"},{field:"duplication_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"content_copy",title:"$t:field_options.directus_collections.duplication_divider"}},{field:"item_duplication_fields",special:["cast-json"],interface:"system-field-tree",options:{collectionField:"collection"}},{field:"sort",hidden:!0},{field:"group",hidden:!0},{field:"collapse",hidden:!0}]}),as({table:"directus_fields",fields:[{collection:"directus_fields",field:"id",width:"half"},{collection:"directus_fields",field:"collection",width:"half"},{collection:"directus_fields",field:"field",width:"half"},{collection:"directus_fields",field:"special",hidden:!0,special:["cast-csv"],width:"half"},{collection:"directus_fields",field:"interface",width:"half"},{collection:"directus_fields",field:"options",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"display",width:"half"},{collection:"directus_fields",field:"display_options",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"readonly",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"hidden",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"required",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"sort",width:"half"},{collection:"directus_fields",field:"width",width:"half"},{collection:"directus_fields",field:"group",width:"half"},{collection:"directus_fields",field:"translations",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"note",width:"half"},{collection:"directus_fields",field:"conditions",hidden:!0,special:["cast-json"]},{collection:"directus_fields",field:"validation",hidden:!0,special:["cast-json"]},{collection:"directus_fields",field:"validation_message",hidden:!0}]}),as({table:"directus_files",fields:[{field:"id",hidden:!0,interface:"input",special:["uuid"]},{field:"title",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_files.title"},width:"full"},{field:"description",interface:"input-multiline",width:"full",options:{placeholder:"$t:field_options.directus_files.description"}},{field:"tags",interface:"tags",options:{iconRight:"local_offer"},special:["cast-json"],width:"full",display:"labels",display_options:{choices:null,format:!1}},{field:"location",interface:"input",options:{iconRight:"place",placeholder:"$t:field_options.directus_files.location"},width:"half"},{field:"storage",interface:"input",options:{iconRight:"storage"},width:"half",readonly:!0},{field:"focal_point_divider",interface:"presentation-divider",options:{icon:"image_search",title:"$t:field_options.directus_files.focal_point_divider"},special:["alias","no-data"],width:"full"},{field:"focal_point_x",width:"half"},{field:"focal_point_y",width:"half"},{field:"storage_divider",interface:"presentation-divider",options:{icon:"insert_drive_file",title:"$t:field_options.directus_files.storage_divider"},special:["alias","no-data"],width:"full"},{field:"filename_disk",interface:"input",options:{iconRight:"publish",placeholder:"$t:field_options.directus_files.filename_disk"},readonly:!0,width:"half"},{field:"filename_download",interface:"input",options:{iconRight:"get_app",placeholder:"$t:field_options.directus_files.filename_download"},width:"half"},{field:"metadata",hidden:!0,special:["cast-json"]},{field:"type",display:"mime-type",readonly:!0},{field:"filesize",display:"filesize",readonly:!0},{field:"modified_by",interface:"select-dropdown-m2o",special:["user-updated"],width:"half",display:"user",readonly:!0,options:{template:"{{avatar.$thumbnail}} {{first_name}} {{last_name}}"}},{field:"modified_on",interface:"datetime",special:["date-updated"],width:"half",display:"datetime",readonly:!0},{field:"embed",width:"half",hidden:!0},{field:"uploaded_by",display:"user",width:"half",hidden:!0,special:["user-created"]},{field:"uploaded_on",display:"datetime",width:"half",hidden:!0},{field:"folder",width:"half",readonly:!0,special:["m2o"],display:"related-values",display_options:{template:"{{ name }}"}},{field:"width",width:"half",readonly:!0},{field:"height",width:"half",readonly:!0},{field:"charset",width:"half",readonly:!0},{field:"duration",width:"half",readonly:!0}]}),as({table:"directus_folders",fields:[{field:"id",interface:"input",special:["uuid"],width:"half"},{field:"parent",width:"half"},{field:"name",width:"full"}]}),as({table:"directus_migrations",fields:[{collection:"directus_migrations",field:"version"},{collection:"directus_migrations",field:"name"},{collection:"directus_migrations",field:"timestamp"}]}),as({table:"directus_permissions",fields:[{field:"permissions",hidden:!0,special:["cast-json"],width:"half"},{field:"presets",hidden:!0,special:["cast-json"],width:"half"},{field:"role",width:"half"},{field:"collection",width:"half"},{field:"id",width:"half"},{field:"fields",width:"half",special:["cast-csv"]},{field:"action",width:"half"},{field:"validation",width:"half",special:["cast-json"]}]}),as({table:"directus_presets",fields:[{field:"filter",hidden:!0,special:["cast-json"]},{field:"layout_query",hidden:!0,special:["cast-json"]},{field:"layout_options",hidden:!0,special:["cast-json"]},{field:"role",width:"half",special:["m2o"],display:"related-values",display_options:{template:"{{ name }}"}},{field:"user",width:"half",special:["m2o"],display:"related-values",display_options:{template:"{{ email }}"}},{field:"id",width:"half"},{field:"bookmark",width:"half"},{field:"icon",width:"half"},{field:"color",width:"half"},{field:"search",width:"half"},{field:"collection",width:"half"},{field:"layout",width:"half"},{field:"refresh_interval"}]}),as({table:"directus_relations",fields:[{field:"id",width:"half"},{field:"many_collection",width:"half"},{field:"many_field",width:"half"},{field:"one_collection",width:"half"},{field:"one_field",width:"half"},{field:"one_collection_field",width:"half"},{field:"one_allowed_collections",special:["cast-csv"],width:"half"},{field:"junction_field",width:"half"},{field:"sort_field",width:"half"},{field:"one_deselect_action",width:"half"}]}),as({table:"directus_revisions",fields:[{field:"id",width:"half"},{field:"activity",width:"half"},{field:"collection",width:"half"},{field:"item",width:"half"},{field:"data",hidden:!0,special:["cast-json"]},{field:"delta",hidden:!0,special:["cast-json"]},{field:"parent",width:"half"},{field:"version",width:"half"}]}),as({table:"directus_roles",fields:[{field:"id",hidden:!0,interface:"input",special:["uuid"]},{field:"name",interface:"input",options:{placeholder:"$t:field_options.directus_roles.name"},width:"half"},{field:"icon",interface:"select-icon",display:"icon",width:"half"},{field:"description",interface:"input",options:{placeholder:"$t:field_options.directus_roles.description"},width:"full"},{field:"app_access",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"admin_access",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"ip_access",interface:"tags",options:{placeholder:"$t:field_options.directus_roles.ip_access"},special:["cast-csv"],width:"full"},{field:"enforce_tfa",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"users",interface:"list-o2m",special:["o2m"],options:{fields:["first_name","last_name"]},width:"full"}]}),as({table:"directus_sessions",fields:[{field:"token",width:"half"},{field:"user",width:"half"},{field:"expires",width:"half"},{field:"ip",width:"half"},{field:"user_agent",width:"half"},{field:"origin",width:"half"},{field:"share"}]}),as(os),as({table:"directus_users",fields:[{field:"first_name",interface:"input",options:{iconRight:"account_circle"},width:"half"},{field:"last_name",interface:"input",options:{iconRight:"account_circle"},width:"half"},{field:"email",interface:"input",options:{iconRight:"email"},width:"half"},{field:"password",special:["hash","conceal"],interface:"input-hash",options:{iconRight:"lock",masked:!0},width:"half"},{field:"avatar",interface:"file",width:"full",display:"image"},{field:"location",interface:"input",options:{iconRight:"place"},width:"half"},{field:"title",interface:"input",options:{iconRight:"work"},width:"half"},{field:"description",interface:"input-multiline",width:"full"},{field:"tags",interface:"tags",special:["cast-json"],width:"full",options:{iconRight:"local_offer"},display:"labels",display_options:{choices:null,format:!1}},{field:"preferences_divider",interface:"presentation-divider",options:{icon:"face",title:"$t:fields.directus_users.user_preferences"},special:["alias","no-data"],width:"full"},{field:"language",interface:"system-language",width:"half",options:{includeProjectDefault:!0}},{field:"tfa_secret",interface:"system-mfa-setup",special:["conceal"],width:"half"},{field:"email_notifications",interface:"boolean",width:"half",special:["cast-boolean"]},{field:"theming_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:theme"},special:["alias","no-data"],width:"full"},{field:"appearance",interface:"select-dropdown",options:{choices:[{value:null,text:"$t:default_sync_with_project"},{value:"auto",text:"$t:appearance_auto"},{value:"light",text:"$t:appearance_light"},{value:"dark",text:"$t:appearance_dark"}]},width:"half"},{field:"theme_light",width:"full",interface:"system-theme",options:{appearance:"light",includeNull:!0}},{field:"theme_light_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"light"},special:["cast-json"]},{field:"theme_dark",width:"full",interface:"system-theme",options:{appearance:"dark",includeNull:!0}},{field:"theme_dark_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"dark"},special:["cast-json"]},{field:"admin_divider",interface:"presentation-divider",options:{icon:"verified_user",title:"$t:fields.directus_users.admin_options",color:"var(--theme--danger)"},special:["alias","no-data"],width:"full"},{field:"status",interface:"select-dropdown",options:{choices:[{text:"$t:fields.directus_users.status_draft",value:"draft"},{text:"$t:fields.directus_users.status_invited",value:"invited"},{text:"$t:fields.directus_users.status_unverified",value:"unverified"},{text:"$t:fields.directus_users.status_active",value:"active"},{text:"$t:fields.directus_users.status_suspended",value:"suspended"},{text:"$t:fields.directus_users.status_archived",value:"archived"}]},width:"half"},{field:"role",interface:"select-dropdown-m2o",options:{template:"{{ name }}"},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"token",interface:"system-token",special:["conceal"],width:"full"},{field:"id",special:["uuid"],interface:"input",options:{iconRight:"vpn_key"},width:"full"},{field:"last_page",width:"half"},{field:"last_access",width:"half",display:"datetime",readonly:!0,display_options:{relative:!0}},{field:"provider",width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:default_provider",value:"default"}]}},{field:"external_identifier",width:"half",options:{iconRight:"account_circle"},interface:"input"},{field:"auth_data",hidden:!0}]}),as({table:"directus_webhooks",fields:[{field:"id",hidden:!0},{field:"name",interface:"input",options:{iconRight:"title"},width:"full"},{field:"method",interface:"select-dropdown",display:"labels",display_options:{choices:[{value:"POST",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{value:"GET",foreground:"var(--theme--secondary)",background:"var(--secondary-25)"}],format:!1},options:{choices:["GET","POST"]},width:"half"},{field:"url",interface:"input",options:{iconRight:"link"},width:"half"},{field:"status",interface:"select-dropdown",display:"labels",display_options:{showAsDot:!0,choices:[{text:"$t:field_options.directus_webhooks.status_options_active",value:"active",foreground:"var(--theme--primary-background)",background:"var(--theme--primary)"},{text:"$t:field_options.directus_webhooks.status_options_inactive",value:"inactive",foreground:"var(--theme--foreground)",background:"var(--background-normal-alt)"}]},options:{choices:[{text:"$t:field_options.directus_webhooks.status_options_active",value:"active"},{text:"$t:field_options.directus_webhooks.status_options_inactive",value:"inactive"}]},width:"half"},{field:"data",interface:"boolean",options:{label:"$t:fields.directus_webhooks.data_label"},special:["cast-boolean"],width:"half",display:"boolean"},{field:"headers",special:["cast-json"],interface:"list",options:{template:"{{ header }}: {{ value }}",addLabel:"$t:field_options.directus_webhooks.headers.add",fields:[{field:"header",name:"$t:field_options.directus_webhooks.headers.header",type:"string",meta:{interface:"input",width:"half"}},{field:"value",name:"$t:field_options.directus_webhooks.headers.value",type:"string",meta:{interface:"input",width:"half"}}]},width:"full"},{field:"triggers_divider",interface:"presentation-divider",options:{icon:"api",title:"$t:fields.directus_webhooks.triggers"},special:["alias","no-data"],width:"full"},{field:"actions",interface:"select-multiple-checkbox",options:{choices:[{text:"$t:create",value:"create"},{text:"$t:update",value:"update"},{text:"$t:delete_label",value:"delete"}]},special:["cast-csv"],width:"full",display:"labels",display_options:{choices:[{text:"$t:create",value:"create",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{text:"$t:update",value:"update",foreground:"var(--blue)",background:"var(--blue-25)"},{text:"$t:delete_label",value:"delete",foreground:"var(--theme--danger)",background:"var(--danger-25)"},{text:"$t:login",value:"login",foreground:"var(--purple)",background:"var(--purple-25)"}]}},{field:"collections",interface:"system-collections",special:["cast-csv"],width:"full",display:"labels",display_options:{choices:null,format:!1}},{field:"was_active_before_deprecation",hidden:!0},{field:"migrated_flow",hidden:!0}]}),as({table:"directus_dashboards",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"panels",special:["o2m"]},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"note"},{field:"color"}]}),as({table:"directus_panels",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"color"},{field:"note"},{field:"type"},{field:"show_header",special:["cast-boolean"]},{field:"position_x"},{field:"position_y"},{field:"width"},{field:"height"},{field:"options",special:["cast-json"]},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"dashboard"}]}),as({table:"directus_notifications",fields:[{field:"id"},{field:"timestamp",special:["date-created","cast-timestamp"]},{field:"status"},{field:"recipient"},{field:"sender"},{field:"subject"},{field:"message"},{field:"collection"},{field:"item"}]}),as({table:"directus_shares",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"name"},{field:"collection",width:"half",hidden:!0},{field:"item",width:"half",hidden:!0},{field:"role",interface:"select-dropdown-m2o",width:"half",options:{template:"{{name}}",filter:{admin_access:{_eq:!1}}}},{field:"password",special:["hash","conceal"],interface:"input-hash",options:{iconRight:"lock",masked:!0},width:"half",note:"$t:shared_leave_blank_for_passwordless_access"},{field:"date_start",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"date_end",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"max_uses",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"times_used",width:"half",readonly:!0},{field:"date_created",special:["date-created","cast-timestamp"],width:"half",readonly:!0,conditions:[{name:"notCreatedYet",rule:{id:{_null:!0}},hidden:!0}]},{field:"user_created",special:["user-created"],interface:"select-dropdown-m2o",width:"half",display:"user",options:{template:"{{avatar.$thumbnail}} {{first_name}} {{last_name}}"},readonly:!0,conditions:[{name:"notCreatedYet",rule:{id:{_null:!0}},hidden:!0}]}]}),as({table:"directus_flows",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"color"},{field:"description"},{field:"status"},{field:"trigger"},{field:"accountability"},{field:"options",special:["cast-json"]},{field:"operation"},{field:"operations",special:["o2m"]},{field:"date_created",special:["date-created"]},{field:"user_created",special:["user-created"]}]}),as({table:"directus_operations",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"key"},{field:"type"},{field:"position_x"},{field:"position_y"},{field:"options",special:["cast-json"]},{field:"resolve"},{field:"reject"},{field:"flow"},{field:"date_created",special:["date-created"]},{field:"user_created",special:["user-created"]}]}),as({table:"directus_translations",fields:[{field:"id",hidden:!0,sort:1,special:["uuid"]},{field:"key",width:"half",sort:2,required:!0,interface:"input",options:{font:"monospace",placeholder:"$t:translation_key_placeholder"}},{field:"language",interface:"system-language",width:"half",sort:3,required:!0},{field:"value",interface:"input-multiline",sort:4,required:!0,options:{placeholder:"$t:enter_a_value"}}]}),as({table:"directus_versions",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"key"},{field:"name"},{field:"collection"},{field:"item"},{field:"hash",readonly:!0,hidden:!0},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"date_updated",special:["date-updated","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"user_updated",special:["user-updated"]}]}),as({table:"directus_extensions",fields:[{collection:"directus_extensions",field:"id",special:["uuid"]},{collection:"directus_extensions",field:"folder"},{collection:"directus_extensions",field:"source"},{collection:"directus_extensions",field:"bundle"},{collection:"directus_extensions",field:"enabled",special:["cast-boolean"]}]});var ls={role:null,permissions:{},validation:null,presets:null,fields:["*"],system:!0};function cs(e){return t=e,ns.includes(t)?`/${e.substring(9)}`:`/items/${e}`;var t}function us({collection:r,primaryKey:l,fields:c,localValues:u}){const{useFieldsStore:f}=e(),d=f(),h=t(),{primaryKeyField:p}=n(r),m=s(!1),g=s(null),y=s(null),_=function(t,n){const{useRelationsStore:r}=e(),s=r();return i((()=>n.value.filter((e=>Rr(e))).map((e=>[e,Ir(o(t),e,s)])).filter((([e,t])=>t))))}(r,c),v=i((()=>{if(!u.value)return{};const e={};for(const[t,n]of _.value){const[n]=t.split(".");e[n]=u.value[n]}return e}));return a([r,l,c,p],b,{immediate:!0}),a(v,((e,t)=>{const n=[];for(const[r,i]of _.value){const o=[];for(let s=0;s<i.length;++s){const a=i[s];o.push(a.field);const l=o.join("."),c=go(e,l);if(c!==go(t,l)&&!Yr(c)){const e=r.slice(l.length+1);n.push([[l,e],a]);break}}}n.length&&async function(e){const t=await Promise.all(e.map((async([[e,t],n])=>{var r,i;const o=n.related_collection,s=go(v.value,e);let a=null;if(Yr(s)){const e=d.getPrimaryKeyFieldForCollection(o);e&&(a=null!=(r=s[e.field])?r:null)}else a=s;return a?[[e,t],null==(i=(await h.get(`${cs(o)}/${a}`,{params:{fields:[t]}})).data)?void 0:i.data]:[[e,t],{}]})));for(const[[e,n],r]of t){const t=go(r,n);void 0!==t&&(y.value||(y.value={}),Yr(go(y.value,e))||Vo(y.value,e,{}),Vo(go(y.value,e),n,t))}}(n)})),{item:y,loading:m,error:g,fetch:b};async function b(){var e;if("+"!==o(l)&&!c.value.every((e=>!Rr(e)))){m.value=!0;try{y.value=null==(e=(await h.get(`${cs(o(r))}/${o(l)}`,{params:{fields:o(c)}})).data)?void 0:e.data}catch(e){g.value=e}finally{m.value=!1}}}}[...[{collection:"directus_collections",action:"read"},{collection:"directus_fields",action:"read"},{collection:"directus_permissions",action:"read",permissions:{role:{_eq:"$CURRENT_ROLE"}}},{collection:"directus_relations",action:"read"}].map((e=>({...ls,...e}))),{collection:"directus_activity",action:"read",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_activity",action:"create",validation:{comment:{_nnull:!0}}},{collection:"directus_presets",action:"read",permissions:{_or:[{user:{_eq:"$CURRENT_USER"}},{_and:[{user:{_null:!0}},{role:{_eq:"$CURRENT_ROLE"}}]},{_and:[{user:{_null:!0}},{role:{_null:!0}}]}]}},{collection:"directus_presets",action:"create",validation:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"update",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"delete",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_roles",action:"read",permissions:{id:{_eq:"$CURRENT_ROLE"}}},{collection:"directus_settings",action:"read"},{collection:"directus_translations",action:"read"},{collection:"directus_notifications",action:"read",permissions:{recipient:{_eq:"$CURRENT_USER"}}},{collection:"directus_notifications",action:"update",permissions:{recipient:{_eq:"$CURRENT_USER"}},fields:["status"]},{collection:"directus_shares",action:"read",permissions:{user_created:{_eq:"$CURRENT_USER"}}},{collection:"directus_users",action:"read",permissions:{id:{_eq:"$CURRENT_USER"}},fields:["id","first_name","last_name","last_page","email","password","location","title","description","tags","preferences_divider","avatar","language","appearance","theme_light","theme_dark","tfa_secret","status","role"]}].map((e=>({...ls,...e}))),es.extend({type:"string",base:es.string(),messages:{"string.contains":"{{#label}} must contain [{{#substring}}]","string.icontains":"{{#label}} must contain case insensitive [{{#substring}}]","string.ncontains":"{{#label}} can't contain [{{#substring}}]"},rules:{contains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"contains",args:{substring:e}})},validate:(e,t,{substring:n})=>!1===e.includes(n)?t.error("string.contains",{substring:n}):e},icontains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"icontains",args:{substring:e}})},validate:(e,t,{substring:n})=>!1===e.toLowerCase().includes(n.toLowerCase())?t.error("string.icontains",{substring:n}):e},ncontains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"ncontains",args:{substring:e}})},validate:(e,t,{substring:n})=>!0===e.includes(n)?t.error("string.ncontains",{substring:n}):e}}});var fs=[],ds=[];function hs(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var s=fs.indexOf(o);-1===s&&(s=fs.push(o)-1,ds[s]={}),n=ds[s]&&ds[s][r]?ds[s][r]:ds[s][r]=a()}else n=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var s="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(s,e),e}}hs("/* style overrides used in the interface options */\n[data-interface-options=calculated][data-field=parseError] .v-notice {\n  font-family: var(--theme--fonts--monospace--font-family);\n  white-space: pre;\n}\n[data-interface-options=calculated][data-field=parseError] .v-notice > div {\n  overflow-y: auto;\n}\n[data-interface-options=calculated].system-display-template {\n  --theme--form--field--input--height: 100%;\n}\n[data-interface-options=calculated].system-display-template .content {\n  white-space: pre-wrap;\n}\n[data-interface-options=calculated].system-display-template .content span {\n  white-space: pre-wrap;\n}",{});const ps=e=>(x("data-v-e15184f1"),e=e(),E(),e),ms=ps((()=>y("p",null,"Failed to parse formula",-1))),gs={key:0},ys={key:1};var _s=c({inheritAttrs:!1,__name:"interface",props:{primaryKey:{},collection:{},formula:{},iconLeft:{},iconRight:{}},setup(t){const n=t,{formula:r,collection:c,primaryKey:x}=u(n),E=f("values"),{result:$,parseError:M,fetchError:A,evalError:S}=function({formula:t,collection:n,primaryKey:r,injectedValues:o}){const{useRelationsStore:c}=e();c();const u=i((()=>{d.value=null;try{return Wo(t.value)}catch(e){d.value=e}})),f=s(null),d=s(null),h=s(null),p=i((()=>{if(!u.value)return[];d.value=null;try{return[...Ko(u.value)]}catch(e){d.value=e}return[]})),m=s({}),{item:g,fetch:y,error:_}=us({collection:n,primaryKey:r,fields:p,localValues:o});return a([g,o],(([e,t])=>{m.value=Fo({},e,t,((e,t)=>{if(Yr(e)&&!Yr(t))return e}))}),{deep:!0,immediate:!0}),a([u,m],(()=>{h.value=null;const e={};for(const t of p.value)Vo(e,t,go(m.value,t,null));try{f.value=Xo(u.value,e)}catch(e){h.value=e}}),{immediate:!0,deep:!0}),{result:l(f),parseError:d,fetchError:_,evalError:h}}({formula:r,collection:c,primaryKey:x,injectedValues:E});return(e,t)=>{const r=d("v-notice"),i=d("v-icon"),s=d("v-input");return n.formula?o(M)?(h(),p(r,{key:1,type:"danger"},{default:m((()=>[y("div",null,[ms,"string"==typeof o(M)?(h(),_("code",gs,[y("pre",null,v(o(M)),1)])):(h(),_("p",ys,v(o(M)),1))])])),_:1})):o(A)?(h(),p(r,{key:2,type:"danger"},{default:m((()=>[g(v(o(A)),1)])),_:1})):o(S)?(h(),p(r,{key:3,type:"danger"},{default:m((()=>[g(v(o(S)),1)])),_:1})):(h(),p(s,{key:4,"model-value":o($),readonly:""},b({_:2},[e.iconLeft?{name:"prepend",fn:m((()=>[w(i,{name:e.iconLeft},null,8,["name"])])),key:"0"}:void 0,e.iconRight?{name:"append",fn:m((()=>[w(i,{name:e.iconRight},null,8,["name"])])),key:"1"}:void 0]),1032,["model-value"])):(h(),p(r,{key:0,type:"warning"},{default:m((()=>[g(" No formula provided. ")])),_:1}))}}});hs("\n.v-notice[data-v-e15184f1] {\n  overflow-y: auto;\n}\npre[data-v-e15184f1] {\n  font-family: var(--theme--fonts--monospace--font-family);\n}\n",{});const vs=[r({id:"calculated",name:"Calculated",icon:"functions",description:"Automatically compute values based on field values.",component:((e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n})(_s,[["__scopeId","data-v-e15184f1"],["__file","interface.vue"]]),options({collection:t,field:n}){var r;let i=null;try{const{useRelationsStore:t}=e();i=t()}catch(e){}const{options:o}=null!=(r=n.meta)?r:{};let s=null,a=[],l=[];try{if(null==o?void 0:o.formula){const e=Wo(null==o?void 0:o.formula);a=[...Ar(e)].filter((e=>void 0===$r[e]));const n=[...Sr(e)].filter(Rr);if(i){l=n.map((e=>[e,Ir(t,e,i)])).filter((([e,t])=>{const n=e.split(".").at(-1),r=i.getRelationsForField(t.at(-1).related_collection,n);return t.length!==e.split(".").length-1||r.length>0})).map((([e,t])=>e))}}}catch(e){s=e}return[{field:"formula",name:"Formula",type:"string",meta:{width:"full",interface:"system-display-template",options:{collectionName:t,"data-interface-options":"calculated",style:s?"--v-input-border-color: var(--theme--danger); --v-input-border-color-hover: var(--theme--danger)":""}}},!!s&&{field:"parseErrorNotice",type:"alias",meta:{width:"full",interface:"presentation-notice",options:{color:"danger",text:s,"data-interface-options":"calculated","data-field":"parseError"}}},a.length>0&&{field:"functionErrorNotice",type:"alias",meta:{width:"full",interface:"presentation-notice",options:{color:"danger",text:`Unknown function${a.length>1?"s":""}: ${a.join(", ")}`,"data-interface-options":"calculated"}}},l.length>0&&{field:"invalidRelationsErrorNotice",type:"alias",meta:{width:"full",interface:"presentation-notice",options:{color:"danger",text:`Invalid field${l.length>1?"s":""} (calculated fields does not support relations other than M2O) : \n\n${l.map((e=>`* ${e}`)).join("\n")}`,"data-interface-options":"calculated"}}},{field:"iconLeft",name:"$t:icon_left",type:"string",meta:{width:"half",interface:"select-icon"}},{field:"iconRight",name:"$t:icon_right",type:"string",meta:{width:"half",interface:"select-icon"}}]},types:["alias"],localTypes:["presentation"],group:"presentation"})],bs=[],ws=[],xs=[],Es=[],$s=[],Ms=[];export{bs as displays,vs as interfaces,ws as layouts,xs as modules,Ms as operations,Es as panels,$s as themes};
